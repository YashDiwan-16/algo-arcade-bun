{
  "name": "project",
  "type": "registry:block",
  "dependencies": [
    "@ai-sdk/google",
    "@ai-sdk/react",
    "@hookform/resolvers",
    "@monaco-editor/react",
    "@orpc/client",
    "@orpc/openapi",
    "@orpc/server",
    "@orpc/zod",
    "@radix-ui/react-collapsible",
    "@radix-ui/react-dialog",
    "@radix-ui/react-dropdown-menu",
    "@radix-ui/react-hover-card",
    "@radix-ui/react-popover",
    "@radix-ui/react-progress",
    "@radix-ui/react-scroll-area",
    "@radix-ui/react-select",
    "@radix-ui/react-separator",
    "@radix-ui/react-slider",
    "@radix-ui/react-slot",
    "@radix-ui/react-tooltip",
    "@radix-ui/react-use-controllable-state",
    "@scalar/nextjs-api-reference",
    "@t3-oss/env-nextjs",
    "@tanstack/react-form",
    "@tanstack/react-query",
    "@tanstack/react-table",
    "@xyflow/react",
    "ai",
    "better-auth",
    "canvas-confetti",
    "cmdk",
    "date-fns",
    "embla-carousel-react",
    "input-otp",
    "lucide-react",
    "mongodb",
    "motion",
    "nanoid",
    "next-themes",
    "nodemailer",
    "nuqs",
    "radix-ui",
    "react-day-picker",
    "react-hook-form",
    "react-icons",
    "react-resizable-panels",
    "recharts",
    "shiki",
    "sonner",
    "streamdown",
    "tokenlens",
    "use-stick-to-bottom",
    "vaul",
    "zod"
  ],
  "devDependencies": [
    "@types/canvas-confetti",
    "@types/nodemailer",
    "tw-animate-css"
  ],
  "registryDependencies": [
    "accordion",
    "alert",
    "alert-dialog",
    "aspect-ratio",
    "avatar",
    "badge",
    "breadcrumb",
    "button",
    "calendar",
    "card",
    "carousel",
    "chart",
    "checkbox",
    "collapsible",
    "command",
    "context-menu",
    "dialog",
    "drawer",
    "dropdown-menu",
    "form",
    "hover-card",
    "input",
    "input-otp",
    "label",
    "menubar",
    "navigation-menu",
    "pagination",
    "popover",
    "progress",
    "radio-group",
    "resizable",
    "scroll-area",
    "select",
    "separator",
    "sheet",
    "sidebar",
    "skeleton",
    "slider",
    "sonner",
    "switch",
    "table",
    "tabs",
    "textarea",
    "toggle",
    "toggle-group",
    "tooltip"
  ],
  "files": [
    {
      "path": "ai\\config.ts",
      "content": "import { google } from \"@ai-sdk/google\";\r\nexport const aiModel = google(\"gemini-2.5-flash\");\r\nexport const aiConfig = {\r\n  model: aiModel,\r\n  temperature: 0.7,\r\n  maxTokens: 8192,\r\n};\r\n",
      "type": "registry:component",
      "target": "ai\\config.ts"
    },
    {
      "path": "ai\\templates.ts",
      "content": "export interface GameTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  category: string;\r\n  icon: string;\r\n  prompt: string;\r\n}\r\n\r\nexport const gameTemplates: GameTemplate[] = [\r\n  {\r\n    id: \"space-shooter\",\r\n    name: \"Space Shooter\",\r\n    description: \"Classic space shooter with enemies and power-ups\",\r\n    category: \"Action\",\r\n    icon: \"Rocket\",\r\n    prompt:\r\n      \"Create a space shooter game where the player controls a spaceship using arrow keys. The spaceship shoots lasers with the space bar. Enemies spawn from the top and move downward with randomized movement patterns. The player scores points by destroying enemies. Add a score counter, health bar with 3 lives, and a game over screen with restart button. Include shooting sound effects (use simple beep sounds), explosion animations, and gradually increasing difficulty.\",\r\n  },\r\n  {\r\n    id: \"platformer\",\r\n    name: \"Platformer\",\r\n    description: \"Side-scrolling platformer with jumping and obstacles\",\r\n    category: \"Platform\",\r\n    icon: \"Mountain\",\r\n    prompt:\r\n      \"Create a platformer game where the player controls a character that can move left/right with arrow keys and jump with spacebar. Add platforms at different heights, obstacles to avoid, and coins to collect. Include gravity physics, collision detection, a score counter for collected coins, and a level completion system. The character should have smooth animations for walking and jumping.\",\r\n  },\r\n  {\r\n    id: \"puzzle-match\",\r\n    name: \"Match-3 Puzzle\",\r\n    description: \"Match three or more items to score points\",\r\n    category: \"Puzzle\",\r\n    icon: \"Grid3x3\",\r\n    prompt:\r\n      \"Create a match-3 puzzle game with a grid of colored gems. Players click to swap adjacent gems to match 3 or more of the same color in a row or column. Matched gems disappear and new ones fall from the top. Include a score system, move counter, combo multipliers for consecutive matches, and special power-ups for matching 4 or 5 gems. Add satisfying visual effects when matches occur.\",\r\n  },\r\n  {\r\n    id: \"racing\",\r\n    name: \"Racing Game\",\r\n    description: \"Top-down racing game with obstacles\",\r\n    category: \"Racing\",\r\n    icon: \"Car\",\r\n    prompt:\r\n      \"Create a top-down racing game where the player controls a car using arrow keys. The road scrolls downward, and the player must avoid obstacles and other cars. Include lane switching, speed boosts, a speedometer, distance traveled counter, and crash detection. Add visual effects for speed, road markings, and responsive controls for a fun arcade racing experience.\",\r\n  },\r\n  {\r\n    id: \"tower-defense\",\r\n    name: \"Tower Defense\",\r\n    description: \"Strategic defense game with towers and enemies\",\r\n    category: \"Strategy\",\r\n    icon: \"Castle\",\r\n    prompt:\r\n      \"Create a tower defense game where enemies follow a path and the player places defensive towers to stop them. Include different tower types (basic, rapid-fire, splash damage), enemy waves with increasing difficulty, health bars for enemies, a currency system to buy/upgrade towers, and a lives system. Add visual range indicators for towers and smooth enemy movement along the path.\",\r\n  },\r\n  {\r\n    id: \"snake\",\r\n    name: \"Snake Game\",\r\n    description: \"Classic snake game with growing mechanics\",\r\n    category: \"Arcade\",\r\n    icon: \"Worm\",\r\n    prompt:\r\n      \"Create a classic snake game where the player controls a snake using arrow keys. The snake grows longer when eating food that appears randomly on the grid. The game ends if the snake hits the walls or its own body. Include a score counter, high score tracking, smooth grid-based movement, and a game over screen with restart option. Add visual feedback when the snake eats food.\",\r\n  },\r\n  {\r\n    id: \"breakout\",\r\n    name: \"Breakout\",\r\n    description: \"Break bricks with a ball and paddle\",\r\n    category: \"Arcade\",\r\n    icon: \"Box\",\r\n    prompt:\r\n      \"Create a Breakout/Arkanoid style game where the player controls a paddle at the bottom using mouse or arrow keys. A ball bounces around breaking colored bricks at the top. Include power-ups that fall from broken bricks (multi-ball, bigger paddle, laser), a lives system, score tracking, and multiple levels with different brick patterns. Add satisfying physics for ball bouncing.\",\r\n  },\r\n  {\r\n    id: \"flappy-bird\",\r\n    name: \"Flappy Bird Clone\",\r\n    description: \"Tap to fly and avoid obstacles\",\r\n    category: \"Arcade\",\r\n    icon: \"Bird\",\r\n    prompt:\r\n      \"Create a Flappy Bird style game where the player taps spacebar or clicks to make a bird flap and fly upward, with gravity pulling it down. Pipes move from right to left with gaps to fly through. Include score counting for each pipe passed, collision detection, a game over screen with high score, and smooth physics. Add a simple background with parallax scrolling.\",\r\n  },\r\n  {\r\n    id: \"memory-game\",\r\n    name: \"Memory Card Game\",\r\n    description: \"Match pairs of hidden cards\",\r\n    category: \"Puzzle\",\r\n    icon: \"Brain\",\r\n    prompt:\r\n      \"Create a memory card matching game with a grid of face-down cards. Players click to reveal two cards at a time, trying to find matching pairs. Include a move counter, timer, different difficulty levels (4x4, 6x6, 8x8 grids), smooth card flip animations, and a completion screen showing time and moves. Use colorful icons or emojis on the cards.\",\r\n  },\r\n  {\r\n    id: \"pong\",\r\n    name: \"Pong\",\r\n    description: \"Classic two-player paddle game\",\r\n    category: \"Sports\",\r\n    icon: \"RectangleHorizontal\",\r\n    prompt:\r\n      \"Create a Pong game where two paddles (left and right) hit a ball back and forth. Player controls one paddle with W/S keys, AI controls the other. Include ball physics with angle-based bouncing, score tracking (first to 10 wins), paddle movement, AI with adjustable difficulty, and a clean minimalist design. Add sound effects for paddle hits and scoring.\",\r\n  },\r\n  {\r\n    id: \"endless-runner\",\r\n    name: \"Endless Runner\",\r\n    description: \"Run and jump endlessly avoiding obstacles\",\r\n    category: \"Action\",\r\n    icon: \"Zap\",\r\n    prompt:\r\n      \"Create an endless runner game where the player character automatically runs forward and jumps over obstacles with spacebar. The game speeds up over time. Include randomly generated obstacles, distance tracking, a score system based on distance and collected items, a high score system, and a game over screen. Add background parallax scrolling and smooth animations.\",\r\n  },\r\n  {\r\n    id: \"asteroids\",\r\n    name: \"Asteroids\",\r\n    description: \"Destroy asteroids in space\",\r\n    category: \"Action\",\r\n    icon: \"Circle\",\r\n    prompt:\r\n      \"Create an Asteroids game where the player controls a spaceship that can rotate (left/right arrow keys), thrust forward (up arrow), and shoot (spacebar). Asteroids float around and split into smaller pieces when shot. Include wrapping screen edges, a lives system, score tracking, UFOs that occasionally appear, and smooth physics. Add particle effects for explosions.\",\r\n  },\r\n];\r\n\r\nexport const gameCategories = [\r\n  \"All\",\r\n  \"Action\",\r\n  \"Arcade\",\r\n  \"Puzzle\",\r\n  \"Platform\",\r\n  \"Racing\",\r\n  \"Strategy\",\r\n  \"Sports\",\r\n];\r\n",
      "type": "registry:component",
      "target": "ai\\templates.ts"
    },
    {
      "path": "app\\(auth)\\sign-in\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Spinner } from \"@/components/ui/spinner\";\r\nimport { AlertCircle, Mail } from \"lucide-react\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\n\r\nexport default function SignInPage() {\r\n  const [error, setError] = useState(\"\");\r\n  const [googleLoading, setGoogleLoading] = useState(false);\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    setGoogleLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      await authClient.signIn.social({\r\n        provider: \"google\",\r\n        callbackURL: \"/\",\r\n      });\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error ? err.message : \"Failed to sign in with Google\"\r\n      );\r\n      setGoogleLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-linear-to-br from-zinc-900 via-zinc-800 to-zinc-900 p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-1\">\r\n          <CardTitle className=\"text-2xl font-bold\">Welcome back</CardTitle>\r\n          <CardDescription>\r\n            Choose your preferred sign-in method\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {error && (\r\n            <Alert variant=\"destructive\">\r\n              <AlertCircle className=\"h-4 w-4\" />\r\n              <AlertDescription>{error}</AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n            onClick={handleGoogleSignIn}\r\n            disabled={googleLoading}\r\n          >\r\n            {googleLoading ? (\r\n              <>\r\n                <Spinner className=\"mr-2 h-4 w-4\" />\r\n                Connecting to Google...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FcGoogle className=\"mr-2 h-5 w-5\" />\r\n                Continue with Google\r\n              </>\r\n            )}\r\n          </Button>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <span className=\"w-full border-t\" />\r\n            </div>\r\n            <div className=\"relative flex justify-center text-xs uppercase\">\r\n              <span className=\"bg-background px-2 text-muted-foreground\">\r\n                Or\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <Link href=\"/sign-in-otp\" className=\"w-full block\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"default\"\r\n              className=\"w-full\"\r\n              size=\"lg\"\r\n              disabled={googleLoading}\r\n            >\r\n              <Mail className=\"mr-2 h-5 w-5\" />\r\n              Sign in with Email OTP\r\n            </Button>\r\n          </Link>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(auth)\\sign-in\\page.tsx"
    },
    {
      "path": "app\\(auth)\\sign-in-otp\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Spinner } from \"@/components/ui/spinner\";\r\nimport { AlertCircle, Mail } from \"lucide-react\";\r\nimport {\r\n  InputOTP,\r\n  InputOTPGroup,\r\n  InputOTPSlot,\r\n} from \"@/components/ui/input-otp\";\r\n\r\nexport default function SignInOTPPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n\r\n  const handleSendOTP = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      await authClient.emailOtp.sendVerificationOtp({\r\n        email,\r\n        type: \"sign-in\",\r\n      });\r\n      setOtpSent(true);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to send OTP\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOTP = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      await authClient.signIn.emailOtp({\r\n        email,\r\n        otp,\r\n      });\r\n      router.push(\"/\");\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Invalid OTP\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-linear-to-br from-zinc-900 via-zinc-800 to-zinc-900 p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-1\">\r\n          <CardTitle className=\"text-2xl font-bold\">\r\n            {otpSent ? \"Enter OTP\" : \"Sign in with OTP\"}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {otpSent\r\n              ? \"Enter the 6-digit code sent to your email\"\r\n              : \"We'll send a one-time password to your email\"}\r\n          </CardDescription>\r\n        </CardHeader>\r\n\r\n        {!otpSent ? (\r\n          <form onSubmit={handleSendOTP}>\r\n            <CardContent className=\"space-y-4\">\r\n              {error && (\r\n                <Alert variant=\"destructive\">\r\n                  <AlertCircle className=\"h-4 w-4\" />\r\n                  <AlertDescription>{error}</AlertDescription>\r\n                </Alert>\r\n              )}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <div className=\"relative\">\r\n                  <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    placeholder=\"name@example.com\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                    disabled={loading}\r\n                    className=\"pl-10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n            <CardFooter className=\"flex mt-4 flex-col space-y-4\">\r\n              <Button type=\"submit\" className=\"w-full\" disabled={loading}>\r\n                {loading ? (\r\n                  <>\r\n                    <Spinner className=\"mr-2 h-4 w-4\" />\r\n                    Sending OTP...\r\n                  </>\r\n                ) : (\r\n                  \"Send OTP\"\r\n                )}\r\n              </Button>\r\n              <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                <Link href=\"/sign-in\" className=\"hover:underline\">\r\n                  Sign in with Google\r\n                </Link>\r\n              </div>\r\n            </CardFooter>\r\n          </form>\r\n        ) : (\r\n          <form onSubmit={handleVerifyOTP}>\r\n            <CardContent className=\"space-y-4\">\r\n              {error && (\r\n                <Alert variant=\"destructive\">\r\n                  <AlertCircle className=\"h-4 w-4\" />\r\n                  <AlertDescription>{error}</AlertDescription>\r\n                </Alert>\r\n              )}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"otp\">One-Time Password</Label>\r\n                <div className=\"flex justify-center\">\r\n                  <InputOTP\r\n                    maxLength={6}\r\n                    value={otp}\r\n                    onChange={(value) => setOtp(value)}\r\n                    disabled={loading}\r\n                  >\r\n                    <InputOTPGroup>\r\n                      <InputOTPSlot index={0} />\r\n                      <InputOTPSlot index={1} />\r\n                      <InputOTPSlot index={2} />\r\n                      <InputOTPSlot index={3} />\r\n                      <InputOTPSlot index={4} />\r\n                      <InputOTPSlot index={5} />\r\n                    </InputOTPGroup>\r\n                  </InputOTP>\r\n                </div>\r\n                <p className=\"text-center text-xs text-muted-foreground\">\r\n                  Sent to {email}\r\n                </p>\r\n              </div>\r\n            </CardContent>\r\n            <CardFooter className=\"flex flex-col space-y-4\">\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                disabled={loading || otp.length !== 6}\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <Spinner className=\"mr-2 h-4 w-4\" />\r\n                    Verifying...\r\n                  </>\r\n                ) : (\r\n                  \"Verify & Sign In\"\r\n                )}\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                className=\"w-full\"\r\n                onClick={() => {\r\n                  setOtpSent(false);\r\n                  setOtp(\"\");\r\n                  setError(\"\");\r\n                }}\r\n                disabled={loading}\r\n              >\r\n                Use different email\r\n              </Button>\r\n            </CardFooter>\r\n          </form>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(auth)\\sign-in-otp\\page.tsx"
    },
    {
      "path": "app\\(protected)\\admin\\page.tsx",
      "content": "import { auth } from \"@/lib/auth\";\r\nimport { headers } from \"next/headers\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { UserManagement } from \"@/components/admin/user-management\";\r\nimport { AdminHeader } from \"@/components/admin/admin-header\";\r\n\r\nexport default async function AdminPage() {\r\n  const session = await auth.api.getSession({\r\n    headers: await headers(),\r\n  });\r\n\r\n  if (!session) {\r\n    redirect(\"/sign-in\");\r\n  }\r\n\r\n  const isAdmin = session.user.role === \"admin\" || session.user.role === \"super-admin\";\r\n\r\n  if (!isAdmin) {\r\n    redirect(\"/dashboard\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900\">\r\n      <AdminHeader session={session} />\r\n      <div className=\"container mx-auto p-6 space-y-6\">\r\n        <UserManagement />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\admin\\page.tsx"
    },
    {
      "path": "app\\(protected)\\ai\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowUpSquare, Sparkles, Zap, Stars } from \"lucide-react\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { toast } from \"sonner\";\r\nimport { useSidebar } from \"@/components/ui/sidebar\";\r\nimport { Loader } from \"@/components/ai-elements/loader\";\r\nimport { gameTemplates } from \"@/ai/templates\";\r\nimport * as LucideIcons from \"lucide-react\";\r\n\r\nexport default function AIGameCreatorPage() {\r\n  const router = useRouter();\r\n  const [description, setDescription] = useState(\"\");\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const { isMobile, setOpen, setOpenMobile } = useSidebar();\r\n\r\n  useEffect(() => {\r\n    if (isMobile) {\r\n      setOpenMobile(false);\r\n    } else {\r\n      setOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const textarea = document.getElementById(\r\n      \"description\"\r\n    ) as HTMLTextAreaElement;\r\n    if (textarea) {\r\n      textarea.style.height = \"auto\";\r\n      textarea.style.height = Math.min(textarea.scrollHeight, 200) + \"px\";\r\n    }\r\n  }, [description]);\r\n\r\n  const handleGenerate = async () => {\r\n    if (description.length < 10) {\r\n      toast.error(\r\n        \"Please provide a more detailed description (at least 10 characters)\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n\r\n    try {\r\n      const result = await client.ai.create({ description });\r\n\r\n      toast.success(\"Game created successfully!\");\r\n      router.push(`/ai/${result.id}`);\r\n    } catch (error) {\r\n      console.error(\"Error creating game:\", error);\r\n      toast.error(\r\n        error instanceof Error ? error.message : \"Failed to create game\"\r\n      );\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen w-full overflow-hidden bg-linear-to-br from-background via-background to-muted/20\">\r\n      {/* Animated background elements */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-pulse\" />\r\n        <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\" />\r\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-pink-500/5 rounded-full blur-3xl animate-pulse delay-2000\" />\r\n      </div>\r\n\r\n      <div className=\"relative container mx-auto max-w-6xl py-12 px-4 h-full flex items-center justify-center\">\r\n        <div className=\"w-full space-y-8 animate-in fade-in duration-700\">\r\n          {/* Header Section */}\r\n          <div className=\"text-center space-y-4 relative\">\r\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 backdrop-blur-sm mb-4 animate-in slide-in-from-top duration-500\">\r\n              <Sparkles className=\"w-4 h-4 text-primary animate-pulse\" />\r\n              <span className=\"text-sm font-medium bg-linear-to-r from-primary to-purple-600 bg-clip-text text-transparent\">\r\n                AI-Powered Game Creation\r\n              </span>\r\n              <Zap className=\"w-4 h-4 text-primary animate-pulse delay-150\" />\r\n            </div>\r\n\r\n            <h1 className=\"text-5xl md:text-7xl font-black tracking-tight animate-in slide-in-from-top duration-700 delay-100\">\r\n              <span className=\"bg-linear-to-r from-foreground via-primary to-purple-600 bg-clip-text text-transparent\">\r\n                Create Your Game\r\n              </span>\r\n            </h1>\r\n\r\n            <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed animate-in slide-in-from-top duration-700 delay-200\">\r\n              Describe your vision and watch as AI transforms your ideas into\r\n              interactive experiences.\r\n              <span className=\"hidden md:inline\">\r\n                {\" \"}\r\n                Be specific about mechanics, style, and features.\r\n              </span>\r\n            </p>\r\n          </div>\r\n\r\n          {/* Main Input Card */}\r\n          <div className=\"max-w-3xl mx-auto animate-in zoom-in duration-700 delay-300\">\r\n            <div className=\"relative group\">\r\n              {/* Glow effect */}\r\n              <div className=\"absolute -inset-1 bg-linear-to-r from-primary via-purple-500 to-pink-500 rounded-2xl opacity-20 group-hover:opacity-30 blur-xl transition-all duration-500\" />\r\n\r\n              <div className=\"relative bg-card/80 backdrop-blur-xl border-2 border-border/50 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 hover:border-primary/30\">\r\n                {/* Input Area */}\r\n                <div className=\"p-6 space-y-4\">\r\n                  <div className=\"relative flex items-end gap-3 rounded-xl border-2 border-border bg-background/50 backdrop-blur-sm p-3 focus-within:border-primary/50 focus-within:shadow-lg focus-within:shadow-primary/10 transition-all duration-300\">\r\n                    <textarea\r\n                      id=\"description\"\r\n                      placeholder=\"âœ¨ Describe your dream game... (e.g., A fast-paced space shooter with neon graphics, where players dodge asteroids using arrow keys...)\"\r\n                      value={description}\r\n                      onChange={(e) => setDescription(e.target.value)}\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\" && (e.metaKey || e.ctrlKey)) {\r\n                          e.preventDefault();\r\n                          if (!isGenerating && description.length >= 10) {\r\n                            handleGenerate();\r\n                          }\r\n                        }\r\n                      }}\r\n                      rows={1}\r\n                      className=\"flex-1 bg-transparent px-3 py-3 text-base resize-none focus:outline-none placeholder:text-muted-foreground/60 max-h-[200px] min-h-12\"\r\n                      style={{\r\n                        height: \"auto\",\r\n                        overflowY: description.length > 100 ? \"auto\" : \"hidden\",\r\n                      }}\r\n                      onInput={(e) => {\r\n                        const target = e.target as HTMLTextAreaElement;\r\n                        target.style.height = \"auto\";\r\n                        target.style.height =\r\n                          Math.min(target.scrollHeight, 200) + \"px\";\r\n                      }}\r\n                    />\r\n                    <button\r\n                      onClick={handleGenerate}\r\n                      disabled={isGenerating || description.length < 10}\r\n                      className=\"relative inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-bold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 bg-linear-to-r from-primary via-purple-600 to-pink-600 hover:shadow-lg hover:shadow-primary/50 hover:scale-105 active:scale-95 h-12 w-12 shrink-0 text-white group\"\r\n                      title={\r\n                        isGenerating\r\n                          ? \"Generating...\"\r\n                          : \"Generate Game (Ctrl/Cmd + Enter)\"\r\n                      }\r\n                    >\r\n                      {isGenerating ? (\r\n                        <Loader className=\"h-6 w-6\" />\r\n                      ) : (\r\n                        <>\r\n                          <ArrowUpSquare className=\"h-6 w-6 transition-transform group-hover:-translate-y-0.5\" />\r\n                          <div className=\"absolute inset-0 rounded-xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\r\n                        </>\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Character Counter */}\r\n                  <div className=\"flex items-center justify-between px-3\">\r\n                    <div className=\"flex items-center gap-2 text-xs\">\r\n                      <span className=\"text-muted-foreground\">\r\n                        {description.length} characters\r\n                      </span>\r\n                      {description.length >= 10 ? (\r\n                        <span className=\"inline-flex items-center gap-1 text-green-500 font-medium\">\r\n                          <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\" />\r\n                          Ready\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-muted-foreground/60\">\r\n                          (minimum 10)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <span className=\"text-xs text-muted-foreground/60 hidden sm:inline\">\r\n                      Press{\" \"}\r\n                      <kbd className=\"px-2 py-0.5 text-xs font-semibold bg-muted rounded border border-border\">\r\n                        Ctrl\r\n                      </kbd>{\" \"}\r\n                      +{\" \"}\r\n                      <kbd className=\"px-2 py-0.5 text-xs font-semibold bg-muted rounded border border-border\">\r\n                        Enter\r\n                      </kbd>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Templates Section */}\r\n          {description.length === 0 && (\r\n            <div className=\"max-w-6xl mx-auto space-y-6 animate-in fade-in duration-700 delay-500\">\r\n              <div className=\"text-center\">\r\n                <div className=\"inline-flex items-center gap-2 mb-3\">\r\n                  <div className=\"h-px w-12 bg-linear-to-r from-transparent to-border\" />\r\n                  <Stars\r\n                    className=\"w-4 h-4 text-primary animate-spin\"\r\n                    style={{ animationDuration: \"8s\" }}\r\n                  />\r\n                  <span className=\"text-sm font-semibold text-muted-foreground\">\r\n                    Popular Templates\r\n                  </span>\r\n                  <Stars\r\n                    className=\"w-4 h-4 text-primary animate-spin\"\r\n                    style={{\r\n                      animationDuration: \"8s\",\r\n                      animationDirection: \"reverse\",\r\n                    }}\r\n                  />\r\n                  <div className=\"h-px w-12 bg-linear-to-l from-transparent to-border\" />\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  Jump-start your creativity with these pre-made game concepts\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {gameTemplates.slice(0, 6).map((template, index) => {\r\n                  const IconComponent = ((\r\n                    LucideIcons as unknown as Record<\r\n                      string,\r\n                      React.ComponentType<{ className: string }>\r\n                    >\r\n                  )[template.icon] ||\r\n                    LucideIcons.Gamepad2) as React.ComponentType<{\r\n                    className: string;\r\n                  }>;\r\n                  return (\r\n                    <button\r\n                      key={template.id}\r\n                      onClick={() => setDescription(template.prompt)}\r\n                      className=\"group cursor-pointer relative p-5 rounded-2xl border-2 border-border bg-card/50 backdrop-blur-sm hover:bg-card hover:border-primary/50 hover:shadow-xl hover:shadow-primary/10 transition-all duration-300 text-left overflow-hidden hover:-translate-y-1 active:translate-y-0\"\r\n                      style={{\r\n                        animationDelay: `${index * 100}ms`,\r\n                      }}\r\n                    >\r\n                      {/* Background gradient on hover */}\r\n                      <div className=\"absolute inset-0 bg-linear-to-br from-primary/5 via-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n                      <div className=\"relative flex items-start gap-4\">\r\n                        <div className=\"shrink-0 w-12 h-12 rounded-xl bg-linear-to-br from-primary/20 to-purple-500/20 flex items-center justify-center group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300 shadow-lg\">\r\n                          <IconComponent className=\"w-6 h-6 text-primary\" />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <h4 className=\"font-bold text-base mb-1.5 group-hover:text-primary transition-colors line-clamp-1\">\r\n                            {template.name}\r\n                          </h4>\r\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 leading-relaxed\">\r\n                            {template.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Arrow indicator */}\r\n                      <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 group-hover:translate-x-0 translate-x-2\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-linear-to-br from-primary to-purple-600 flex items-center justify-center shadow-lg\">\r\n                          <ArrowUpSquare className=\"w-4 h-4 text-white\" />\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Shimmer effect */}\r\n                      <div className=\"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-linear-to-r from-transparent via-white/10 to-transparent\" />\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\ai\\page.tsx"
    },
    {
      "path": "app\\(protected)\\ai\\[id]\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport dynamic from \"next/dynamic\";\r\nimport {\r\n  Send,\r\n  Play,\r\n  Code,\r\n  History,\r\n  Upload,\r\n  ArrowLeft,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Sparkles,\r\n  Zap,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { useSidebar } from \"@/components/ui/sidebar\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { toast } from \"sonner\";\r\nimport Link from \"next/link\";\r\nimport LoadingScreen from \"@/components/layout/loading\";\r\nimport { Message, MessageContent } from \"@/components/ai-elements/message\";\r\nimport {\r\n  Conversation,\r\n  ConversationContent,\r\n  ConversationScrollButton,\r\n} from \"@/components/ai-elements/conversation\";\r\nimport { Suggestions, Suggestion } from \"@/components/ai-elements/suggestion\";\r\nimport { Loader } from \"@/components/ai-elements/loader\";\r\n\r\n// Dynamically import Monaco Editor to avoid SSR issues\r\nconst MonacoEditor = dynamic(() => import(\"@monaco-editor/react\"), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"flex items-center justify-center h-full\">\r\n      <LoadingScreen />\r\n    </div>\r\n  ),\r\n});\r\n\r\ninterface Message {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n  timestamp: Date;\r\n}\r\n\r\nexport default function AIGameEditorPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const gameId = params.id as string;\r\n  const queryClient = useQueryClient();\r\n  const { setOpen, setOpenMobile, isMobile } = useSidebar();\r\n\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showVersions, setShowVersions] = useState(false);\r\n  const [editedCode, setEditedCode] = useState<string | null>(null);\r\n  const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n  const [showPublishDialog, setShowPublishDialog] = useState(false);\r\n  const [publishTitle, setPublishTitle] = useState(\"\");\r\n\r\n  // Close sidebar initially when component mounts (but allow user to reopen it)\r\n  useEffect(() => {\r\n    if (isMobile) {\r\n      setOpenMobile(false);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Empty deps array - only run once on mount\r\n\r\n  // Fetch game data\r\n  const { data: game, isLoading } = useQuery({\r\n    queryKey: [\"ai-game\", gameId],\r\n    queryFn: async () => {\r\n      return await client.ai.get({ id: gameId });\r\n    },\r\n  });\r\n\r\n  // Code to display (prefer edited code, fallback to game code)\r\n  const displayCode = editedCode ?? game?.code ?? \"\";\r\n\r\n  // Handle code changes in Monaco editor\r\n  const handleCodeChange = (value: string | undefined) => {\r\n    if (value === undefined) return;\r\n\r\n    setEditedCode(value);\r\n\r\n    // Clear existing timer\r\n    if (debounceTimerRef.current) {\r\n      clearTimeout(debounceTimerRef.current);\r\n    }\r\n\r\n    // Debounce: Update preview after 500ms of no typing\r\n    debounceTimerRef.current = setTimeout(() => {\r\n      // The preview will automatically update since it uses displayCode\r\n      // We could add auto-save here if needed\r\n    }, 500);\r\n  };\r\n\r\n  // Reset edited code when game data changes from AI improvements\r\n  useEffect(() => {\r\n    if (game?.code && editedCode === null) {\r\n      // Only reset on initial load\r\n      return;\r\n    }\r\n  }, [game?.code, editedCode]);\r\n\r\n  // Improve game mutation\r\n  const improveMutation = useMutation({\r\n    mutationFn: async (prompt: string) => {\r\n      return await client.ai.improve({ id: gameId, prompt });\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"ai-game\", gameId] });\r\n\r\n      // Reset edited code to show AI-generated version\r\n      setEditedCode(null);\r\n\r\n      // Add assistant message\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content: `I've updated your game! Version ${data.version} is now active.`,\r\n          timestamp: new Date(),\r\n        },\r\n      ]);\r\n\r\n      toast.success(`Updated to version ${data.version}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message || \"Failed to improve game\");\r\n    },\r\n  });\r\n\r\n  // Restore version mutation\r\n  const restoreVersionMutation = useMutation({\r\n    mutationFn: async (version: number) => {\r\n      return await client.ai.restoreVersion({ id: gameId, version });\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"ai-game\", gameId] });\r\n      // Reset edited code to show restored version\r\n      setEditedCode(null);\r\n      toast.success(`Restored to version ${data.version}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message || \"Failed to restore version\");\r\n    },\r\n  });\r\n\r\n  // Publish game mutation\r\n  const publishMutation = useMutation({\r\n    mutationFn: async (title: string) => {\r\n      return await client.ai.publish({ id: gameId, title });\r\n    },\r\n    onSuccess: () => {\r\n      toast.success(\"Game published to arena!\");\r\n      queryClient.invalidateQueries({ queryKey: [\"ai-game\", gameId] });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message || \"Failed to publish game\");\r\n    },\r\n  });\r\n\r\n  const handleSendMessage = () => {\r\n    if (!inputMessage.trim()) return;\r\n\r\n    // Add user message\r\n    const userMessage: Message = {\r\n      role: \"user\",\r\n      content: inputMessage,\r\n      timestamp: new Date(),\r\n    };\r\n    setMessages((prev) => [...prev, userMessage]);\r\n\r\n    // Call improve API\r\n    improveMutation.mutate(inputMessage);\r\n    setInputMessage(\"\");\r\n  };\r\n\r\n  const handleRestoreVersion = (version: number) => {\r\n    restoreVersionMutation.mutate(version);\r\n  };\r\n\r\n  const handlePublish = () => {\r\n    setPublishTitle(game?.title || \"\");\r\n    setShowPublishDialog(true);\r\n  };\r\n\r\n  const handleConfirmPublish = () => {\r\n    if (publishTitle.trim()) {\r\n      publishMutation.mutate(publishTitle);\r\n      setShowPublishDialog(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <LoadingScreen />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!game) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen gap-4\">\r\n        <p className=\"text-lg text-muted-foreground\">Game not found</p>\r\n        <Button onClick={() => router.push(\"/ai\")}>Create New Game</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AlertDialog open={showPublishDialog} onOpenChange={setShowPublishDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Publish Game to Arena</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Enter a title for your game. This will be visible to all players\r\n              in the arena.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <div className=\"py-4\">\r\n            <Input\r\n              placeholder=\"Enter game title...\"\r\n              value={publishTitle}\r\n              onChange={(e) => setPublishTitle(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  handleConfirmPublish();\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleConfirmPublish}\r\n              disabled={!publishTitle.trim()}\r\n            >\r\n              Publish\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      <div className=\"h-full flex overflow-hidden bg-background\">\r\n        {/* Left Panel - AI Chat & Controls (25%) */}\r\n        <div className=\"w-[25%] flex flex-col border-r bg-muted/30\">\r\n          {/* Compact Header with Controls */}\r\n          <div className=\"p-4 border-b bg-muted/50\">\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <Button variant=\"ghost\" size=\"icon\" asChild className=\"h-8 w-8\">\r\n                <Link href=\"/ai\">\r\n                  <ArrowLeft className=\"h-4 w-4\" />\r\n                </Link>\r\n              </Button>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Sparkles className=\"h-4 w-4 text-primary\" />\r\n                  <h1 className=\"text-sm font-bold truncate\">{game.title}</h1>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 mt-1\">\r\n                  <Badge variant=\"outline\" className=\"text-xs px-1.5 py-0\">\r\n                    <Zap className=\"h-2.5 w-2.5 mr-1\" />v{game.currentVersion}\r\n                  </Badge>\r\n                  {game.published ? (\r\n                    <Badge className=\"text-xs px-1.5 py-0\">Live</Badge>\r\n                  ) : (\r\n                    <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\r\n                      Draft\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Publish Button */}\r\n            {!game.published && (\r\n              <Button\r\n                onClick={handlePublish}\r\n                disabled={publishMutation.isPending}\r\n                className=\"w-full\"\r\n                size=\"sm\"\r\n              >\r\n                {publishMutation.isPending ? (\r\n                  <>\r\n                    <Loader size={14} className=\"mr-2\" />\r\n                    Publishing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"mr-2 h-3.5 w-3.5\" />\r\n                    Publish to Arena\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Version History - Collapsible */}\r\n          <div className=\"border-b\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={() => setShowVersions(!showVersions)}\r\n              className=\"w-full justify-between px-4 py-3 rounded-none\"\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                <History className=\"h-4 w-4\" />\r\n                <span className=\"text-sm font-semibold\">Version History</span>\r\n                <Badge variant=\"secondary\" className=\"text-xs\">\r\n                  {game.versions.length}\r\n                </Badge>\r\n              </div>\r\n              {showVersions ? (\r\n                <ChevronUp className=\"h-4 w-4\" />\r\n              ) : (\r\n                <ChevronDown className=\"h-4 w-4\" />\r\n              )}\r\n            </Button>\r\n\r\n            {showVersions && game.versions.length > 0 && (\r\n              <div className=\"px-3 pb-3 bg-muted/20\">\r\n                <ScrollArea className=\"h-48\">\r\n                  <div className=\"space-y-2 pr-2\">\r\n                    {game.versions.map((version) => (\r\n                      <div\r\n                        key={version.version}\r\n                        className={`rounded-lg border p-3 transition-all ${\r\n                          version.version === game.currentVersion\r\n                            ? \"bg-primary/5 border-primary/20\"\r\n                            : \"bg-card hover:bg-accent\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                          <div className=\"flex items-center gap-1.5 flex-wrap\">\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              <Zap className=\"h-2.5 w-2.5 mr-1\" />v\r\n                              {version.version}\r\n                            </Badge>\r\n                            {version.version === game.currentVersion && (\r\n                              <Badge className=\"text-xs\">Active</Badge>\r\n                            )}\r\n                          </div>\r\n                          {version.version !== game.currentVersion && (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() =>\r\n                                handleRestoreVersion(version.version)\r\n                              }\r\n                              disabled={restoreVersionMutation.isPending}\r\n                              className=\"h-6 px-2 text-xs\"\r\n                            >\r\n                              Restore\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground line-clamp-2 leading-relaxed\">\r\n                          {version.prompt}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </ScrollArea>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* AI Assistant Header */}\r\n          <div className=\"px-4 py-3 border-b bg-muted/20\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Sparkles className=\"h-4 w-4 text-primary\" />\r\n              <h2 className=\"text-sm font-bold\">AI Assistant</h2>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          <Conversation className=\"flex-1\">\r\n            <ConversationContent>\r\n              {messages.length === 0 && (\r\n                <div className=\"text-center py-12 px-4\">\r\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 border mb-4\">\r\n                    <Sparkles className=\"h-8 w-8 text-primary\" />\r\n                  </div>\r\n                  <p className=\"text-sm font-semibold mb-2\">\r\n                    Enhance Your Game\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground leading-relaxed mb-4\">\r\n                    Tell me how to improve your game:\r\n                  </p>\r\n                  <Suggestions className=\"justify-center\">\r\n                    <Suggestion\r\n                      suggestion=\"Add a score system\"\r\n                      onClick={(s) => setInputMessage(s)}\r\n                    />\r\n                    <Suggestion\r\n                      suggestion=\"Make enemies faster\"\r\n                      onClick={(s) => setInputMessage(s)}\r\n                    />\r\n                    <Suggestion\r\n                      suggestion=\"Add power-ups\"\r\n                      onClick={(s) => setInputMessage(s)}\r\n                    />\r\n                  </Suggestions>\r\n                </div>\r\n              )}\r\n              {messages.map((message, index) => (\r\n                <Message key={index} from={message.role}>\r\n                  <MessageContent>\r\n                    <p className=\"text-sm leading-relaxed\">{message.content}</p>\r\n                  </MessageContent>\r\n                </Message>\r\n              ))}\r\n              {improveMutation.isPending && (\r\n                <Message from=\"assistant\">\r\n                  <MessageContent>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Loader size={16} />\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        Processing your request...\r\n                      </span>\r\n                    </div>\r\n                  </MessageContent>\r\n                </Message>\r\n              )}\r\n            </ConversationContent>\r\n            <ConversationScrollButton />\r\n          </Conversation>\r\n\r\n          {/* Input */}\r\n          <div className=\"p-4 border-t bg-muted/20\">\r\n            <div className=\"flex gap-2\">\r\n              <Input\r\n                placeholder=\"Describe your improvement...\"\r\n                value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\" && !e.shiftKey) {\r\n                    e.preventDefault();\r\n                    handleSendMessage();\r\n                  }\r\n                }}\r\n                disabled={improveMutation.isPending}\r\n              />\r\n              <Button\r\n                size=\"icon\"\r\n                onClick={handleSendMessage}\r\n                disabled={!inputMessage.trim() || improveMutation.isPending}\r\n              >\r\n                <Send className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Panel - Preview & Code Editor (75%) */}\r\n        <div className=\"flex-1 flex flex-col\">\r\n          <Tabs defaultValue=\"preview\" className=\"flex-1 flex flex-col\">\r\n            <div className=\"border-b px-6\">\r\n              <TabsList>\r\n                <TabsTrigger value=\"preview\" className=\"gap-2\">\r\n                  <Play className=\"h-4 w-4\" />\r\n                  Live Preview\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"code\" className=\"gap-2\">\r\n                  <Code className=\"h-4 w-4\" />\r\n                  Source Code\r\n                </TabsTrigger>\r\n              </TabsList>\r\n            </div>\r\n\r\n            <TabsContent value=\"preview\" className=\"flex-1 m-0 p-0\">\r\n              <div className=\"h-full bg-black\">\r\n                <iframe\r\n                  key={displayCode}\r\n                  srcDoc={displayCode}\r\n                  className=\"w-full h-full border-0\"\r\n                  title=\"Game Preview\"\r\n                  sandbox=\"allow-scripts\"\r\n                />\r\n              </div>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"code\" className=\"flex-1 m-0 p-0\">\r\n              <MonacoEditor\r\n                height=\"100%\"\r\n                language=\"html\"\r\n                value={displayCode}\r\n                onChange={handleCodeChange}\r\n                theme=\"vs-dark\"\r\n                options={{\r\n                  readOnly: false,\r\n                  minimap: { enabled: true },\r\n                  fontSize: 14,\r\n                  lineNumbers: \"on\",\r\n                  scrollBeyondLastLine: false,\r\n                  automaticLayout: true,\r\n                  wordWrap: \"on\",\r\n                  tabSize: 2,\r\n                  formatOnPaste: true,\r\n                  formatOnType: true,\r\n                }}\r\n              />\r\n            </TabsContent>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\ai\\[id]\\page.tsx"
    },
    {
      "path": "app\\(protected)\\arcade\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Gamepad2,\r\n  Users,\r\n  Star,\r\n  TrendingUp,\r\n  Zap,\r\n  Crown,\r\n  Play,\r\n} from \"lucide-react\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport Link from \"next/link\";\r\nimport LoadingScreen from \"@/components/layout/loading\";\r\n\r\nexport default function ArenaPage() {\r\n  const [page, setPage] = useState(1);\r\n  const perPage = 12;\r\n\r\n  const { data, isLoading } = useQuery({\r\n    queryKey: [\"arena-games\", page],\r\n    queryFn: async () => {\r\n      return await client.arena.games({ page, perPage });\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return <LoadingScreen text=\"Loading games...\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full bg-linear-to-br from-background via-background to-primary/5\">\r\n      <div className=\"container mx-auto px-4 pt-12\">\r\n        <div className=\"mb-12 text-center space-y-6 opacity-0 animate-[fadeIn_1s_ease-out_forwards]\">\r\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-linear-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800\">\r\n            <Gamepad2 className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\r\n            <span className=\"text-sm font-medium text-purple-900 dark:text-purple-100\">\r\n              {data?.games.length || 0} Games Available\r\n            </span>\r\n          </div>\r\n\r\n          <h1 className=\"text-5xl sm:text-6xl font-black tracking-tight\">\r\n            <span className=\"block bg-linear-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400 bg-clip-text text-transparent bg-size-[200%_auto] animate-[gradient_8s_ease_infinite]\">\r\n              Game Arcade\r\n            </span>\r\n          </h1>\r\n\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\r\n            Dive into a world of fun! Explore, play, and enjoy a variety of\r\n            games created by our amazing community.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Games Grid */}\r\n        {data?.games && data.games.length > 0 ? (\r\n          <>\r\n            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 mb-12\">\r\n              {data.games.map((game, index) => (\r\n                <Link\r\n                  key={game.id}\r\n                  href={`/arcade/${game.id}`}\r\n                  className=\"group relative overflow-hidden rounded-2xl border border-border/50 bg-card shadow-lg transition-all duration-500 hover:shadow-2xl hover:shadow-primary/20 hover:-translate-y-2 hover:border-primary/50\"\r\n                  style={{\r\n                    animationDelay: `${index * 50}ms`,\r\n                  }}\r\n                >\r\n                  {/* Gradient Overlay on Hover */}\r\n                  <div className=\"absolute inset-0 bg-linear-to-br from-primary/20 via-purple-500/10 to-pink-500/20 opacity-0 transition-opacity duration-500 group-hover:opacity-100\" />\r\n\r\n                  {/* Featured Badge */}\r\n                  {index === 0 && (\r\n                    <div className=\"absolute top-3 right-3 z-20 px-3 py-1 rounded-full bg-linear-to-r from-yellow-500 to-orange-500 text-xs font-bold text-white flex items-center gap-1 shadow-lg\">\r\n                      <Crown className=\"h-3 w-3\" />\r\n                      Featured\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Game Preview */}\r\n                  <div className=\"relative aspect-video overflow-hidden bg-linear-to-br from-muted to-muted/50 flex items-center justify-center\">\r\n                    <div className=\"absolute inset-0 bg-linear-to-t from-background via-background/60 to-transparent z-10 pointer-events-none\" />\r\n\r\n                    {/* Play Button Overlay */}\r\n                    <div className=\"absolute inset-0 z-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                      <div className=\"w-16 h-16 rounded-full bg-primary/90 backdrop-blur-sm flex items-center justify-center transform scale-90 group-hover:scale-100 transition-transform duration-300 shadow-2xl\">\r\n                        <Play\r\n                          className=\"h-8 w-8 text-primary-foreground ml-1\"\r\n                          fill=\"currentColor\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <iframe\r\n                      srcDoc={game.html || \"\"}\r\n                      className=\"w-full h-full border-none pointer-events-none transform scale-100 group-hover:scale-105 transition-transform duration-500\"\r\n                      sandbox=\"allow-scripts allow-popups allow-presentation\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Game Info */}\r\n                  <div className=\"relative p-5\">\r\n                    <h3 className=\"mb-2 text-lg font-bold group-hover:text-primary transition-colors line-clamp-1\">\r\n                      {game.title}\r\n                    </h3>\r\n                    <p className=\"mb-4 text-sm text-muted-foreground line-clamp-2 leading-relaxed\">\r\n                      {game.description}\r\n                    </p>\r\n\r\n                    {/* Stats Row */}\r\n                    <div className=\"flex items-center gap-4 mb-4 text-xs text-muted-foreground\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Star className=\"h-3 w-3 fill-yellow-500 text-yellow-500\" />\r\n                        <span>\r\n                          4.{Math.floor(game.id.charCodeAt(0) % 3) + 6}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Users className=\"h-3 w-3\" />\r\n                        <span>\r\n                          {Math.floor((game.id.charCodeAt(1) % 9) * 100) + 100}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <TrendingUp className=\"h-3 w-3 text-green-500\" />\r\n                        <span className=\"text-green-500\">Hot</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Button className=\"w-full rounded-xl font-semibold shadow-lg group-hover:shadow-primary/50 transition-shadow\">\r\n                      Play Now\r\n                      <Gamepad2 className=\"ml-2 h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n\r\n                  {/* Shine Effect */}\r\n                  <div className=\"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-linear-to-r from-transparent via-white/10 to-transparent pointer-events-none\" />\r\n                </Link>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            {data.pageCount > 1 && (\r\n              <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                  disabled={page === 1}\r\n                  className=\"rounded-xl min-w-[120px]\"\r\n                  size=\"lg\"\r\n                >\r\n                  Previous\r\n                </Button>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  {Array.from(\r\n                    { length: Math.min(data.pageCount, 5) },\r\n                    (_, i) => {\r\n                      let pageNum;\r\n                      if (data.pageCount <= 5) {\r\n                        pageNum = i + 1;\r\n                      } else if (page <= 3) {\r\n                        pageNum = i + 1;\r\n                      } else if (page >= data.pageCount - 2) {\r\n                        pageNum = data.pageCount - 4 + i;\r\n                      } else {\r\n                        pageNum = page - 2 + i;\r\n                      }\r\n\r\n                      return (\r\n                        <Button\r\n                          key={pageNum}\r\n                          variant={pageNum === page ? \"default\" : \"outline\"}\r\n                          onClick={() => setPage(pageNum)}\r\n                          className={`rounded-xl min-w-11 ${\r\n                            pageNum === page\r\n                              ? \"shadow-lg shadow-primary/50\"\r\n                              : \"\"\r\n                          }`}\r\n                        >\r\n                          {pageNum}\r\n                        </Button>\r\n                      );\r\n                    }\r\n                  )}\r\n                </div>\r\n\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() =>\r\n                    setPage((p) => Math.min(data.pageCount, p + 1))\r\n                  }\r\n                  disabled={page === data.pageCount}\r\n                  className=\"rounded-xl min-w-[120px]\"\r\n                  size=\"lg\"\r\n                >\r\n                  Next\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"text-center py-24\">\r\n            <div className=\"relative inline-block mb-6\">\r\n              <div className=\"absolute inset-0 bg-primary/20 blur-3xl rounded-full\" />\r\n              <div className=\"relative bg-linear-to-br from-primary/10 to-purple-500/10 p-8 rounded-3xl border border-primary/20\">\r\n                <Gamepad2 className=\"h-20 w-20 text-primary\" />\r\n              </div>\r\n            </div>\r\n\r\n            <h2 className=\"text-3xl font-bold mb-3\">No Games Available Yet</h2>\r\n            <p className=\"text-muted-foreground mb-8 max-w-md mx-auto\">\r\n              Be a pioneer! Create and publish the first game to the arena and\r\n              become a legend.\r\n            </p>\r\n\r\n            <Button\r\n              asChild\r\n              size=\"lg\"\r\n              className=\"rounded-xl bg-linear-to-r from-primary via-purple-500 to-pink-500 text-white font-semibold shadow-2xl hover:shadow-primary/50 transition-all hover:scale-105\"\r\n            >\r\n              <Link href=\"/ai\">\r\n                <Zap className=\"mr-2 h-5 w-5\" />\r\n                Create Your First Game\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\arcade\\page.tsx"
    },
    {
      "path": "app\\(protected)\\arcade\\[id]\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Loader2, Sparkles, Zap, Trophy } from \"lucide-react\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function ArenaGamePage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const gameId = params.id as string;\r\n\r\n  const { data: game, isLoading } = useQuery({\r\n    queryKey: [\"arena-game\", gameId],\r\n    queryFn: async () => {\r\n      return await client.arena.game({ id: gameId });\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-purple-500\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!game) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen gap-4\">\r\n        <p className=\"text-lg text-muted-foreground\">Game not found</p>\r\n        <Button onClick={() => router.push(\"/arcade\")}>Back to Arena</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      {/* Game Content */}\r\n      <div className=\"flex-1 container mx-auto p-4 flex gap-4\">\r\n        {/* Game Preview - Takes most space */}\r\n        <div className=\"flex-1 relative group\">\r\n          <div className=\"absolute -inset-1 bg-linear-to-r from-purple-600 to-pink-600 dark:from-purple-500 dark:to-pink-500 rounded-2xl blur opacity-25 group-hover:opacity-40 transition duration-500\"></div>\r\n          <div className=\"relative h-full rounded-2xl overflow-hidden border-2 border-slate-200/50 dark:border-slate-800/50 bg-slate-900 shadow-2xl\">\r\n            <iframe\r\n              srcDoc={game.code}\r\n              className=\"w-full h-full border-0\"\r\n              title={game.title}\r\n              sandbox=\"allow-scripts\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Game Info Sidebar */}\r\n        <div className=\"w-80\">\r\n          <Card className=\"border-purple-200 dark:border-purple-800 bg-white/60 dark:bg-slate-900/60 backdrop-blur-sm\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg text-slate-800 dark:text-slate-200\">\r\n                Why Create with AI?\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"h-6 w-6 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center shrink-0\">\r\n                  <Zap className=\"h-3 w-3 text-purple-600 dark:text-purple-400\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-slate-800 dark:text-slate-200\">\r\n                    Lightning Fast\r\n                  </p>\r\n                  <p className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n                    Create games in minutes, not hours\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"h-6 w-6 rounded-full bg-pink-100 dark:bg-pink-900/50 flex items-center justify-center shrink-0\">\r\n                  <Sparkles className=\"h-3 w-3 text-pink-600 dark:text-pink-400\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-slate-800 dark:text-slate-200\">\r\n                    AI Powered\r\n                  </p>\r\n                  <p className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n                    Smart assistance every step of the way\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"h-6 w-6 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center shrink-0\">\r\n                  <Trophy className=\"h-3 w-3 text-purple-600 dark:text-purple-400\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-slate-800 dark:text-slate-200\">\r\n                    No Code Required\r\n                  </p>\r\n                  <p className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n                    Build without writing a single line\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"mt-4 overflow-hidden border-purple-300 dark:border-purple-700 bg-linear-to-br from-purple-500/10 via-pink-500/10 to-purple-500/10 dark:from-purple-500/20 dark:via-pink-500/20 dark:to-purple-500/20 backdrop-blur-sm hover:shadow-xl hover:shadow-purple-500/30 transition-all group\">\r\n            <div className=\"absolute inset-0 bg-linear-to-br from-purple-600/20 to-pink-600/20 dark:from-purple-600/30 dark:to-pink-600/30 opacity-0 group-hover:opacity-100 transition-opacity\"></div>\r\n            <CardHeader className=\"relative z-10\">\r\n              <CardTitle className=\"text-xl text-slate-800 dark:text-slate-200\">\r\n                Create Your Own!\r\n              </CardTitle>\r\n              <CardDescription className=\"text-slate-600 dark:text-slate-400\">\r\n                Like this game? Build your own masterpiece with AI assistance in\r\n                minutes\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"relative z-10\">\r\n              <Button\r\n                asChild\r\n                className=\"w-full bg-linear-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg shadow-purple-500/50 dark:shadow-purple-500/30 font-semibold group\"\r\n              >\r\n                <Link\r\n                  href=\"/ai\"\r\n                  className=\"flex items-center justify-center gap-2\"\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 group-hover:animate-pulse\" />\r\n                  Start Creating\r\n                  <Sparkles className=\"h-4 w-4 group-hover:animate-pulse\" />\r\n                </Link>\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\arcade\\[id]\\page.tsx"
    },
    {
      "path": "app\\(protected)\\games\\head-soccer\\page.tsx",
      "content": "import HeadSoccerGame from \"@/components/games/head-soccer\";\r\n\r\nconst HeadSoccer = () => {\r\n  return <HeadSoccerGame />;\r\n};\r\n\r\nexport default HeadSoccer;\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\games\\head-soccer\\page.tsx"
    },
    {
      "path": "app\\(protected)\\games\\paaji\\page.tsx",
      "content": "import Paaji from \"@/components/games/paaji\";\r\n\r\nconst PaajiGame = () => {\r\n  return <Paaji />;\r\n};\r\n\r\nexport default PaajiGame;\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\games\\paaji\\page.tsx"
    },
    {
      "path": "app\\(protected)\\games\\page.tsx",
      "content": "import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Gamepad2, Star, Users, Zap, TrendingUp } from \"lucide-react\";\r\n\r\ninterface Game {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  image: string;\r\n  href: string;\r\n  category: string;\r\n  players: string;\r\n  difficulty: \"Easy\" | \"Medium\" | \"Hard\";\r\n}\r\n\r\nconst games: Game[] = [\r\n  {\r\n    id: \"head-soccer\",\r\n    title: \"Head Soccer\",\r\n    description:\r\n      \"A fast-paced physics-based soccer game where you control characters with oversized heads. Jump, kick, and score goals in this exciting 1v1 match!\",\r\n    image: \"/games/head-soccer.png\",\r\n    href: \"/games/head-soccer\",\r\n    category: \"Sports\",\r\n    players: \"1-2 Players\",\r\n    difficulty: \"Medium\",\r\n  },\r\n  {\r\n    id: \"showdown\",\r\n    title: \"Quick Draw Showdown\",\r\n    description:\r\n      \"Test your reflexes in this Wild West quick-draw duel. Wait for the signal and be the fastest to draw your weapon. One shot, one chance!\",\r\n    image: \"/games/showdown.png\",\r\n    href: \"/games/showdown\",\r\n    category: \"Action\",\r\n    players: \"Single Player\",\r\n    difficulty: \"Hard\",\r\n  },\r\n  {\r\n    id: \"rock-paper-scissor\",\r\n    title: \"Rock Paper Scissors\",\r\n    description:\r\n      \"The classic hand game with a modern twist. Challenge the AI and see if you can outsmart it in this timeless battle of wits.\",\r\n    image: \"/games/rock-paper-scissor.png\",\r\n    href: \"/games/rock-paper-scissor\",\r\n    category: \"Casual\",\r\n    players: \"Single Player\",\r\n    difficulty: \"Easy\",\r\n  },\r\n  {\r\n    id: \"paaji\",\r\n    title: \"Paaji\",\r\n    description:\r\n      \"An exciting adventure game featuring unique mechanics and challenging gameplay. Explore, compete, and conquer in this thrilling experience!\",\r\n    image: \"/games/paaji.png\",\r\n    href: \"/games/paaji\",\r\n    category: \"Adventure\",\r\n    players: \"Single Player\",\r\n    difficulty: \"Medium\",\r\n  },\r\n];\r\n\r\nconst difficultyColors = {\r\n  Easy: \"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20\",\r\n  Medium:\r\n    \"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20\",\r\n  Hard: \"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20\",\r\n};\r\n\r\nconst categoryIcons = {\r\n  Sports: \"âš½\",\r\n  Action: \"âš¡\",\r\n  Casual: \"ðŸŽ®\",\r\n  Adventure: \"ðŸ—ºï¸\",\r\n};\r\n\r\nexport default function GamesPage() {\r\n  return (\r\n    <div className=\"min-h-screen bg-linear-to-b from-white via-purple-50/30 to-white dark:from-gray-950 dark:via-purple-950/20 dark:to-gray-950\">\r\n      {/* Animated Background */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-20 right-20 w-96 h-96 bg-purple-300/20 dark:bg-purple-500/10 rounded-full blur-3xl animate-pulse\" />\r\n        <div\r\n          className=\"absolute bottom-20 left-20 w-96 h-96 bg-pink-300/20 dark:bg-pink-500/10 rounded-full blur-3xl animate-pulse\"\r\n          style={{ animationDelay: \"1s\" }}\r\n        />\r\n        <div\r\n          className=\"absolute top-1/2 left-1/2 w-96 h-96 bg-blue-300/20 dark:bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\r\n          style={{ animationDelay: \"2s\" }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"relative container mx-auto px-4 py-12\">\r\n        {/* Header Section */}\r\n        <div className=\"mb-12 text-center space-y-6 opacity-0 animate-[fadeIn_1s_ease-out_forwards]\">\r\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-linear-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800\">\r\n            <Gamepad2 className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\r\n            <span className=\"text-sm font-medium text-purple-900 dark:text-purple-100\">\r\n              {games.length} Games Available\r\n            </span>\r\n          </div>\r\n\r\n          <h1 className=\"text-5xl sm:text-6xl font-black tracking-tight\">\r\n            <span className=\"block bg-linear-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400 bg-clip-text text-transparent bg-size-[200%_auto] animate-[gradient_8s_ease_infinite]\">\r\n              Games Arena\r\n            </span>\r\n          </h1>\r\n\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\r\n            Choose your adventure from our collection of exciting games\r\n          </p>\r\n        </div>\r\n\r\n        {/* Stats Bar */}\r\n        <div className=\"mb-12 grid grid-cols-2 md:grid-cols-4 gap-4 opacity-0 animate-[fadeIn_1s_ease-out_0.2s_forwards]\">\r\n          {[\r\n            {\r\n              icon: Star,\r\n              label: \"Featured\",\r\n              value: \"4\",\r\n              color: \"text-yellow-600 dark:text-yellow-400\",\r\n            },\r\n            {\r\n              icon: Users,\r\n              label: \"Multiplayer\",\r\n              value: \"1\",\r\n              color: \"text-blue-600 dark:text-blue-400\",\r\n            },\r\n            {\r\n              icon: Zap,\r\n              label: \"Action\",\r\n              value: \"1\",\r\n              color: \"text-purple-600 dark:text-purple-400\",\r\n            },\r\n            {\r\n              icon: TrendingUp,\r\n              label: \"Popular\",\r\n              value: \"4\",\r\n              color: \"text-pink-600 dark:text-pink-400\",\r\n            },\r\n          ].map((stat, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"bg-white/80 dark:bg-gray-900/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-200 dark:border-gray-800 hover:border-purple-300 dark:hover:border-purple-700 transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/10 hover:-translate-y-1\"\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-xl bg-linear-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30\">\r\n                  <stat.icon className={`w-5 h-5 ${stat.color}`} />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                    {stat.value}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                    {stat.label}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Games Grid */}\r\n        <section className=\"opacity-0 animate-[fadeIn_1s_ease-out_0.4s_forwards]\">\r\n          <div className=\"grid gap-8 sm:grid-cols-2 lg:grid-cols-2\">\r\n            {games.map((game, index) => (\r\n              <Link\r\n                key={game.id}\r\n                href={game.href}\r\n                className=\"group relative overflow-hidden rounded-3xl bg-white/80 dark:bg-gray-900/50 backdrop-blur-sm border-2 border-gray-200 dark:border-gray-800 shadow-lg transition-all duration-500 hover:shadow-2xl hover:shadow-purple-500/20 hover:border-purple-300 dark:hover:border-purple-700 hover:-translate-y-2\"\r\n                style={{ animationDelay: `${index * 0.1}s` }}\r\n              >\r\n                {/* Hover Gradient Overlay */}\r\n                <div className=\"absolute inset-0 bg-linear-to-br from-purple-500/10 via-pink-500/10 to-blue-500/10 opacity-0 transition-opacity duration-500 group-hover:opacity-100\" />\r\n\r\n                {/* Image Container */}\r\n                <div className=\"relative aspect-video overflow-hidden\">\r\n                  {/* Image Overlay Gradient */}\r\n                  <div className=\"absolute inset-0 bg-linear-to-t from-gray-900/90 via-gray-900/40 to-transparent z-10\" />\r\n\r\n                  {/* Category Badge on Image */}\r\n                  <div className=\"absolute top-4 left-4 z-20 flex gap-2\">\r\n                    <div className=\"px-3 py-1.5 rounded-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border border-gray-200 dark:border-gray-700 flex items-center gap-1.5\">\r\n                      <span className=\"text-lg\">\r\n                        {\r\n                          categoryIcons[\r\n                            game.category as keyof typeof categoryIcons\r\n                          ]\r\n                        }\r\n                      </span>\r\n                      <span className=\"text-xs font-semibold text-gray-900 dark:text-white\">\r\n                        {game.category}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Difficulty Badge on Image */}\r\n                  <div className=\"absolute top-4 right-4 z-20\">\r\n                    <Badge\r\n                      variant=\"outline\"\r\n                      className={`text-xs font-bold backdrop-blur-md ${\r\n                        difficultyColors[game.difficulty]\r\n                      }`}\r\n                    >\r\n                      {game.difficulty}\r\n                    </Badge>\r\n                  </div>\r\n\r\n                  <Image\r\n                    src={game.image}\r\n                    alt={game.title}\r\n                    fill\r\n                    className=\"object-cover transition-transform duration-700 group-hover:scale-110 group-hover:rotate-1\"\r\n                    sizes=\"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Content Container */}\r\n                <div className=\"relative p-6 space-y-4\">\r\n                  {/* Title with Icon */}\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <h3 className=\"text-2xl font-black text-gray-900 dark:text-white group-hover:text-transparent group-hover:bg-linear-to-r group-hover:from-purple-600 group-hover:to-pink-600 dark:group-hover:from-purple-400 dark:group-hover:to-pink-400 group-hover:bg-clip-text transition-all duration-300\">\r\n                      {game.title}\r\n                    </h3>\r\n                    <div className=\"p-2 rounded-xl bg-linear-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12\">\r\n                      <Gamepad2 className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Description */}\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 leading-relaxed\">\r\n                    {game.description}\r\n                  </p>\r\n\r\n                  {/* Meta Information */}\r\n                  <div className=\"flex items-center gap-2 pt-2\">\r\n                    <div className=\"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700\">\r\n                      <span className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">\r\n                        ðŸ‘¥ {game.players}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Play Button */}\r\n                  <Button className=\"w-full bg-linear-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg shadow-purple-500/30 group-hover:shadow-xl group-hover:shadow-purple-500/40 transition-all duration-300 text-base font-bold\">\r\n                    <span className=\"flex items-center justify-center gap-2\">\r\n                      Play Now\r\n                      <Gamepad2 className=\"w-5 h-5 transition-transform group-hover:scale-110\" />\r\n                    </span>\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Decorative Corner Accent */}\r\n                <div className=\"absolute -bottom-8 -right-8 w-32 h-32 bg-linear-to-br from-purple-500/20 to-pink-500/20 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </section>\r\n\r\n        {/* Empty State */}\r\n        {games.length === 0 && (\r\n          <div className=\"flex min-h-[500px] flex-col items-center justify-center rounded-3xl border-2 border-dashed border-gray-300 dark:border-gray-700 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm p-12 text-center\">\r\n            <div className=\"mb-6 rounded-full bg-linear-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 p-8 animate-pulse\">\r\n              <Gamepad2 className=\"h-16 w-16 text-purple-600 dark:text-purple-400\" />\r\n            </div>\r\n            <h3 className=\"mb-3 text-3xl font-black text-gray-900 dark:text-white\">\r\n              No Games Available Yet\r\n            </h3>\r\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-md\">\r\n              Our game collection is being prepared. Check back soon for\r\n              exciting new games!\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Bottom CTA */}\r\n        <div className=\"mt-16 text-center space-y-6 p-8 rounded-3xl bg-linear-to-r from-purple-600 via-pink-600 to-blue-600 shadow-2xl shadow-purple-500/30 opacity-0 animate-[fadeIn_1s_ease-out_0.6s_forwards]\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm mb-4\">\r\n            <Star className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h2 className=\"text-3xl font-black text-white\">\r\n            Can&apos;t find what you&apos;re looking for?\r\n          </h2>\r\n          <p className=\"text-lg text-purple-100 max-w-2xl mx-auto\">\r\n            Create your own custom game with our AI-powered game studio\r\n          </p>\r\n          <a href=\"/studio\">\r\n            <Button\r\n              size=\"lg\"\r\n              className=\"bg-white text-purple-600 hover:bg-gray-100 shadow-xl hover:shadow-2xl transition-all duration-300 text-base font-bold\"\r\n            >\r\n              <Zap className=\"w-5 h-5 mr-2\" />\r\n              Create with AI Studio\r\n            </Button>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\games\\page.tsx"
    },
    {
      "path": "app\\(protected)\\games\\rock-paper-scissor\\page.tsx",
      "content": "import RockPaperScissorsGame from \"@/components/games/rock-paper-scissor\";\r\n\r\nconst RockPaperScissor = () => {\r\n  return <RockPaperScissorsGame />;\r\n};\r\nexport default RockPaperScissor;\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\games\\rock-paper-scissor\\page.tsx"
    },
    {
      "path": "app\\(protected)\\games\\showdown\\page.tsx",
      "content": "import QuickDrawGame from \"@/components/games/showdown\";\r\n\r\nconst Showdown = () => {\r\n  return <QuickDrawGame />;\r\n};\r\n\r\nexport default Showdown;\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\games\\showdown\\page.tsx"
    },
    {
      "path": "app\\(protected)\\leaderboard\\page.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  Trophy,\r\n  Medal,\r\n  Award,\r\n  TrendingUp,\r\n  User,\r\n  Gamepad2,\r\n  Sword,\r\n  Zap,\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport { DataTable } from \"@/components/data-table/data-table\";\r\nimport { DataTableColumnHeader } from \"@/components/data-table/data-table-column-header\";\r\nimport { useDataTable } from \"@/hooks/use-data-table\";\r\nimport type { LeaderboardEntry } from \"@/lib/types/game-stats\";\r\n\r\ntype GameType = \"head-soccer\" | \"rock-paper-scissor\" | \"showdown\";\r\n\r\nconst gameNames: Record<GameType, string> = {\r\n  \"head-soccer\": \"Head Soccer\",\r\n  \"rock-paper-scissor\": \"Rock Paper Scissors\",\r\n  showdown: \"Quick Draw Showdown\",\r\n};\r\n\r\nconst gameIcons: Record<GameType, string> = {\r\n  \"head-soccer\": \"âš½\",\r\n  \"rock-paper-scissor\": \"âœ‚ï¸\",\r\n  showdown: \"ðŸ¤ \",\r\n};\r\n\r\nexport default function LeaderboardPage() {\r\n  const [selectedGame, setSelectedGame] = useState<GameType>(\"head-soccer\");\r\n\r\n  const { data, isLoading, error } = useQuery({\r\n    queryKey: [\"leaderboard\", selectedGame],\r\n    queryFn: () =>\r\n      client.leaderboard.get({\r\n        gameType: selectedGame,\r\n        limit: 100,\r\n      }),\r\n  });\r\n\r\n  const getRankIcon = (rank: number) => {\r\n    if (rank === 1) return <Trophy className=\"w-5 h-5 text-yellow-400\" />;\r\n    if (rank === 2) return <Medal className=\"w-5 h-5 text-gray-400\" />;\r\n    if (rank === 3) return <Award className=\"w-5 h-5 text-amber-600\" />;\r\n    return null;\r\n  };\r\n\r\n  const getRankBadgeVariant = (rank: number) => {\r\n    if (rank === 1) return \"default\";\r\n    if (rank === 2) return \"secondary\";\r\n    if (rank === 3) return \"outline\";\r\n    return \"outline\";\r\n  };\r\n\r\n  const columns = useMemo<ColumnDef<LeaderboardEntry>[]>(\r\n    () => [\r\n      {\r\n        id: \"rank\",\r\n        accessorKey: \"rank\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Rank\" />\r\n        ),\r\n        cell: ({ row }) => {\r\n          const rank = row.getValue(\"rank\") as number;\r\n          return (\r\n            <div className=\"flex items-center gap-2\">\r\n              {getRankIcon(rank)}\r\n              <Badge\r\n                variant={getRankBadgeVariant(rank)}\r\n                className=\"font-mono font-bold min-w-12 justify-center\"\r\n              >\r\n                #{rank}\r\n              </Badge>\r\n            </div>\r\n          );\r\n        },\r\n        enableSorting: true,\r\n        enableHiding: false,\r\n      },\r\n      {\r\n        id: \"player\",\r\n        accessorFn: (row) => row.userName || `Player ${row.userId.slice(0, 8)}`,\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Player\" />\r\n        ),\r\n        cell: ({ row }) => {\r\n          const userName = row.original.userName;\r\n          const userId = row.original.userId;\r\n          return (\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-full bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\r\n                <User className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex flex-col\">\r\n                <span className=\"font-semibold\">\r\n                  {userName || `Player ${userId.slice(0, 8)}`}\r\n                </span>\r\n                {userName && (\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    ID: {userId.slice(0, 8)}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        },\r\n        enableSorting: true,\r\n      },\r\n      {\r\n        id: \"playerWins\",\r\n        accessorKey: \"playerWins\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Wins\" />\r\n        ),\r\n        cell: ({ row }) => (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Sword className=\"w-4 h-4 text-green-500\" />\r\n            <span className=\"font-bold text-green-400\">\r\n              {row.getValue(\"playerWins\")}\r\n            </span>\r\n          </div>\r\n        ),\r\n        enableSorting: true,\r\n      },\r\n      {\r\n        id: \"aiWins\",\r\n        accessorKey: \"aiWins\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Losses\" />\r\n        ),\r\n        cell: ({ row }) => (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Zap className=\"w-4 h-4 text-red-500\" />\r\n            <span className=\"font-bold text-red-400\">\r\n              {row.getValue(\"aiWins\")}\r\n            </span>\r\n          </div>\r\n        ),\r\n        enableSorting: true,\r\n      },\r\n      {\r\n        id: \"ties\",\r\n        accessorKey: \"ties\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Ties\" />\r\n        ),\r\n        cell: ({ row }) => (\r\n          <span className=\"font-medium text-muted-foreground\">\r\n            {row.getValue(\"ties\") || 0}\r\n          </span>\r\n        ),\r\n        enableSorting: true,\r\n      },\r\n      {\r\n        id: \"totalPlays\",\r\n        accessorKey: \"totalPlays\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Total Plays\" />\r\n        ),\r\n        cell: ({ row }) => (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Gamepad2 className=\"w-4 h-4 text-blue-500\" />\r\n            <span className=\"font-medium\">{row.getValue(\"totalPlays\")}</span>\r\n          </div>\r\n        ),\r\n        enableSorting: true,\r\n      },\r\n      {\r\n        id: \"winRate\",\r\n        accessorKey: \"winRate\",\r\n        header: ({ column }) => (\r\n          <DataTableColumnHeader column={column} label=\"Win Rate\" />\r\n        ),\r\n        cell: ({ row }) => {\r\n          const winRate = row.getValue(\"winRate\") as number;\r\n          const getWinRateColor = (rate: number) => {\r\n            if (rate >= 70) return \"text-green-400\";\r\n            if (rate >= 50) return \"text-yellow-400\";\r\n            return \"text-red-400\";\r\n          };\r\n          return (\r\n            <div className=\"flex items-center gap-2\">\r\n              <TrendingUp className=\"w-4 h-4 text-blue-500\" />\r\n              <span className={`font-bold ${getWinRateColor(winRate)}`}>\r\n                {winRate}%\r\n              </span>\r\n            </div>\r\n          );\r\n        },\r\n        enableSorting: true,\r\n      },\r\n    ],\r\n    []\r\n  );\r\n\r\n  const { table } = useDataTable<LeaderboardEntry>({\r\n    data: data?.leaderboard ?? [],\r\n    columns,\r\n    pageCount: 1,\r\n    initialState: {\r\n      sorting: [{ id: \"rank\", desc: false }],\r\n      pagination: { pageIndex: 0, pageSize: 20 },\r\n    },\r\n    getRowId: (row) => row.userId,\r\n  });\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 md:p-8 space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"text-center space-y-4\">\r\n        <div className=\"flex items-center justify-center gap-3\">\r\n          <Trophy className=\"w-12 h-12 text-yellow-400\" />\r\n          <h1 className=\"text-4xl md:text-5xl font-black bg-linear-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent\">\r\n            GLOBAL LEADERBOARD\r\n          </h1>\r\n          <Trophy className=\"w-12 h-12 text-yellow-400\" />\r\n        </div>\r\n        <p className=\"text-muted-foreground text-lg\">\r\n          Compete with players worldwide and climb to the top!\r\n        </p>\r\n      </div>\r\n\r\n      {/* Game Selection */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        {(Object.keys(gameNames) as GameType[]).map((game) => (\r\n          <Button\r\n            key={game}\r\n            onClick={() => setSelectedGame(game)}\r\n            variant={selectedGame === game ? \"default\" : \"outline\"}\r\n            size=\"lg\"\r\n            className=\"h-auto py-6\"\r\n          >\r\n            <div className=\"text-center w-full space-y-2\">\r\n              <div className=\"text-4xl\">{gameIcons[game]}</div>\r\n              <div className=\"font-bold text-base\">{gameNames[game]}</div>\r\n            </div>\r\n          </Button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Your Rank Card */}\r\n      {data?.userRank && (\r\n        <Card className=\"p-6 bg-linear-to-r from-blue-500/10 to-purple-500/10 border-blue-500/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"w-16 h-16 rounded-full bg-linear-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\r\n                <User className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Your Global Rank\r\n                </p>\r\n                <p className=\"text-4xl font-black text-blue-400\">\r\n                  #{data.userRank}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <TrendingUp className=\"w-16 h-16 text-blue-400 opacity-50\" />\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {isLoading && (\r\n        <Card className=\"p-12\">\r\n          <div className=\"text-center space-y-4 animate-pulse\">\r\n            <Gamepad2 className=\"w-16 h-16 mx-auto text-muted-foreground\" />\r\n            <p className=\"text-xl text-muted-foreground\">\r\n              Loading leaderboard...\r\n            </p>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Error State */}\r\n      {error && (\r\n        <Card className=\"p-12 border-destructive/50 bg-destructive/10\">\r\n          <div className=\"text-center space-y-4\">\r\n            <div className=\"text-6xl\">âŒ</div>\r\n            <p className=\"text-xl text-destructive font-semibold\">\r\n              Failed to load leaderboard\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {error instanceof Error ? error.message : \"Unknown error\"}\r\n            </p>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Leaderboard Table */}\r\n      {data && !isLoading && (\r\n        <>\r\n          {data.leaderboard.length === 0 ? (\r\n            <Card className=\"p-12\">\r\n              <div className=\"text-center space-y-4\">\r\n                <div className=\"text-6xl\">ðŸŽ®</div>\r\n                <p className=\"text-2xl font-bold\">No players yet!</p>\r\n                <p className=\"text-muted-foreground\">\r\n                  Be the first to play {gameNames[selectedGame]} and claim the\r\n                  top spot!\r\n                </p>\r\n                <Link href=\"/games\" className=\"inline-block mt-6\">\r\n                  <Button size=\"lg\" className=\"font-bold\">\r\n                    <Gamepad2 className=\"w-5 h-5 mr-2\" />\r\n                    Start Playing\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              <Card className=\"p-6\">\r\n                <DataTable table={table} />\r\n              </Card>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\(protected)\\leaderboard\\page.tsx"
    },
    {
      "path": "app\\(protected)\\profile\\page.tsx",
      "content": "import { auth } from \"@/lib/auth\";\r\nimport { headers } from \"next/headers\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { ProfileView } from \"@/components/profile/profile-view\";\r\n\r\nexport const metadata = {\r\n  title: \"Profile | Game Aggregator\",\r\n  description: \"Manage your profile and account settings\",\r\n};\r\n\r\nexport default async function ProfilePage() {\r\n  const session = await auth.api.getSession({\r\n    headers: await headers(),\r\n  });\r\n\r\n  if (!session) {\r\n    redirect(\"/sign-in\");\r\n  }\r\n\r\n  return (\r\n    <ProfileView\r\n      user={{\r\n        id: session.user.id,\r\n        name: session.user.name,\r\n        email: session.user.email,\r\n        image: session.user.image,\r\n        role: session.user.role ?? undefined,\r\n        emailVerified: session.user.emailVerified,\r\n        createdAt: session.user.createdAt,\r\n        banned: session.user.banned ?? undefined,\r\n      }}\r\n    />\r\n  );\r\n}",
      "type": "registry:page",
      "target": "app\\(protected)\\profile\\page.tsx"
    },
    {
      "path": "app\\api\\auth\\[...all]\\route.ts",
      "content": "import { auth } from \"@/lib/auth\";\r\nimport { toNextJsHandler } from \"better-auth/next-js\";\r\n\r\nexport const { GET, POST } = toNextJsHandler(auth.handler);\r\n",
      "type": "registry:block",
      "target": "app\\api\\auth\\[...all]\\route.ts"
    },
    {
      "path": "app\\api\\openapi\\route.ts",
      "content": "import { OpenAPIGenerator } from \"@orpc/openapi\";\r\nimport { ZodToJsonSchemaConverter } from \"@orpc/zod/zod4\";\r\nimport { router } from \"@/lib/router\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport const dynamic = \"force-static\";\r\n\r\nexport async function GET() {\r\n  const generator = new OpenAPIGenerator({\r\n    schemaConverters: [new ZodToJsonSchemaConverter()],\r\n  });\r\n\r\n  const spec = await generator.generate(router, {\r\n    info: {\r\n      title: \"Algorand Game Aggregator API\",\r\n      version: \"1.0.0\",\r\n      description:\r\n        \"API for Algorand Game Aggregator - handle game data aggregation, user management, and transaction processing\",\r\n    },\r\n    servers: [\r\n      {\r\n        url: \"/rpc\",\r\n        description: \"RPC endpoint\",\r\n      },\r\n    ],\r\n  });\r\n\r\n  return NextResponse.json(spec, {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n}\r\n",
      "type": "registry:block",
      "target": "app\\api\\openapi\\route.ts"
    },
    {
      "path": "app\\api\\route.ts",
      "content": "import { ApiReference } from \"@scalar/nextjs-api-reference\";\r\n\r\nexport const GET = ApiReference({\r\n  url: \"/api/openapi\",\r\n});\r\n",
      "type": "registry:block",
      "target": "app\\api\\route.ts"
    },
    {
      "path": "app\\globals.css",
      "content": "@import \"tailwindcss\";\r\n@import \"tw-animate-css\";\r\n\r\n@custom-variant dark (&:is(.dark *));\r\n\r\n@theme inline {\r\n  --color-background: var(--background);\r\n  --color-foreground: var(--foreground);\r\n  --font-sans: var(--font-geist-sans);\r\n  --font-mono: var(--font-geist-mono);\r\n  --color-sidebar-ring: var(--sidebar-ring);\r\n  --color-sidebar-border: var(--sidebar-border);\r\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\r\n  --color-sidebar-accent: var(--sidebar-accent);\r\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\r\n  --color-sidebar-primary: var(--sidebar-primary);\r\n  --color-sidebar-foreground: var(--sidebar-foreground);\r\n  --color-sidebar: var(--sidebar);\r\n  --color-chart-5: var(--chart-5);\r\n  --color-chart-4: var(--chart-4);\r\n  --color-chart-3: var(--chart-3);\r\n  --color-chart-2: var(--chart-2);\r\n  --color-chart-1: var(--chart-1);\r\n  --color-ring: var(--ring);\r\n  --color-input: var(--input);\r\n  --color-border: var(--border);\r\n  --color-destructive: var(--destructive);\r\n  --color-accent-foreground: var(--accent-foreground);\r\n  --color-accent: var(--accent);\r\n  --color-muted-foreground: var(--muted-foreground);\r\n  --color-muted: var(--muted);\r\n  --color-secondary-foreground: var(--secondary-foreground);\r\n  --color-secondary: var(--secondary);\r\n  --color-primary-foreground: var(--primary-foreground);\r\n  --color-primary: var(--primary);\r\n  --color-popover-foreground: var(--popover-foreground);\r\n  --color-popover: var(--popover);\r\n  --color-card-foreground: var(--card-foreground);\r\n  --color-card: var(--card);\r\n  --radius-sm: calc(var(--radius) - 4px);\r\n  --radius-md: calc(var(--radius) - 2px);\r\n  --radius-lg: var(--radius);\r\n  --radius-xl: calc(var(--radius) + 4px);\r\n}\r\n\r\n:root {\r\n  --radius: 0.625rem;\r\n  --background: oklch(1 0 0);\r\n  --foreground: oklch(0.141 0.005 285.823);\r\n  --card: oklch(1 0 0);\r\n  --card-foreground: oklch(0.141 0.005 285.823);\r\n  --popover: oklch(1 0 0);\r\n  --popover-foreground: oklch(0.141 0.005 285.823);\r\n  --primary: oklch(0.21 0.006 285.885);\r\n  --primary-foreground: oklch(0.985 0 0);\r\n  --secondary: oklch(0.967 0.001 286.375);\r\n  --secondary-foreground: oklch(0.21 0.006 285.885);\r\n  --muted: oklch(0.967 0.001 286.375);\r\n  --muted-foreground: oklch(0.552 0.016 285.938);\r\n  --accent: oklch(0.967 0.001 286.375);\r\n  --accent-foreground: oklch(0.21 0.006 285.885);\r\n  --destructive: oklch(0.577 0.245 27.325);\r\n  --border: oklch(0.92 0.004 286.32);\r\n  --input: oklch(0.92 0.004 286.32);\r\n  --ring: oklch(0.705 0.015 286.067);\r\n  --chart-1: oklch(0.646 0.222 41.116);\r\n  --chart-2: oklch(0.6 0.118 184.704);\r\n  --chart-3: oklch(0.398 0.07 227.392);\r\n  --chart-4: oklch(0.828 0.189 84.429);\r\n  --chart-5: oklch(0.769 0.188 70.08);\r\n  --sidebar: hsl(0 0% 98%);\r\n  --sidebar-foreground: hsl(240 5.3% 26.1%);\r\n  --sidebar-primary: hsl(240 5.9% 10%);\r\n  --sidebar-primary-foreground: hsl(0 0% 98%);\r\n  --sidebar-accent: hsl(240 4.8% 95.9%);\r\n  --sidebar-accent-foreground: hsl(240 5.9% 10%);\r\n  --sidebar-border: hsl(220 13% 91%);\r\n  --sidebar-ring: hsl(217.2 91.2% 59.8%);\r\n}\r\n\r\n.dark {\r\n  --background: oklch(0.141 0.005 285.823);\r\n  --foreground: oklch(0.985 0 0);\r\n  --card: oklch(0.21 0.006 285.885);\r\n  --card-foreground: oklch(0.985 0 0);\r\n  --popover: oklch(0.21 0.006 285.885);\r\n  --popover-foreground: oklch(0.985 0 0);\r\n  --primary: oklch(0.92 0.004 286.32);\r\n  --primary-foreground: oklch(0.21 0.006 285.885);\r\n  --secondary: oklch(0.274 0.006 286.033);\r\n  --secondary-foreground: oklch(0.985 0 0);\r\n  --muted: oklch(0.274 0.006 286.033);\r\n  --muted-foreground: oklch(0.705 0.015 286.067);\r\n  --accent: oklch(0.274 0.006 286.033);\r\n  --accent-foreground: oklch(0.985 0 0);\r\n  --destructive: oklch(0.704 0.191 22.216);\r\n  --border: oklch(1 0 0 / 10%);\r\n  --input: oklch(1 0 0 / 15%);\r\n  --ring: oklch(0.552 0.016 285.938);\r\n  --chart-1: oklch(0.488 0.243 264.376);\r\n  --chart-2: oklch(0.696 0.17 162.48);\r\n  --chart-3: oklch(0.769 0.188 70.08);\r\n  --chart-4: oklch(0.627 0.265 303.9);\r\n  --chart-5: oklch(0.645 0.246 16.439);\r\n  --sidebar: hsl(240 5.9% 10%);\r\n  --sidebar-foreground: hsl(240 4.8% 95.9%);\r\n  --sidebar-primary: hsl(224.3 76.3% 48%);\r\n  --sidebar-primary-foreground: hsl(0 0% 100%);\r\n  --sidebar-accent: hsl(240 3.7% 15.9%);\r\n  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);\r\n  --sidebar-border: hsl(240 3.7% 15.9%);\r\n  --sidebar-ring: hsl(217.2 91.2% 59.8%);\r\n}\r\n\r\n@layer base {\r\n  * {\r\n    @apply border-border outline-ring/50;\r\n  }\r\n  body {\r\n    @apply bg-background text-foreground;\r\n  }\r\n}\r\n\r\n:root {\r\n  /* disable scroll bar */\r\n  scrollbar-width: none;\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n}\r\n\r\n::view-transition-old(root),\r\n::view-transition-new(root) {\r\n  animation: none;\r\n  mix-blend-mode: normal;\r\n}\r\n\r\n/* Custom animations for AI page */\r\n\r\n@keyframes float-delayed {\r\n  0%,\r\n  100% {\r\n    transform: translateY(0px);\r\n  }\r\n  50% {\r\n    transform: translateY(-15px);\r\n  }\r\n}\r\n\r\n@keyframes gradient-xy {\r\n  0%,\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n}\r\n\r\n@keyframes gradient {\r\n  0%,\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n}\r\n\r\n@keyframes float {\r\n  0%,\r\n  100% {\r\n    transform: translateY(0px) rotate(0deg);\r\n  }\r\n  33% {\r\n    transform: translateY(-20px) rotate(2deg);\r\n  }\r\n  66% {\r\n    transform: translateY(-10px) rotate(-2deg);\r\n  }\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.animate-gradient {\r\n  background-size: 200% 200%;\r\n  animation: gradient 3s ease infinite;\r\n}\r\n\r\n.animate-float {\r\n  animation: float 6s ease-in-out infinite;\r\n}\r\n\r\n.animate-float-delayed {\r\n  animation: float-delayed 8s ease-in-out infinite;\r\n  animation-delay: 1s;\r\n}\r\n\r\n.animate-gradient-xy {\r\n  background-size: 400% 400%;\r\n  animation: gradient-xy 15s ease infinite;\r\n}\r\n",
      "type": "registry:block",
      "target": "app\\globals.css"
    },
    {
      "path": "app\\layout.tsx",
      "content": "import type { Metadata } from \"next\";\r\nimport { Geist, Geist_Mono } from \"next/font/google\";\r\nimport { Providers } from \"@/components/providers\";\r\nimport { Toaster } from \"@/components/ui/sonner\";\r\nimport \"@/lib/orpc.server\"; // for pre-rendering\r\nimport \"./globals.css\";\r\nimport AppLayout from \"@/components/layout\";\r\n\r\nconst geistSans = Geist({\r\n  variable: \"--font-geist-sans\",\r\n  subsets: [\"latin\"],\r\n});\r\n\r\nconst geistMono = Geist_Mono({\r\n  variable: \"--font-geist-mono\",\r\n  subsets: [\"latin\"],\r\n});\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Create Next App\",\r\n  description: \"Generated by create next app\",\r\n};\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: Readonly<{\r\n  children: React.ReactNode;\r\n}>) {\r\n  return (\r\n    <html lang=\"en\">\r\n      <body\r\n        className={`${geistSans.variable} ${geistMono.variable} antialiased`}\r\n      >\r\n        <Providers>\r\n          <AppLayout>{children}</AppLayout>\r\n        </Providers>\r\n        <Toaster />\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "app\\layout.tsx"
    },
    {
      "path": "app\\page.tsx",
      "content": "\"use client\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  Sparkles,\r\n  Gamepad2,\r\n  Trophy,\r\n  Users,\r\n  Rocket,\r\n  Zap,\r\n  Star,\r\n  ArrowRight,\r\n  Play,\r\n  Code,\r\n  Globe,\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function Home() {\r\n  const { data: stats } = useQuery({\r\n    queryKey: [\"platform-stats\"],\r\n    queryFn: async () => {\r\n      const result = await client.stats.platform({});\r\n      return result;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-linear-to-b from-white via-purple-50/30 to-white dark:from-gray-950 dark:via-purple-950/20 dark:to-gray-950\">\r\n      {/* Animated Background Elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-20 left-10 w-72 h-72 bg-purple-300/20 dark:bg-purple-500/10 rounded-full blur-3xl animate-pulse\" />\r\n        <div\r\n          className=\"absolute top-40 right-20 w-96 h-96 bg-blue-300/20 dark:bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\r\n          style={{ animationDelay: \"1s\" }}\r\n        />\r\n        <div\r\n          className=\"absolute bottom-20 left-1/3 w-80 h-80 bg-pink-300/20 dark:bg-pink-500/10 rounded-full blur-3xl animate-pulse\"\r\n          style={{ animationDelay: \"2s\" }}\r\n        />\r\n      </div>\r\n\r\n      {/* Hero Section */}\r\n      <section className=\"relative px-4 pt-20 pb-32 sm:px-6 lg:px-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\r\n            {/* Left Column - Hero Text */}\r\n            <div className=\"space-y-8 opacity-0 animate-[fadeIn_1s_ease-out_forwards]\">\r\n              <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-linear-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800\">\r\n                <Sparkles className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\r\n                <span className=\"text-sm font-medium text-purple-900 dark:text-purple-100\">\r\n                  AI-Powered Game Creation\r\n                </span>\r\n              </div>\r\n\r\n              <h1 className=\"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight\">\r\n                <span className=\"block text-gray-900 dark:text-white\">\r\n                  Welcome to{\" \"}\r\n                </span>\r\n                <span className=\"block bg-linear-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400 bg-clip-text text-transparent bg-size-[200%_auto] animate-[gradient_8s_ease_infinite]\">\r\n                  Algo Arcade\r\n                </span>\r\n              </h1>\r\n\r\n              <p className=\"text-xl text-gray-600 dark:text-gray-300 leading-relaxed max-w-xl\">\r\n                Play exciting games, create your own with AI, and share them\r\n                with the world. The future of gaming is here, and it&apos;s\r\n                powered by your imagination.\r\n              </p>\r\n\r\n              <div className=\"flex flex-wrap gap-4\">\r\n                <Link href=\"/arcade\">\r\n                  <Button\r\n                    size=\"lg\"\r\n                    className=\"group bg-linear-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transition-all duration-300\"\r\n                  >\r\n                    <Play className=\"w-5 h-5 mr-2 transition-transform group-hover:scale-110\" />\r\n                    Play Games\r\n                    <ArrowRight className=\"w-5 h-5 ml-2 transition-transform group-hover:translate-x-1\" />\r\n                  </Button>\r\n                </Link>\r\n                <Link href=\"/ai\">\r\n                  <Button\r\n                    size=\"lg\"\r\n                    variant=\"outline\"\r\n                    className=\"group border-2 border-purple-200 dark:border-purple-800 hover:border-purple-400 dark:hover:border-purple-600 hover:bg-purple-50 dark:hover:bg-purple-950/50 transition-all duration-300\"\r\n                  >\r\n                    <Sparkles className=\"w-5 h-5 mr-2 transition-transform group-hover:rotate-12\" />\r\n                    Create with AI\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n\r\n              {/* Quick Stats */}\r\n              <div className=\"grid grid-cols-3 gap-4 pt-8\">\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Users className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\r\n                    <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                      {stats?.totalUsers.toLocaleString() || \"0\"}\r\n                    </p>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    Players\r\n                  </p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Gamepad2 className=\"w-4 h-4 text-pink-600 dark:text-pink-400\" />\r\n                    <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                      {stats?.totalGamesGenerated.toLocaleString() || \"0\"}\r\n                    </p>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    Games Created\r\n                  </p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Zap className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\r\n                    <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                      {stats?.totalPlays.toLocaleString() || \"0\"}\r\n                    </p>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    Total Plays\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Right Column - 3D Visual Element */}\r\n            <div className=\"relative lg:h-[600px] flex items-center justify-center\">\r\n              <div className=\"relative w-full max-w-lg aspect-square\">\r\n                {/* Floating Cards */}\r\n                <div className=\"absolute inset-0 animate-[float_6s_ease-in-out_infinite]\">\r\n                  <Card className=\"absolute top-0 right-0 w-48 bg-linear-to-br from-purple-500 to-pink-500 border-0 shadow-2xl shadow-purple-500/50 rotate-6 hover:rotate-12 transition-transform duration-500\">\r\n                    <CardContent className=\"p-6 text-white\">\r\n                      <Gamepad2 className=\"w-12 h-12 mb-3\" />\r\n                      <h3 className=\"font-bold text-lg\">Instant Play</h3>\r\n                      <p className=\"text-sm text-purple-100\">\r\n                        Jump into action\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card\r\n                    className=\"absolute top-1/4 left-0 w-48 bg-linear-to-br from-blue-500 to-cyan-500 border-0 shadow-2xl shadow-blue-500/50 -rotate-6 hover:-rotate-12 transition-transform duration-500\"\r\n                    style={{ animationDelay: \"150ms\" }}\r\n                  >\r\n                    <CardContent className=\"p-6 text-white\">\r\n                      <Code className=\"w-12 h-12 mb-3\" />\r\n                      <h3 className=\"font-bold text-lg\">AI Studio</h3>\r\n                      <p className=\"text-sm text-blue-100\">Create with ease</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card\r\n                    className=\"absolute bottom-1/4 right-1/4 w-48 bg-linear-to-br from-pink-500 to-orange-500 border-0 shadow-2xl shadow-pink-500/50 rotate-3 hover:rotate-6 transition-transform duration-500\"\r\n                    style={{ animationDelay: \"300ms\" }}\r\n                  >\r\n                    <CardContent className=\"p-6 text-white\">\r\n                      <Trophy className=\"w-12 h-12 mb-3\" />\r\n                      <h3 className=\"font-bold text-lg\">Compete</h3>\r\n                      <p className=\"text-sm text-pink-100\">Climb the ranks</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card\r\n                    className=\"absolute bottom-0 left-1/4 w-48 bg-linear-to-br from-green-500 to-emerald-500 border-0 shadow-2xl shadow-green-500/50 -rotate-3 hover:-rotate-6 transition-transform duration-500\"\r\n                    style={{ animationDelay: \"450ms\" }}\r\n                  >\r\n                    <CardContent className=\"p-6 text-white\">\r\n                      <Globe className=\"w-12 h-12 mb-3\" />\r\n                      <h3 className=\"font-bold text-lg\">Share</h3>\r\n                      <p className=\"text-sm text-green-100\">Global community</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Center Glow */}\r\n                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                  <div className=\"w-64 h-64 bg-linear-to-r from-purple-500/30 via-pink-500/30 to-blue-500/30 dark:from-purple-500/20 dark:via-pink-500/20 dark:to-blue-500/20 rounded-full blur-3xl animate-pulse\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Features Section */}\r\n      <section className=\"relative px-4 py-24 sm:px-6 lg:px-8 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"text-center space-y-4 mb-16\">\r\n            <Badge\r\n              variant=\"outline\"\r\n              className=\"px-4 py-1 text-sm font-semibold border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300\"\r\n            >\r\n              Features\r\n            </Badge>\r\n            <h2 className=\"text-4xl sm:text-5xl font-black text-gray-900 dark:text-white\">\r\n              Everything You Need\r\n            </h2>\r\n            <p className=\"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\r\n              From playing to creating, we&apos;ve got you covered with\r\n              cutting-edge features\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n            {[\r\n              {\r\n                icon: Trophy,\r\n                title: \"Leaderboards\",\r\n                description:\r\n                  \"Compete globally and track your progress across all games\",\r\n                bg: \"bg-yellow-50 dark:bg-yellow-950/20\",\r\n                iconColor: \"text-yellow-600 dark:text-yellow-400\",\r\n              },\r\n              {\r\n                icon: Rocket,\r\n                title: \"Instant Publishing\",\r\n                description:\r\n                  \"One-click publishing to share your games with the community\",\r\n                bg: \"bg-blue-50 dark:bg-blue-950/20\",\r\n                iconColor: \"text-blue-600 dark:text-blue-400\",\r\n              },\r\n              {\r\n                icon: Zap,\r\n                title: \"Real-time Stats\",\r\n                description:\r\n                  \"Track your performance and game analytics in real-time\",\r\n                bg: \"bg-purple-50 dark:bg-purple-950/20\",\r\n                iconColor: \"text-purple-600 dark:text-purple-400\",\r\n              },\r\n              {\r\n                icon: Sparkles,\r\n                title: \"AI-Powered Creation\",\r\n                description:\r\n                  \"Generate unique games with advanced AI technology\",\r\n                bg: \"bg-pink-50 dark:bg-pink-950/20\",\r\n                iconColor: \"text-pink-600 dark:text-pink-400\",\r\n              },\r\n              {\r\n                icon: Users,\r\n                title: \"Community Driven\",\r\n                description:\r\n                  \"Connect with creators and players from around the world\",\r\n                bg: \"bg-green-50 dark:bg-green-950/20\",\r\n                iconColor: \"text-green-600 dark:text-green-400\",\r\n              },\r\n              {\r\n                icon: Star,\r\n                title: \"Premium Quality\",\r\n                description:\r\n                  \"High-quality games with stunning graphics and smooth gameplay\",\r\n                bg: \"bg-indigo-50 dark:bg-indigo-950/20\",\r\n                iconColor: \"text-indigo-600 dark:text-indigo-400\",\r\n              },\r\n            ].map((feature, index) => (\r\n              <Card\r\n                key={index}\r\n                className=\"group relative overflow-hidden border-2 hover:border-purple-300 dark:hover:border-purple-700 transition-all duration-300 hover:shadow-2xl hover:shadow-purple-500/20 hover:-translate-y-2\"\r\n              >\r\n                <div className=\"absolute inset-0 bg-linear-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300 from-purple-500/5 to-pink-500/5 dark:from-purple-500/10 dark:to-pink-500/10\" />\r\n                <CardContent className=\"p-8 relative\">\r\n                  <div\r\n                    className={`w-16 h-16 rounded-2xl ${feature.bg} flex items-center justify-center mb-6 transition-transform duration-300 group-hover:scale-110`}\r\n                  >\r\n                    <feature.icon className={`w-8 h-8 ${feature.iconColor}`} />\r\n                  </div>\r\n                  <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3\">\r\n                    {feature.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed\">\r\n                    {feature.description}\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app\\page.tsx"
    },
    {
      "path": "app\\rpc\\[[...rest]]\\route.ts",
      "content": "import { RPCHandler } from \"@orpc/server/fetch\";\r\nimport { OpenAPIHandler } from \"@orpc/openapi/fetch\";\r\nimport { onError } from \"@orpc/server\";\r\nimport { router } from \"@/lib/router\";\r\n\r\nconst rpcHandler = new RPCHandler(router, {\r\n  interceptors: [\r\n    onError((error) => {\r\n      console.error(error);\r\n    }),\r\n  ],\r\n});\r\n\r\nconst openAPIHandler = new OpenAPIHandler(router, {\r\n  interceptors: [\r\n    onError((error) => {\r\n      console.error(error);\r\n    }),\r\n  ],\r\n});\r\n\r\nasync function handleRequest(request: Request) {\r\n  // Check if this is an RPC client request (has {json: {...}} wrapped body)\r\n  let isRpcClient = false;\r\n\r\n  if (request.method === \"POST\" || request.method === \"PUT\" || request.method === \"PATCH\") {\r\n    const clonedRequest = request.clone();\r\n    try {\r\n      const bodyText = await clonedRequest.text();\r\n      try {\r\n        const bodyJson = JSON.parse(bodyText);\r\n        if (bodyJson.json && typeof bodyJson.json === 'object') {\r\n          isRpcClient = true;\r\n        }\r\n      } catch (parseError) {\r\n        // Not JSON or doesn't have json wrapper\r\n      }\r\n    } catch (e) {\r\n      // Could not read body\r\n    }\r\n  }\r\n\r\n  // If this is from RPC client, use RPC handler which handles the format correctly\r\n  if (isRpcClient) {\r\n    const rpcResult = await rpcHandler.handle(request, {\r\n      prefix: \"/rpc\",\r\n      context: {},\r\n    });\r\n\r\n    if (rpcResult.response) {\r\n      return rpcResult.response;\r\n    }\r\n  }\r\n\r\n  // Otherwise, try OpenAPI handler first (for direct REST API calls)\r\n  const openAPIResult = await openAPIHandler.handle(request, {\r\n    prefix: \"/rpc\",\r\n    context: {},\r\n  });\r\n\r\n  if (openAPIResult.response) {\r\n    return openAPIResult.response;\r\n  }\r\n\r\n  // Final fallback to RPC handler\r\n  const rpcResult = await rpcHandler.handle(request, {\r\n    prefix: \"/rpc\",\r\n    context: {},\r\n  });\r\n\r\n  return rpcResult.response ?? new Response(\"Not found\", { status: 404 });\r\n}\r\n\r\nexport const HEAD = handleRequest;\r\nexport const GET = handleRequest;\r\nexport const POST = handleRequest;\r\nexport const PUT = handleRequest;\r\nexport const PATCH = handleRequest;\r\nexport const DELETE = handleRequest;\r\n",
      "type": "registry:block",
      "target": "app\\rpc\\[[...rest]]\\route.ts"
    },
    {
      "path": "components\\admin\\admin-header.tsx",
      "content": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Shield, ArrowLeft } from \"lucide-react\";\r\nimport { SignOutButton } from \"@/components/auth/sign-out-button\";\r\nimport type { Session } from \"@/lib/auth\";\r\n\r\ninterface AdminHeaderProps {\r\n  session: Session;\r\n}\r\n\r\nexport function AdminHeader({ session }: AdminHeaderProps) {\r\n  return (\r\n    <div className=\"border-b border-zinc-800 bg-zinc-950/50 backdrop-blur-sm\">\r\n      <div className=\"container mx-auto flex h-16 items-center justify-between px-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Link href=\"/dashboard\">\r\n            <Button variant=\"ghost\" size=\"sm\">\r\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n              Back to Dashboard\r\n            </Button>\r\n          </Link>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Shield className=\"h-6 w-6 text-amber-500\" />\r\n            <h1 className=\"text-xl font-bold text-white\">Admin Panel</h1>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"text-right\">\r\n            <p className=\"text-sm font-medium text-white\">{session.user.name}</p>\r\n            <p className=\"text-xs text-zinc-400\">{session.user.role}</p>\r\n          </div>\r\n          <SignOutButton />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\admin\\admin-header.tsx"
    },
    {
      "path": "components\\admin\\user-actions.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  MoreHorizontal,\r\n  Shield,\r\n  Ban,\r\n  Unlock,\r\n  Trash2,\r\n  User,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string | null;\r\n  email: string;\r\n  role: string;\r\n  banned: boolean;\r\n  banReason?: string | null;\r\n  banExpires?: Date | null;\r\n  createdAt?: Date | null;\r\n}\r\n\r\ninterface UserActionsProps {\r\n  user: User;\r\n  onUpdate: () => void;\r\n}\r\n\r\nexport function UserActions({ user, onUpdate }: UserActionsProps) {\r\n  const [roleDialogOpen, setRoleDialogOpen] = useState(false);\r\n  const [banDialogOpen, setBanDialogOpen] = useState(false);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [selectedRole, setSelectedRole] = useState(user.role || \"user\");\r\n  const [banReason, setBanReason] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleRoleChange = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Type assertion needed because Better Auth types don't include custom adminRoles\r\n      await authClient.admin.setRole({\r\n        userId: user.id,\r\n        role: selectedRole as \"user\" | \"admin\",\r\n      });\r\n      toast.success(`Role updated to ${selectedRole}`);\r\n      setRoleDialogOpen(false);\r\n      onUpdate();\r\n    } catch (error) {\r\n      toast.error(\"Failed to update role\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleBanUser = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await authClient.admin.banUser({\r\n        userId: user.id,\r\n        banReason: banReason || \"Violated terms of service\",\r\n      });\r\n      toast.success(`User ${user.name || user.email} has been banned`);\r\n      setBanDialogOpen(false);\r\n      onUpdate();\r\n    } catch (error) {\r\n      toast.error(\"Failed to ban user\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUnbanUser = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await authClient.admin.unbanUser({\r\n        userId: user.id,\r\n      });\r\n      toast.success(`User ${user.name || user.email} has been unbanned`);\r\n      onUpdate();\r\n    } catch (error) {\r\n      toast.error(\"Failed to unban user\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await authClient.admin.removeUser({\r\n        userId: user.id,\r\n      });\r\n      toast.success(`User ${user.name || user.email} has been deleted`);\r\n      setDeleteDialogOpen(false);\r\n      onUpdate();\r\n    } catch (error) {\r\n      toast.error(\"Failed to delete user\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"ghost\" size=\"sm\">\r\n            <MoreHorizontal className=\"h-4 w-4\" />\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"end\">\r\n          <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n          <DropdownMenuSeparator />\r\n          <DropdownMenuItem onClick={() => setRoleDialogOpen(true)}>\r\n            <Shield className=\"mr-2 h-4 w-4\" />\r\n            Change Role\r\n          </DropdownMenuItem>\r\n          {user.banned ? (\r\n            <DropdownMenuItem onClick={handleUnbanUser} disabled={loading}>\r\n              <Unlock className=\"mr-2 h-4 w-4\" />\r\n              Unban User\r\n            </DropdownMenuItem>\r\n          ) : (\r\n            <DropdownMenuItem onClick={() => setBanDialogOpen(true)}>\r\n              <Ban className=\"mr-2 h-4 w-4\" />\r\n              Ban User\r\n            </DropdownMenuItem>\r\n          )}\r\n          <DropdownMenuSeparator />\r\n          <DropdownMenuItem\r\n            onClick={() => setDeleteDialogOpen(true)}\r\n            className=\"text-destructive focus:text-destructive\"\r\n          >\r\n            <Trash2 className=\"mr-2 h-4 w-4\" />\r\n            Delete User\r\n          </DropdownMenuItem>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n\r\n      {/* Role Change Dialog */}\r\n      <Dialog open={roleDialogOpen} onOpenChange={setRoleDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Change User Role</DialogTitle>\r\n            <DialogDescription>\r\n              Update the role for {user.name || user.email}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"role\">Role</Label>\r\n              <Select value={selectedRole} onValueChange={setSelectedRole}>\r\n                <SelectTrigger id=\"role\">\r\n                  <SelectValue placeholder=\"Select a role\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"user\">User</SelectItem>\r\n                  <SelectItem value=\"admin\">Admin</SelectItem>\r\n                  <SelectItem value=\"super-admin\">Super Admin</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setRoleDialogOpen(false)}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleRoleChange} disabled={loading}>\r\n              {loading ? \"Updating...\" : \"Update Role\"}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Ban User Dialog */}\r\n      <Dialog open={banDialogOpen} onOpenChange={setBanDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Ban User</DialogTitle>\r\n            <DialogDescription>\r\n              This will prevent {user.name || user.email} from accessing the platform\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"reason\">Reason (optional)</Label>\r\n              <Textarea\r\n                id=\"reason\"\r\n                placeholder=\"Enter reason for ban...\"\r\n                value={banReason}\r\n                onChange={(e) => setBanReason(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setBanDialogOpen(false)}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"destructive\"\r\n              onClick={handleBanUser}\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Banning...\" : \"Ban User\"}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete User Dialog */}\r\n      <Dialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Delete User</DialogTitle>\r\n            <DialogDescription>\r\n              Are you sure you want to permanently delete {user.name || user.email}? This\r\n              action cannot be undone.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setDeleteDialogOpen(false)}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"destructive\"\r\n              onClick={handleDeleteUser}\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Deleting...\" : \"Delete User\"}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\admin\\user-actions.tsx"
    },
    {
      "path": "components\\admin\\user-management.tsx",
      "content": "\"use client\";\r\n\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useDataTable } from \"@/hooks/use-data-table\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { DataTable } from \"@/components/data-table/data-table\";\r\nimport { DataTableToolbar } from \"@/components/data-table/data-table-toolbar\";\r\nimport { DataTableColumnHeader } from \"@/components/data-table/data-table-column-header\";\r\nimport { DataTableSkeleton } from \"@/components/data-table/data-table-skeleton\";\r\nimport { UserActions } from \"./user-actions\";\r\nimport {\r\n  Users,\r\n  RefreshCw,\r\n  Mail,\r\n  UserCircle,\r\n  Shield,\r\n  Calendar,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { parseAsInteger, parseAsString, useQueryStates } from \"nuqs\";\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string | null;\r\n  email: string;\r\n  role: string;\r\n  banned: boolean;\r\n  banReason?: string | null;\r\n  banExpires?: Date | null;\r\n  createdAt?: Date | null;\r\n}\r\n\r\nexport function UserManagement() {\r\n  // Get URL query params\r\n  const [queryParams] = useQueryStates({\r\n    page: parseAsInteger.withDefault(1),\r\n    perPage: parseAsInteger.withDefault(10),\r\n    sort: parseAsString,\r\n    name: parseAsString,\r\n    email: parseAsString,\r\n    role: parseAsString,\r\n    banned: parseAsString, // This will be comma-separated string from URL\r\n  });\r\n\r\n  console.log(\"Query params from URL:\", queryParams);\r\n\r\n  // Fetch users with query params\r\n  const { data, isLoading, isFetching, refetch } = useQuery({\r\n    queryKey: [\"admin\", \"users\", queryParams],\r\n    queryFn: async () => {\r\n      try {\r\n        // Convert comma-separated banned string to array if needed (for multi-select)\r\n        const bannedFilter = queryParams.banned\r\n          ? queryParams.banned.includes(\",\")\r\n            ? queryParams.banned\r\n                .split(\",\")\r\n                .map((v) => v.trim())\r\n                .filter(Boolean)\r\n            : queryParams.banned\r\n          : undefined;\r\n\r\n        // Ensure text fields are strings (not arrays)\r\n        const ensureString = (\r\n          val: string | null | undefined\r\n        ): string | undefined => {\r\n          if (!val) return undefined;\r\n          return String(val);\r\n        };\r\n\r\n        const requestParams = {\r\n          page: queryParams.page,\r\n          perPage: queryParams.perPage,\r\n          sort: queryParams.sort ?? undefined,\r\n          name: ensureString(queryParams.name),\r\n          email: ensureString(queryParams.email),\r\n          role: ensureString(queryParams.role),\r\n          banned: bannedFilter,\r\n        };\r\n\r\n        console.log(\"Sending request with params:\", requestParams);\r\n\r\n        return await client.admin.getUsers(requestParams);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch users:\", error);\r\n        toast.error(\r\n          error instanceof Error ? error.message : \"Failed to fetch users\"\r\n        );\r\n        throw error;\r\n      }\r\n    },\r\n    staleTime: 5 * 60 * 1000, // 5 minutes - data stays fresh without refetching\r\n    gcTime: 10 * 60 * 1000, // 10 minutes - cache garbage collection time\r\n    refetchOnWindowFocus: false, // Don't refetch when window regains focus\r\n    refetchOnMount: false, // Don't refetch on component mount if data exists\r\n  });\r\n\r\n  const users = data?.users ?? [];\r\n  const pageCount = data?.pageCount ?? 0;\r\n\r\n  const handleUserUpdate = () => {\r\n    void refetch();\r\n  };\r\n\r\n  const columns: ColumnDef<User>[] = [\r\n    {\r\n      id: \"name\",\r\n      accessorKey: \"name\",\r\n      header: ({ column }) => (\r\n        <DataTableColumnHeader column={column} label=\"Name\" />\r\n      ),\r\n      cell: ({ row }) => (\r\n        <div className=\"flex items-center gap-2\">\r\n          <UserCircle className=\"h-4 w-4 text-muted-foreground\" />\r\n          <span className=\"font-medium\">{row.getValue(\"name\") || \"N/A\"}</span>\r\n        </div>\r\n      ),\r\n      meta: {\r\n        label: \"Name\",\r\n        placeholder: \"Search names...\",\r\n        variant: \"text\",\r\n        icon: UserCircle,\r\n      },\r\n      enableColumnFilter: true,\r\n      enableSorting: true,\r\n    },\r\n    {\r\n      id: \"email\",\r\n      accessorKey: \"email\",\r\n      header: ({ column }) => (\r\n        <DataTableColumnHeader column={column} label=\"Email\" />\r\n      ),\r\n      cell: ({ row }) => (\r\n        <div className=\"flex items-center gap-2\">\r\n          <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n          <span>{row.getValue(\"email\")}</span>\r\n        </div>\r\n      ),\r\n      meta: {\r\n        label: \"Email\",\r\n        placeholder: \"Search emails...\",\r\n        variant: \"text\",\r\n        icon: Mail,\r\n      },\r\n      enableColumnFilter: true,\r\n      enableSorting: true,\r\n    },\r\n    {\r\n      id: \"role\",\r\n      accessorKey: \"role\",\r\n      header: ({ column }) => (\r\n        <DataTableColumnHeader column={column} label=\"Role\" />\r\n      ),\r\n      cell: ({ row }) => {\r\n        const role = row.getValue(\"role\") as string;\r\n        return (\r\n          <Badge\r\n            variant={\r\n              role === \"admin\" || role === \"super-admin\"\r\n                ? \"default\"\r\n                : \"secondary\"\r\n            }\r\n          >\r\n            {role}\r\n          </Badge>\r\n        );\r\n      },\r\n      meta: {\r\n        label: \"Role\",\r\n        variant: \"select\",\r\n        icon: Shield,\r\n        options: [\r\n          { label: \"User\", value: \"user\" },\r\n          { label: \"Admin\", value: \"admin\" },\r\n          { label: \"Super Admin\", value: \"super-admin\" },\r\n        ],\r\n      },\r\n      enableColumnFilter: true,\r\n      enableSorting: true,\r\n    },\r\n    {\r\n      id: \"banned\",\r\n      accessorKey: \"banned\",\r\n      header: ({ column }) => (\r\n        <DataTableColumnHeader column={column} label=\"Status\" />\r\n      ),\r\n      cell: ({ row }) => {\r\n        const banned = row.getValue(\"banned\") as boolean;\r\n        return banned ? (\r\n          <Badge variant=\"destructive\">Banned</Badge>\r\n        ) : (\r\n          <Badge variant=\"outline\" className=\"text-green-500 border-green-500\">\r\n            Active\r\n          </Badge>\r\n        );\r\n      },\r\n      meta: {\r\n        label: \"Status\",\r\n        variant: \"select\",\r\n        options: [\r\n          { label: \"Active\", value: \"false\" },\r\n          { label: \"Banned\", value: \"true\" },\r\n        ],\r\n      },\r\n      enableColumnFilter: true,\r\n      enableSorting: true,\r\n      filterFn: (row, id, value) => {\r\n        const banned = row.getValue(id) as boolean;\r\n        return value.includes(String(banned));\r\n      },\r\n    },\r\n    {\r\n      id: \"createdAt\",\r\n      accessorKey: \"createdAt\",\r\n      header: ({ column }) => (\r\n        <DataTableColumnHeader column={column} label=\"Joined\" />\r\n      ),\r\n      cell: ({ row }) => {\r\n        const date = row.getValue(\"createdAt\") as Date | null;\r\n        return (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n            <span>{date ? new Date(date).toLocaleDateString() : \"N/A\"}</span>\r\n          </div>\r\n        );\r\n      },\r\n      meta: {\r\n        label: \"Joined\",\r\n        variant: \"date\",\r\n        icon: Calendar,\r\n      },\r\n      enableColumnFilter: true,\r\n      enableSorting: true,\r\n    },\r\n    {\r\n      id: \"actions\",\r\n      cell: ({ row }) => (\r\n        <div className=\"text-right\">\r\n          <UserActions user={row.original} onUpdate={handleUserUpdate} />\r\n        </div>\r\n      ),\r\n      enableHiding: false,\r\n    },\r\n  ];\r\n\r\n  // Use useDataTable hook with built-in URL sync via nuqs\r\n  const { table } = useDataTable({\r\n    data: users,\r\n    columns,\r\n    pageCount: pageCount,\r\n    initialState: {\r\n      sorting: [{ id: \"createdAt\", desc: true }],\r\n      pagination: {\r\n        pageIndex: 0,\r\n        pageSize: 10,\r\n      },\r\n    },\r\n    getRowId: (row) => row.id,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Users className=\"h-5 w-5 text-amber-500\" />\r\n            <div>\r\n              <CardTitle>User Management</CardTitle>\r\n              <CardDescription>\r\n                Manage users, roles, and permissions\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <DataTableSkeleton\r\n            columnCount={6}\r\n            rowCount={10}\r\n            filterCount={3}\r\n            withPagination={true}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // const hasUsers = users.length > 0;\r\n  // const totalUsers = data?.total ?? 0;\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Users className=\"h-5 w-5 text-amber-500\" />\r\n            <div>\r\n              <CardTitle>User Management</CardTitle>\r\n              <CardDescription>\r\n                Manage users, roles, and permissions\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            onClick={() => void refetch()}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            disabled={isFetching}\r\n          >\r\n            <RefreshCw\r\n              className={`mr-2 h-4 w-4 ${isFetching ? \"animate-spin\" : \"\"}`}\r\n            />\r\n            Refresh\r\n          </Button>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <DataTable table={table}>\r\n          <DataTableToolbar table={table} />\r\n        </DataTable>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\admin\\user-management.tsx"
    },
    {
      "path": "components\\ai-elements\\artifact.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type LucideIcon, XIcon } from \"lucide-react\";\r\nimport type { ComponentProps, HTMLAttributes } from \"react\";\r\n\r\nexport type ArtifactProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const Artifact = ({ className, ...props }: ArtifactProps) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col overflow-hidden rounded-lg border bg-background shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ArtifactHeaderProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const ArtifactHeader = ({\r\n  className,\r\n  ...props\r\n}: ArtifactHeaderProps) => (\r\n  <div\r\n    className={cn(\r\n      \"flex items-center justify-between border-b bg-muted/50 px-4 py-3\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ArtifactCloseProps = ComponentProps<typeof Button>;\r\n\r\nexport const ArtifactClose = ({\r\n  className,\r\n  children,\r\n  size = \"sm\",\r\n  variant = \"ghost\",\r\n  ...props\r\n}: ArtifactCloseProps) => (\r\n  <Button\r\n    className={cn(\r\n      \"size-8 p-0 text-muted-foreground hover:text-foreground\",\r\n      className\r\n    )}\r\n    size={size}\r\n    type=\"button\"\r\n    variant={variant}\r\n    {...props}\r\n  >\r\n    {children ?? <XIcon className=\"size-4\" />}\r\n    <span className=\"sr-only\">Close</span>\r\n  </Button>\r\n);\r\n\r\nexport type ArtifactTitleProps = HTMLAttributes<HTMLParagraphElement>;\r\n\r\nexport const ArtifactTitle = ({ className, ...props }: ArtifactTitleProps) => (\r\n  <p\r\n    className={cn(\"font-medium text-foreground text-sm\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ArtifactDescriptionProps = HTMLAttributes<HTMLParagraphElement>;\r\n\r\nexport const ArtifactDescription = ({\r\n  className,\r\n  ...props\r\n}: ArtifactDescriptionProps) => (\r\n  <p className={cn(\"text-muted-foreground text-sm\", className)} {...props} />\r\n);\r\n\r\nexport type ArtifactActionsProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const ArtifactActions = ({\r\n  className,\r\n  ...props\r\n}: ArtifactActionsProps) => (\r\n  <div className={cn(\"flex items-center gap-1\", className)} {...props} />\r\n);\r\n\r\nexport type ArtifactActionProps = ComponentProps<typeof Button> & {\r\n  tooltip?: string;\r\n  label?: string;\r\n  icon?: LucideIcon;\r\n};\r\n\r\nexport const ArtifactAction = ({\r\n  tooltip,\r\n  label,\r\n  icon: Icon,\r\n  children,\r\n  className,\r\n  size = \"sm\",\r\n  variant = \"ghost\",\r\n  ...props\r\n}: ArtifactActionProps) => {\r\n  const button = (\r\n    <Button\r\n      className={cn(\r\n        \"size-8 p-0 text-muted-foreground hover:text-foreground\",\r\n        className\r\n      )}\r\n      size={size}\r\n      type=\"button\"\r\n      variant={variant}\r\n      {...props}\r\n    >\r\n      {Icon ? <Icon className=\"size-4\" /> : children}\r\n      <span className=\"sr-only\">{label || tooltip}</span>\r\n    </Button>\r\n  );\r\n\r\n  if (tooltip) {\r\n    return (\r\n      <TooltipProvider>\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n          <TooltipContent>\r\n            <p>{tooltip}</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      </TooltipProvider>\r\n    );\r\n  }\r\n\r\n  return button;\r\n};\r\n\r\nexport type ArtifactContentProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const ArtifactContent = ({\r\n  className,\r\n  ...props\r\n}: ArtifactContentProps) => (\r\n  <div className={cn(\"flex-1 overflow-auto p-4\", className)} {...props} />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\artifact.tsx"
    },
    {
      "path": "components\\ai-elements\\canvas.tsx",
      "content": "import { Background, ReactFlow, type ReactFlowProps } from \"@xyflow/react\";\r\nimport type { ReactNode } from \"react\";\r\nimport \"@xyflow/react/dist/style.css\";\r\n\r\ntype CanvasProps = ReactFlowProps & {\r\n  children?: ReactNode;\r\n};\r\n\r\nexport const Canvas = ({ children, ...props }: CanvasProps) => (\r\n  <ReactFlow\r\n    deleteKeyCode={[\"Backspace\", \"Delete\"]}\r\n    fitView\r\n    panOnDrag={false}\r\n    panOnScroll\r\n    selectionOnDrag={true}\r\n    zoomOnDoubleClick={false}\r\n    {...props}\r\n  >\r\n    <Background bgColor=\"var(--sidebar)\" />\r\n    {children}\r\n  </ReactFlow>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\canvas.tsx"
    },
    {
      "path": "components\\ai-elements\\chain-of-thought.tsx",
      "content": "\"use client\";\r\n\r\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  BrainIcon,\r\n  ChevronDownIcon,\r\n  DotIcon,\r\n  type LucideIcon,\r\n} from \"lucide-react\";\r\nimport type { ComponentProps, ReactNode } from \"react\";\r\nimport { createContext, memo, useContext, useMemo } from \"react\";\r\n\r\ntype ChainOfThoughtContextValue = {\r\n  isOpen: boolean;\r\n  setIsOpen: (open: boolean) => void;\r\n};\r\n\r\nconst ChainOfThoughtContext = createContext<ChainOfThoughtContextValue | null>(\r\n  null\r\n);\r\n\r\nconst useChainOfThought = () => {\r\n  const context = useContext(ChainOfThoughtContext);\r\n  if (!context) {\r\n    throw new Error(\r\n      \"ChainOfThought components must be used within ChainOfThought\"\r\n    );\r\n  }\r\n  return context;\r\n};\r\n\r\nexport type ChainOfThoughtProps = ComponentProps<\"div\"> & {\r\n  open?: boolean;\r\n  defaultOpen?: boolean;\r\n  onOpenChange?: (open: boolean) => void;\r\n};\r\n\r\nexport const ChainOfThought = memo(\r\n  ({\r\n    className,\r\n    open,\r\n    defaultOpen = false,\r\n    onOpenChange,\r\n    children,\r\n    ...props\r\n  }: ChainOfThoughtProps) => {\r\n    const [isOpen, setIsOpen] = useControllableState({\r\n      prop: open,\r\n      defaultProp: defaultOpen,\r\n      onChange: onOpenChange,\r\n    });\r\n\r\n    const chainOfThoughtContext = useMemo(\r\n      () => ({ isOpen, setIsOpen }),\r\n      [isOpen, setIsOpen]\r\n    );\r\n\r\n    return (\r\n      <ChainOfThoughtContext.Provider value={chainOfThoughtContext}>\r\n        <div\r\n          className={cn(\"not-prose max-w-prose space-y-4\", className)}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </ChainOfThoughtContext.Provider>\r\n    );\r\n  }\r\n);\r\n\r\nexport type ChainOfThoughtHeaderProps = ComponentProps<\r\n  typeof CollapsibleTrigger\r\n>;\r\n\r\nexport const ChainOfThoughtHeader = memo(\r\n  ({ className, children, ...props }: ChainOfThoughtHeaderProps) => {\r\n    const { isOpen, setIsOpen } = useChainOfThought();\r\n\r\n    return (\r\n      <Collapsible onOpenChange={setIsOpen} open={isOpen}>\r\n        <CollapsibleTrigger\r\n          className={cn(\r\n            \"flex w-full items-center gap-2 text-muted-foreground text-sm transition-colors hover:text-foreground\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          <BrainIcon className=\"size-4\" />\r\n          <span className=\"flex-1 text-left\">\r\n            {children ?? \"Chain of Thought\"}\r\n          </span>\r\n          <ChevronDownIcon\r\n            className={cn(\r\n              \"size-4 transition-transform\",\r\n              isOpen ? \"rotate-180\" : \"rotate-0\"\r\n            )}\r\n          />\r\n        </CollapsibleTrigger>\r\n      </Collapsible>\r\n    );\r\n  }\r\n);\r\n\r\nexport type ChainOfThoughtStepProps = ComponentProps<\"div\"> & {\r\n  icon?: LucideIcon;\r\n  label: ReactNode;\r\n  description?: ReactNode;\r\n  status?: \"complete\" | \"active\" | \"pending\";\r\n};\r\n\r\nexport const ChainOfThoughtStep = memo(\r\n  ({\r\n    className,\r\n    icon: Icon = DotIcon,\r\n    label,\r\n    description,\r\n    status = \"complete\",\r\n    children,\r\n    ...props\r\n  }: ChainOfThoughtStepProps) => {\r\n    const statusStyles = {\r\n      complete: \"text-muted-foreground\",\r\n      active: \"text-foreground\",\r\n      pending: \"text-muted-foreground/50\",\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className={cn(\r\n          \"flex gap-2 text-sm\",\r\n          statusStyles[status],\r\n          \"fade-in-0 slide-in-from-top-2 animate-in\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div className=\"relative mt-0.5\">\r\n          <Icon className=\"size-4\" />\r\n          <div className=\"-mx-px absolute top-7 bottom-0 left-1/2 w-px bg-border\" />\r\n        </div>\r\n        <div className=\"flex-1 space-y-2\">\r\n          <div>{label}</div>\r\n          {description && (\r\n            <div className=\"text-muted-foreground text-xs\">{description}</div>\r\n          )}\r\n          {children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport type ChainOfThoughtSearchResultsProps = ComponentProps<\"div\">;\r\n\r\nexport const ChainOfThoughtSearchResults = memo(\r\n  ({ className, ...props }: ChainOfThoughtSearchResultsProps) => (\r\n    <div className={cn(\"flex items-center gap-2\", className)} {...props} />\r\n  )\r\n);\r\n\r\nexport type ChainOfThoughtSearchResultProps = ComponentProps<typeof Badge>;\r\n\r\nexport const ChainOfThoughtSearchResult = memo(\r\n  ({ className, children, ...props }: ChainOfThoughtSearchResultProps) => (\r\n    <Badge\r\n      className={cn(\"gap-1 px-2 py-0.5 font-normal text-xs\", className)}\r\n      variant=\"secondary\"\r\n      {...props}\r\n    >\r\n      {children}\r\n    </Badge>\r\n  )\r\n);\r\n\r\nexport type ChainOfThoughtContentProps = ComponentProps<\r\n  typeof CollapsibleContent\r\n>;\r\n\r\nexport const ChainOfThoughtContent = memo(\r\n  ({ className, children, ...props }: ChainOfThoughtContentProps) => {\r\n    const { isOpen } = useChainOfThought();\r\n\r\n    return (\r\n      <Collapsible open={isOpen}>\r\n        <CollapsibleContent\r\n          className={cn(\r\n            \"mt-2 space-y-3\",\r\n            \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-none data-[state=closed]:animate-out data-[state=open]:animate-in\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </CollapsibleContent>\r\n      </Collapsible>\r\n    );\r\n  }\r\n);\r\n\r\nexport type ChainOfThoughtImageProps = ComponentProps<\"div\"> & {\r\n  caption?: string;\r\n};\r\n\r\nexport const ChainOfThoughtImage = memo(\r\n  ({ className, children, caption, ...props }: ChainOfThoughtImageProps) => (\r\n    <div className={cn(\"mt-2 space-y-2\", className)} {...props}>\r\n      <div className=\"relative flex max-h-[22rem] items-center justify-center overflow-hidden rounded-lg bg-muted p-3\">\r\n        {children}\r\n      </div>\r\n      {caption && <p className=\"text-muted-foreground text-xs\">{caption}</p>}\r\n    </div>\r\n  )\r\n);\r\n\r\nChainOfThought.displayName = \"ChainOfThought\";\r\nChainOfThoughtHeader.displayName = \"ChainOfThoughtHeader\";\r\nChainOfThoughtStep.displayName = \"ChainOfThoughtStep\";\r\nChainOfThoughtSearchResults.displayName = \"ChainOfThoughtSearchResults\";\r\nChainOfThoughtSearchResult.displayName = \"ChainOfThoughtSearchResult\";\r\nChainOfThoughtContent.displayName = \"ChainOfThoughtContent\";\r\nChainOfThoughtImage.displayName = \"ChainOfThoughtImage\";\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\chain-of-thought.tsx"
    },
    {
      "path": "components\\ai-elements\\checkpoint.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { BookmarkIcon, type LucideProps } from \"lucide-react\";\r\nimport type { ComponentProps, HTMLAttributes } from \"react\";\r\n\r\nexport type CheckpointProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const Checkpoint = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: CheckpointProps) => (\r\n  <div\r\n    className={cn(\"flex items-center gap-0.5 text-muted-foreground overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <Separator />\r\n  </div>\r\n);\r\n\r\nexport type CheckpointIconProps = LucideProps;\r\n\r\nexport const CheckpointIcon = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: CheckpointIconProps) =>\r\n  children ?? (\r\n    <BookmarkIcon className={cn(\"size-4 shrink-0\", className)} {...props} />\r\n  );\r\n\r\nexport type CheckpointTriggerProps = ComponentProps<typeof Button> & {\r\n  tooltip?: string;\r\n};\r\n\r\nexport const CheckpointTrigger = ({\r\n  children,\r\n  className,\r\n  variant = \"ghost\",\r\n  size = \"sm\",\r\n  tooltip,\r\n  ...props\r\n}: CheckpointTriggerProps) =>\r\n  tooltip ? (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>\r\n        <Button size={size} type=\"button\" variant={variant} {...props}>\r\n          {children}\r\n        </Button>\r\n      </TooltipTrigger>\r\n      <TooltipContent align=\"start\" side=\"bottom\">\r\n        {tooltip}\r\n      </TooltipContent>\r\n    </Tooltip>\r\n  ) : (\r\n    <Button size={size} type=\"button\" variant={variant} {...props}>\r\n      {children}\r\n    </Button>\r\n  );\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\checkpoint.tsx"
    },
    {
      "path": "components\\ai-elements\\code-block.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { CheckIcon, CopyIcon } from \"lucide-react\";\r\nimport {\r\n  type ComponentProps,\r\n  createContext,\r\n  type HTMLAttributes,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { type BundledLanguage, codeToHtml, type ShikiTransformer } from \"shiki\";\r\n\r\ntype CodeBlockProps = HTMLAttributes<HTMLDivElement> & {\r\n  code: string;\r\n  language: BundledLanguage;\r\n  showLineNumbers?: boolean;\r\n};\r\n\r\ntype CodeBlockContextType = {\r\n  code: string;\r\n};\r\n\r\nconst CodeBlockContext = createContext<CodeBlockContextType>({\r\n  code: \"\",\r\n});\r\n\r\nconst lineNumberTransformer: ShikiTransformer = {\r\n  name: \"line-numbers\",\r\n  line(node, line) {\r\n    node.children.unshift({\r\n      type: \"element\",\r\n      tagName: \"span\",\r\n      properties: {\r\n        className: [\r\n          \"inline-block\",\r\n          \"min-w-10\",\r\n          \"mr-4\",\r\n          \"text-right\",\r\n          \"select-none\",\r\n          \"text-muted-foreground\",\r\n        ],\r\n      },\r\n      children: [{ type: \"text\", value: String(line) }],\r\n    });\r\n  },\r\n};\r\n\r\nexport async function highlightCode(\r\n  code: string,\r\n  language: BundledLanguage,\r\n  showLineNumbers = false\r\n) {\r\n  const transformers: ShikiTransformer[] = showLineNumbers\r\n    ? [lineNumberTransformer]\r\n    : [];\r\n\r\n  return await Promise.all([\r\n    codeToHtml(code, {\r\n      lang: language,\r\n      theme: \"one-light\",\r\n      transformers,\r\n    }),\r\n    codeToHtml(code, {\r\n      lang: language,\r\n      theme: \"one-dark-pro\",\r\n      transformers,\r\n    }),\r\n  ]);\r\n}\r\n\r\nexport const CodeBlock = ({\r\n  code,\r\n  language,\r\n  showLineNumbers = false,\r\n  className,\r\n  children,\r\n  ...props\r\n}: CodeBlockProps) => {\r\n  const [html, setHtml] = useState<string>(\"\");\r\n  const [darkHtml, setDarkHtml] = useState<string>(\"\");\r\n  const mounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    highlightCode(code, language, showLineNumbers).then(([light, dark]) => {\r\n      if (!mounted.current) {\r\n        setHtml(light);\r\n        setDarkHtml(dark);\r\n        mounted.current = true;\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, [code, language, showLineNumbers]);\r\n\r\n  return (\r\n    <CodeBlockContext.Provider value={{ code }}>\r\n      <div\r\n        className={cn(\r\n          \"group relative w-full overflow-hidden rounded-md border bg-background text-foreground\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div className=\"relative\">\r\n          <div\r\n            className=\"overflow-hidden dark:hidden [&>pre]:m-0 [&>pre]:bg-background! [&>pre]:p-4 [&>pre]:text-foreground! [&>pre]:text-sm [&_code]:font-mono [&_code]:text-sm\"\r\n            // biome-ignore lint/security/noDangerouslySetInnerHtml: \"this is needed.\"\r\n            dangerouslySetInnerHTML={{ __html: html }}\r\n          />\r\n          <div\r\n            className=\"hidden overflow-hidden dark:block [&>pre]:m-0 [&>pre]:bg-background! [&>pre]:p-4 [&>pre]:text-foreground! [&>pre]:text-sm [&_code]:font-mono [&_code]:text-sm\"\r\n            // biome-ignore lint/security/noDangerouslySetInnerHtml: \"this is needed.\"\r\n            dangerouslySetInnerHTML={{ __html: darkHtml }}\r\n          />\r\n          {children && (\r\n            <div className=\"absolute top-2 right-2 flex items-center gap-2\">\r\n              {children}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </CodeBlockContext.Provider>\r\n  );\r\n};\r\n\r\nexport type CodeBlockCopyButtonProps = ComponentProps<typeof Button> & {\r\n  onCopy?: () => void;\r\n  onError?: (error: Error) => void;\r\n  timeout?: number;\r\n};\r\n\r\nexport const CodeBlockCopyButton = ({\r\n  onCopy,\r\n  onError,\r\n  timeout = 2000,\r\n  children,\r\n  className,\r\n  ...props\r\n}: CodeBlockCopyButtonProps) => {\r\n  const [isCopied, setIsCopied] = useState(false);\r\n  const { code } = useContext(CodeBlockContext);\r\n\r\n  const copyToClipboard = async () => {\r\n    if (typeof window === \"undefined\" || !navigator?.clipboard?.writeText) {\r\n      onError?.(new Error(\"Clipboard API not available\"));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await navigator.clipboard.writeText(code);\r\n      setIsCopied(true);\r\n      onCopy?.();\r\n      setTimeout(() => setIsCopied(false), timeout);\r\n    } catch (error) {\r\n      onError?.(error as Error);\r\n    }\r\n  };\r\n\r\n  const Icon = isCopied ? CheckIcon : CopyIcon;\r\n\r\n  return (\r\n    <Button\r\n      className={cn(\"shrink-0\", className)}\r\n      onClick={copyToClipboard}\r\n      size=\"icon\"\r\n      variant=\"ghost\"\r\n      {...props}\r\n    >\r\n      {children ?? <Icon size={14} />}\r\n    </Button>\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\code-block.tsx"
    },
    {
      "path": "components\\ai-elements\\connection.tsx",
      "content": "import type { ConnectionLineComponent } from \"@xyflow/react\";\r\n\r\nconst HALF = 0.5;\r\n\r\nexport const Connection: ConnectionLineComponent = ({\r\n  fromX,\r\n  fromY,\r\n  toX,\r\n  toY,\r\n}) => (\r\n  <g>\r\n    <path\r\n      className=\"animated\"\r\n      d={`M${fromX},${fromY} C ${fromX + (toX - fromX) * HALF},${fromY} ${fromX + (toX - fromX) * HALF},${toY} ${toX},${toY}`}\r\n      fill=\"none\"\r\n      stroke=\"var(--color-ring)\"\r\n      strokeWidth={1}\r\n    />\r\n    <circle\r\n      cx={toX}\r\n      cy={toY}\r\n      fill=\"#fff\"\r\n      r={3}\r\n      stroke=\"var(--color-ring)\"\r\n      strokeWidth={1}\r\n    />\r\n  </g>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\connection.tsx"
    },
    {
      "path": "components\\ai-elements\\context.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  HoverCard,\r\n  HoverCardContent,\r\n  HoverCardTrigger,\r\n} from \"@/components/ui/hover-card\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { LanguageModelUsage } from \"ai\";\r\nimport { type ComponentProps, createContext, useContext } from \"react\";\r\nimport { getUsage } from \"tokenlens\";\r\n\r\nconst PERCENT_MAX = 100;\r\nconst ICON_RADIUS = 10;\r\nconst ICON_VIEWBOX = 24;\r\nconst ICON_CENTER = 12;\r\nconst ICON_STROKE_WIDTH = 2;\r\n\r\ntype ModelId = string;\r\n\r\ntype ContextSchema = {\r\n  usedTokens: number;\r\n  maxTokens: number;\r\n  usage?: LanguageModelUsage;\r\n  modelId?: ModelId;\r\n};\r\n\r\nconst ContextContext = createContext<ContextSchema | null>(null);\r\n\r\nconst useContextValue = () => {\r\n  const context = useContext(ContextContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"Context components must be used within Context\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport type ContextProps = ComponentProps<typeof HoverCard> & ContextSchema;\r\n\r\nexport const Context = ({\r\n  usedTokens,\r\n  maxTokens,\r\n  usage,\r\n  modelId,\r\n  ...props\r\n}: ContextProps) => (\r\n  <ContextContext.Provider\r\n    value={{\r\n      usedTokens,\r\n      maxTokens,\r\n      usage,\r\n      modelId,\r\n    }}\r\n  >\r\n    <HoverCard closeDelay={0} openDelay={0} {...props} />\r\n  </ContextContext.Provider>\r\n);\r\n\r\nconst ContextIcon = () => {\r\n  const { usedTokens, maxTokens } = useContextValue();\r\n  const circumference = 2 * Math.PI * ICON_RADIUS;\r\n  const usedPercent = usedTokens / maxTokens;\r\n  const dashOffset = circumference * (1 - usedPercent);\r\n\r\n  return (\r\n    <svg\r\n      aria-label=\"Model context usage\"\r\n      height=\"20\"\r\n      role=\"img\"\r\n      style={{ color: \"currentcolor\" }}\r\n      viewBox={`0 0 ${ICON_VIEWBOX} ${ICON_VIEWBOX}`}\r\n      width=\"20\"\r\n    >\r\n      <circle\r\n        cx={ICON_CENTER}\r\n        cy={ICON_CENTER}\r\n        fill=\"none\"\r\n        opacity=\"0.25\"\r\n        r={ICON_RADIUS}\r\n        stroke=\"currentColor\"\r\n        strokeWidth={ICON_STROKE_WIDTH}\r\n      />\r\n      <circle\r\n        cx={ICON_CENTER}\r\n        cy={ICON_CENTER}\r\n        fill=\"none\"\r\n        opacity=\"0.7\"\r\n        r={ICON_RADIUS}\r\n        stroke=\"currentColor\"\r\n        strokeDasharray={`${circumference} ${circumference}`}\r\n        strokeDashoffset={dashOffset}\r\n        strokeLinecap=\"round\"\r\n        strokeWidth={ICON_STROKE_WIDTH}\r\n        style={{ transformOrigin: \"center\", transform: \"rotate(-90deg)\" }}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport type ContextTriggerProps = ComponentProps<typeof Button>;\r\n\r\nexport const ContextTrigger = ({ children, ...props }: ContextTriggerProps) => {\r\n  const { usedTokens, maxTokens } = useContextValue();\r\n  const usedPercent = usedTokens / maxTokens;\r\n  const renderedPercent = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"percent\",\r\n    maximumFractionDigits: 1,\r\n  }).format(usedPercent);\r\n\r\n  return (\r\n    <HoverCardTrigger asChild>\r\n      {children ?? (\r\n        <Button type=\"button\" variant=\"ghost\" {...props}>\r\n          <span className=\"font-medium text-muted-foreground\">\r\n            {renderedPercent}\r\n          </span>\r\n          <ContextIcon />\r\n        </Button>\r\n      )}\r\n    </HoverCardTrigger>\r\n  );\r\n};\r\n\r\nexport type ContextContentProps = ComponentProps<typeof HoverCardContent>;\r\n\r\nexport const ContextContent = ({\r\n  className,\r\n  ...props\r\n}: ContextContentProps) => (\r\n  <HoverCardContent\r\n    className={cn(\"min-w-60 divide-y overflow-hidden p-0\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ContextContentHeaderProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextContentHeader = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: ContextContentHeaderProps) => {\r\n  const { usedTokens, maxTokens } = useContextValue();\r\n  const usedPercent = usedTokens / maxTokens;\r\n  const displayPct = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"percent\",\r\n    maximumFractionDigits: 1,\r\n  }).format(usedPercent);\r\n  const used = new Intl.NumberFormat(\"en-US\", {\r\n    notation: \"compact\",\r\n  }).format(usedTokens);\r\n  const total = new Intl.NumberFormat(\"en-US\", {\r\n    notation: \"compact\",\r\n  }).format(maxTokens);\r\n\r\n  return (\r\n    <div className={cn(\"w-full space-y-2 p-3\", className)} {...props}>\r\n      {children ?? (\r\n        <>\r\n          <div className=\"flex items-center justify-between gap-3 text-xs\">\r\n            <p>{displayPct}</p>\r\n            <p className=\"font-mono text-muted-foreground\">\r\n              {used} / {total}\r\n            </p>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Progress className=\"bg-muted\" value={usedPercent * PERCENT_MAX} />\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type ContextContentBodyProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextContentBody = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: ContextContentBodyProps) => (\r\n  <div className={cn(\"w-full p-3\", className)} {...props}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type ContextContentFooterProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextContentFooter = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: ContextContentFooterProps) => {\r\n  const { modelId, usage } = useContextValue();\r\n  const costUSD = modelId\r\n    ? getUsage({\r\n        modelId,\r\n        usage: {\r\n          input: usage?.inputTokens ?? 0,\r\n          output: usage?.outputTokens ?? 0,\r\n        },\r\n      }).costUSD?.totalUSD\r\n    : undefined;\r\n  const totalCost = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(costUSD ?? 0);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex w-full items-center justify-between gap-3 bg-secondary p-3 text-xs\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children ?? (\r\n        <>\r\n          <span className=\"text-muted-foreground\">Total cost</span>\r\n          <span>{totalCost}</span>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type ContextInputUsageProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextInputUsage = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: ContextInputUsageProps) => {\r\n  const { usage, modelId } = useContextValue();\r\n  const inputTokens = usage?.inputTokens ?? 0;\r\n\r\n  if (children) {\r\n    return children;\r\n  }\r\n\r\n  if (!inputTokens) {\r\n    return null;\r\n  }\r\n\r\n  const inputCost = modelId\r\n    ? getUsage({\r\n        modelId,\r\n        usage: { input: inputTokens, output: 0 },\r\n      }).costUSD?.totalUSD\r\n    : undefined;\r\n  const inputCostText = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(inputCost ?? 0);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"flex items-center justify-between text-xs\", className)}\r\n      {...props}\r\n    >\r\n      <span className=\"text-muted-foreground\">Input</span>\r\n      <TokensWithCost costText={inputCostText} tokens={inputTokens} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type ContextOutputUsageProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextOutputUsage = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: ContextOutputUsageProps) => {\r\n  const { usage, modelId } = useContextValue();\r\n  const outputTokens = usage?.outputTokens ?? 0;\r\n\r\n  if (children) {\r\n    return children;\r\n  }\r\n\r\n  if (!outputTokens) {\r\n    return null;\r\n  }\r\n\r\n  const outputCost = modelId\r\n    ? getUsage({\r\n        modelId,\r\n        usage: { input: 0, output: outputTokens },\r\n      }).costUSD?.totalUSD\r\n    : undefined;\r\n  const outputCostText = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(outputCost ?? 0);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"flex items-center justify-between text-xs\", className)}\r\n      {...props}\r\n    >\r\n      <span className=\"text-muted-foreground\">Output</span>\r\n      <TokensWithCost costText={outputCostText} tokens={outputTokens} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type ContextReasoningUsageProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextReasoningUsage = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: ContextReasoningUsageProps) => {\r\n  const { usage, modelId } = useContextValue();\r\n  const reasoningTokens = usage?.reasoningTokens ?? 0;\r\n\r\n  if (children) {\r\n    return children;\r\n  }\r\n\r\n  if (!reasoningTokens) {\r\n    return null;\r\n  }\r\n\r\n  const reasoningCost = modelId\r\n    ? getUsage({\r\n        modelId,\r\n        usage: { reasoningTokens },\r\n      }).costUSD?.totalUSD\r\n    : undefined;\r\n  const reasoningCostText = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(reasoningCost ?? 0);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"flex items-center justify-between text-xs\", className)}\r\n      {...props}\r\n    >\r\n      <span className=\"text-muted-foreground\">Reasoning</span>\r\n      <TokensWithCost costText={reasoningCostText} tokens={reasoningTokens} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type ContextCacheUsageProps = ComponentProps<\"div\">;\r\n\r\nexport const ContextCacheUsage = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: ContextCacheUsageProps) => {\r\n  const { usage, modelId } = useContextValue();\r\n  const cacheTokens = usage?.cachedInputTokens ?? 0;\r\n\r\n  if (children) {\r\n    return children;\r\n  }\r\n\r\n  if (!cacheTokens) {\r\n    return null;\r\n  }\r\n\r\n  const cacheCost = modelId\r\n    ? getUsage({\r\n        modelId,\r\n        usage: { cacheReads: cacheTokens, input: 0, output: 0 },\r\n      }).costUSD?.totalUSD\r\n    : undefined;\r\n  const cacheCostText = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(cacheCost ?? 0);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"flex items-center justify-between text-xs\", className)}\r\n      {...props}\r\n    >\r\n      <span className=\"text-muted-foreground\">Cache</span>\r\n      <TokensWithCost costText={cacheCostText} tokens={cacheTokens} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TokensWithCost = ({\r\n  tokens,\r\n  costText,\r\n}: {\r\n  tokens?: number;\r\n  costText?: string;\r\n}) => (\r\n  <span>\r\n    {tokens === undefined\r\n      ? \"â€”\"\r\n      : new Intl.NumberFormat(\"en-US\", {\r\n          notation: \"compact\",\r\n        }).format(tokens)}\r\n    {costText ? (\r\n      <span className=\"ml-2 text-muted-foreground\">â€¢ {costText}</span>\r\n    ) : null}\r\n  </span>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\context.tsx"
    },
    {
      "path": "components\\ai-elements\\controls.tsx",
      "content": "\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Controls as ControlsPrimitive } from \"@xyflow/react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type ControlsProps = ComponentProps<typeof ControlsPrimitive>;\r\n\r\nexport const Controls = ({ className, ...props }: ControlsProps) => (\r\n  <ControlsPrimitive\r\n    className={cn(\r\n      \"gap-px overflow-hidden rounded-md border bg-card p-1 shadow-none!\",\r\n      \"[&>button]:rounded-md [&>button]:border-none! [&>button]:bg-transparent! [&>button]:hover:bg-secondary!\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\controls.tsx"
    },
    {
      "path": "components\\ai-elements\\conversation.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ArrowDownIcon } from \"lucide-react\";\r\nimport type { ComponentProps } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport { StickToBottom, useStickToBottomContext } from \"use-stick-to-bottom\";\r\n\r\nexport type ConversationProps = ComponentProps<typeof StickToBottom>;\r\n\r\nexport const Conversation = ({ className, ...props }: ConversationProps) => (\r\n  <StickToBottom\r\n    className={cn(\"relative flex-1 overflow-y-auto\", className)}\r\n    initial=\"smooth\"\r\n    resize=\"smooth\"\r\n    role=\"log\"\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ConversationContentProps = ComponentProps<\r\n  typeof StickToBottom.Content\r\n>;\r\n\r\nexport const ConversationContent = ({\r\n  className,\r\n  ...props\r\n}: ConversationContentProps) => (\r\n  <StickToBottom.Content\r\n    className={cn(\"flex flex-col gap-8 p-4\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ConversationEmptyStateProps = ComponentProps<\"div\"> & {\r\n  title?: string;\r\n  description?: string;\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport const ConversationEmptyState = ({\r\n  className,\r\n  title = \"No messages yet\",\r\n  description = \"Start a conversation to see messages here\",\r\n  icon,\r\n  children,\r\n  ...props\r\n}: ConversationEmptyStateProps) => (\r\n  <div\r\n    className={cn(\r\n      \"flex size-full flex-col items-center justify-center gap-3 p-8 text-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children ?? (\r\n      <>\r\n        {icon && <div className=\"text-muted-foreground\">{icon}</div>}\r\n        <div className=\"space-y-1\">\r\n          <h3 className=\"font-medium text-sm\">{title}</h3>\r\n          {description && (\r\n            <p className=\"text-muted-foreground text-sm\">{description}</p>\r\n          )}\r\n        </div>\r\n      </>\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport type ConversationScrollButtonProps = ComponentProps<typeof Button>;\r\n\r\nexport const ConversationScrollButton = ({\r\n  className,\r\n  ...props\r\n}: ConversationScrollButtonProps) => {\r\n  const { isAtBottom, scrollToBottom } = useStickToBottomContext();\r\n\r\n  const handleScrollToBottom = useCallback(() => {\r\n    scrollToBottom();\r\n  }, [scrollToBottom]);\r\n\r\n  return (\r\n    !isAtBottom && (\r\n      <Button\r\n        className={cn(\r\n          \"absolute bottom-4 left-[50%] translate-x-[-50%] rounded-full\",\r\n          className\r\n        )}\r\n        onClick={handleScrollToBottom}\r\n        size=\"icon\"\r\n        type=\"button\"\r\n        variant=\"outline\"\r\n        {...props}\r\n      >\r\n        <ArrowDownIcon className=\"size-4\" />\r\n      </Button>\r\n    )\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\conversation.tsx"
    },
    {
      "path": "components\\ai-elements\\edge.tsx",
      "content": "import {\r\n  BaseEdge,\r\n  type EdgeProps,\r\n  getBezierPath,\r\n  getSimpleBezierPath,\r\n  type InternalNode,\r\n  type Node,\r\n  Position,\r\n  useInternalNode,\r\n} from \"@xyflow/react\";\r\n\r\nconst Temporary = ({\r\n  id,\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  sourcePosition,\r\n  targetPosition,\r\n}: EdgeProps) => {\r\n  const [edgePath] = getSimpleBezierPath({\r\n    sourceX,\r\n    sourceY,\r\n    sourcePosition,\r\n    targetX,\r\n    targetY,\r\n    targetPosition,\r\n  });\r\n\r\n  return (\r\n    <BaseEdge\r\n      className=\"stroke-1 stroke-ring\"\r\n      id={id}\r\n      path={edgePath}\r\n      style={{\r\n        strokeDasharray: \"5, 5\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst getHandleCoordsByPosition = (\r\n  node: InternalNode<Node>,\r\n  handlePosition: Position\r\n) => {\r\n  // Choose the handle type based on position - Left is for target, Right is for source\r\n  const handleType = handlePosition === Position.Left ? \"target\" : \"source\";\r\n\r\n  const handle = node.internals.handleBounds?.[handleType]?.find(\r\n    (h) => h.position === handlePosition\r\n  );\r\n\r\n  if (!handle) {\r\n    return [0, 0] as const;\r\n  }\r\n\r\n  let offsetX = handle.width / 2;\r\n  let offsetY = handle.height / 2;\r\n\r\n  // this is a tiny detail to make the markerEnd of an edge visible.\r\n  // The handle position that gets calculated has the origin top-left, so depending which side we are using, we add a little offset\r\n  // when the handlePosition is Position.Right for example, we need to add an offset as big as the handle itself in order to get the correct position\r\n  switch (handlePosition) {\r\n    case Position.Left:\r\n      offsetX = 0;\r\n      break;\r\n    case Position.Right:\r\n      offsetX = handle.width;\r\n      break;\r\n    case Position.Top:\r\n      offsetY = 0;\r\n      break;\r\n    case Position.Bottom:\r\n      offsetY = handle.height;\r\n      break;\r\n    default:\r\n      throw new Error(`Invalid handle position: ${handlePosition}`);\r\n  }\r\n\r\n  const x = node.internals.positionAbsolute.x + handle.x + offsetX;\r\n  const y = node.internals.positionAbsolute.y + handle.y + offsetY;\r\n\r\n  return [x, y] as const;\r\n};\r\n\r\nconst getEdgeParams = (\r\n  source: InternalNode<Node>,\r\n  target: InternalNode<Node>\r\n) => {\r\n  const sourcePos = Position.Right;\r\n  const [sx, sy] = getHandleCoordsByPosition(source, sourcePos);\r\n  const targetPos = Position.Left;\r\n  const [tx, ty] = getHandleCoordsByPosition(target, targetPos);\r\n\r\n  return {\r\n    sx,\r\n    sy,\r\n    tx,\r\n    ty,\r\n    sourcePos,\r\n    targetPos,\r\n  };\r\n};\r\n\r\nconst Animated = ({ id, source, target, markerEnd, style }: EdgeProps) => {\r\n  const sourceNode = useInternalNode(source);\r\n  const targetNode = useInternalNode(target);\r\n\r\n  if (!(sourceNode && targetNode)) {\r\n    return null;\r\n  }\r\n\r\n  const { sx, sy, tx, ty, sourcePos, targetPos } = getEdgeParams(\r\n    sourceNode,\r\n    targetNode\r\n  );\r\n\r\n  const [edgePath] = getBezierPath({\r\n    sourceX: sx,\r\n    sourceY: sy,\r\n    sourcePosition: sourcePos,\r\n    targetX: tx,\r\n    targetY: ty,\r\n    targetPosition: targetPos,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <BaseEdge id={id} markerEnd={markerEnd} path={edgePath} style={style} />\r\n      <circle fill=\"var(--primary)\" r=\"4\">\r\n        <animateMotion dur=\"2s\" path={edgePath} repeatCount=\"indefinite\" />\r\n      </circle>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const Edge = {\r\n  Temporary,\r\n  Animated,\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\edge.tsx"
    },
    {
      "path": "components\\ai-elements\\image.tsx",
      "content": "import { cn } from \"@/lib/utils\";\r\nimport type { Experimental_GeneratedImage } from \"ai\";\r\n\r\nexport type ImageProps = Experimental_GeneratedImage & {\r\n  className?: string;\r\n  alt?: string;\r\n};\r\n\r\nexport const Image = ({\r\n  base64,\r\n  uint8Array,\r\n  mediaType,\r\n  ...props\r\n}: ImageProps) => (\r\n  <img\r\n    {...props}\r\n    alt={props.alt}\r\n    className={cn(\r\n      \"h-auto max-w-full overflow-hidden rounded-md\",\r\n      props.className\r\n    )}\r\n    src={`data:${mediaType};base64,${base64}`}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\image.tsx"
    },
    {
      "path": "components\\ai-elements\\loader.tsx",
      "content": "import { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"react\";\r\n\r\ntype LoaderIconProps = {\r\n  size?: number;\r\n};\r\n\r\nconst LoaderIcon = ({ size = 16 }: LoaderIconProps) => (\r\n  <svg\r\n    height={size}\r\n    strokeLinejoin=\"round\"\r\n    style={{ color: \"currentcolor\" }}\r\n    viewBox=\"0 0 16 16\"\r\n    width={size}\r\n  >\r\n    <title>Loader</title>\r\n    <g clipPath=\"url(#clip0_2393_1490)\">\r\n      <path d=\"M8 0V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\r\n      <path\r\n        d=\"M8 16V12\"\r\n        opacity=\"0.5\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M3.29773 1.52783L5.64887 4.7639\"\r\n        opacity=\"0.9\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M12.7023 1.52783L10.3511 4.7639\"\r\n        opacity=\"0.1\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M12.7023 14.472L10.3511 11.236\"\r\n        opacity=\"0.4\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M3.29773 14.472L5.64887 11.236\"\r\n        opacity=\"0.6\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M15.6085 5.52783L11.8043 6.7639\"\r\n        opacity=\"0.2\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M0.391602 10.472L4.19583 9.23598\"\r\n        opacity=\"0.7\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M15.6085 10.4722L11.8043 9.2361\"\r\n        opacity=\"0.3\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n      <path\r\n        d=\"M0.391602 5.52783L4.19583 6.7639\"\r\n        opacity=\"0.8\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"1.5\"\r\n      />\r\n    </g>\r\n    <defs>\r\n      <clipPath id=\"clip0_2393_1490\">\r\n        <rect fill=\"white\" height=\"16\" width=\"16\" />\r\n      </clipPath>\r\n    </defs>\r\n  </svg>\r\n);\r\n\r\nexport type LoaderProps = HTMLAttributes<HTMLDivElement> & {\r\n  size?: number;\r\n};\r\n\r\nexport const Loader = ({ className, size = 16, ...props }: LoaderProps) => (\r\n  <div\r\n    className={cn(\r\n      \"inline-flex animate-spin items-center justify-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <LoaderIcon size={size} />\r\n  </div>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\loader.tsx"
    },
    {
      "path": "components\\ai-elements\\message.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  ButtonGroup,\r\n  ButtonGroupText,\r\n} from \"@/components/ui/button-group\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { FileUIPart, UIMessage } from \"ai\";\r\nimport {\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n  PaperclipIcon,\r\n  XIcon,\r\n} from \"lucide-react\";\r\nimport type { ComponentProps, HTMLAttributes, ReactElement } from \"react\";\r\nimport { createContext, memo, useContext, useEffect, useState } from \"react\";\r\nimport { Streamdown } from \"streamdown\";\r\n\r\nexport type MessageProps = HTMLAttributes<HTMLDivElement> & {\r\n  from: UIMessage[\"role\"];\r\n};\r\n\r\nexport const Message = ({ className, from, ...props }: MessageProps) => (\r\n  <div\r\n    className={cn(\r\n      \"group flex w-full max-w-[80%] flex-col gap-2\",\r\n      from === \"user\" ? \"is-user ml-auto justify-end\" : \"is-assistant\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type MessageContentProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const MessageContent = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: MessageContentProps) => (\r\n  <div\r\n    className={cn(\r\n      \"is-user:dark flex w-fit flex-col gap-2 overflow-hidden text-sm\",\r\n      \"group-[.is-user]:ml-auto group-[.is-user]:rounded-lg group-[.is-user]:bg-secondary group-[.is-user]:px-4 group-[.is-user]:py-3 group-[.is-user]:text-foreground\",\r\n      \"group-[.is-assistant]:text-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type MessageActionsProps = ComponentProps<\"div\">;\r\n\r\nexport const MessageActions = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: MessageActionsProps) => (\r\n  <div className={cn(\"flex items-center gap-1\", className)} {...props}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type MessageActionProps = ComponentProps<typeof Button> & {\r\n  tooltip?: string;\r\n  label?: string;\r\n};\r\n\r\nexport const MessageAction = ({\r\n  tooltip,\r\n  children,\r\n  label,\r\n  variant = \"ghost\",\r\n  size = \"icon-sm\",\r\n  ...props\r\n}: MessageActionProps) => {\r\n  const button = (\r\n    <Button size={size} type=\"button\" variant={variant} {...props}>\r\n      {children}\r\n      <span className=\"sr-only\">{label || tooltip}</span>\r\n    </Button>\r\n  );\r\n\r\n  if (tooltip) {\r\n    return (\r\n      <TooltipProvider>\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n          <TooltipContent>\r\n            <p>{tooltip}</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      </TooltipProvider>\r\n    );\r\n  }\r\n\r\n  return button;\r\n};\r\n\r\ntype MessageBranchContextType = {\r\n  currentBranch: number;\r\n  totalBranches: number;\r\n  goToPrevious: () => void;\r\n  goToNext: () => void;\r\n  branches: ReactElement[];\r\n  setBranches: (branches: ReactElement[]) => void;\r\n};\r\n\r\nconst MessageBranchContext = createContext<MessageBranchContextType | null>(\r\n  null\r\n);\r\n\r\nconst useMessageBranch = () => {\r\n  const context = useContext(MessageBranchContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\r\n      \"MessageBranch components must be used within MessageBranch\"\r\n    );\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport type MessageBranchProps = HTMLAttributes<HTMLDivElement> & {\r\n  defaultBranch?: number;\r\n  onBranchChange?: (branchIndex: number) => void;\r\n};\r\n\r\nexport const MessageBranch = ({\r\n  defaultBranch = 0,\r\n  onBranchChange,\r\n  className,\r\n  ...props\r\n}: MessageBranchProps) => {\r\n  const [currentBranch, setCurrentBranch] = useState(defaultBranch);\r\n  const [branches, setBranches] = useState<ReactElement[]>([]);\r\n\r\n  const handleBranchChange = (newBranch: number) => {\r\n    setCurrentBranch(newBranch);\r\n    onBranchChange?.(newBranch);\r\n  };\r\n\r\n  const goToPrevious = () => {\r\n    const newBranch =\r\n      currentBranch > 0 ? currentBranch - 1 : branches.length - 1;\r\n    handleBranchChange(newBranch);\r\n  };\r\n\r\n  const goToNext = () => {\r\n    const newBranch =\r\n      currentBranch < branches.length - 1 ? currentBranch + 1 : 0;\r\n    handleBranchChange(newBranch);\r\n  };\r\n\r\n  const contextValue: MessageBranchContextType = {\r\n    currentBranch,\r\n    totalBranches: branches.length,\r\n    goToPrevious,\r\n    goToNext,\r\n    branches,\r\n    setBranches,\r\n  };\r\n\r\n  return (\r\n    <MessageBranchContext.Provider value={contextValue}>\r\n      <div\r\n        className={cn(\"grid w-full gap-2 [&>div]:pb-0\", className)}\r\n        {...props}\r\n      />\r\n    </MessageBranchContext.Provider>\r\n  );\r\n};\r\n\r\nexport type MessageBranchContentProps = HTMLAttributes<HTMLDivElement>;\r\n\r\nexport const MessageBranchContent = ({\r\n  children,\r\n  ...props\r\n}: MessageBranchContentProps) => {\r\n  const { currentBranch, setBranches, branches } = useMessageBranch();\r\n  const childrenArray = Array.isArray(children) ? children : [children];\r\n\r\n  // Use useEffect to update branches when they change\r\n  useEffect(() => {\r\n    if (branches.length !== childrenArray.length) {\r\n      setBranches(childrenArray);\r\n    }\r\n  }, [childrenArray, branches, setBranches]);\r\n\r\n  return childrenArray.map((branch, index) => (\r\n    <div\r\n      className={cn(\r\n        \"grid gap-2 overflow-hidden [&>div]:pb-0\",\r\n        index === currentBranch ? \"block\" : \"hidden\"\r\n      )}\r\n      key={branch.key}\r\n      {...props}\r\n    >\r\n      {branch}\r\n    </div>\r\n  ));\r\n};\r\n\r\nexport type MessageBranchSelectorProps = HTMLAttributes<HTMLDivElement> & {\r\n  from: UIMessage[\"role\"];\r\n};\r\n\r\nexport const MessageBranchSelector = ({\r\n  className,\r\n  from,\r\n  ...props\r\n}: MessageBranchSelectorProps) => {\r\n  const { totalBranches } = useMessageBranch();\r\n\r\n  // Don't render if there's only one branch\r\n  if (totalBranches <= 1) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ButtonGroup\r\n      className=\"[&>*:not(:first-child)]:rounded-l-md [&>*:not(:last-child)]:rounded-r-md\"\r\n      orientation=\"horizontal\"\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport type MessageBranchPreviousProps = ComponentProps<typeof Button>;\r\n\r\nexport const MessageBranchPrevious = ({\r\n  children,\r\n  ...props\r\n}: MessageBranchPreviousProps) => {\r\n  const { goToPrevious, totalBranches } = useMessageBranch();\r\n\r\n  return (\r\n    <Button\r\n      aria-label=\"Previous branch\"\r\n      disabled={totalBranches <= 1}\r\n      onClick={goToPrevious}\r\n      size=\"icon-sm\"\r\n      type=\"button\"\r\n      variant=\"ghost\"\r\n      {...props}\r\n    >\r\n      {children ?? <ChevronLeftIcon size={14} />}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport type MessageBranchNextProps = ComponentProps<typeof Button>;\r\n\r\nexport const MessageBranchNext = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: MessageBranchNextProps) => {\r\n  const { goToNext, totalBranches } = useMessageBranch();\r\n\r\n  return (\r\n    <Button\r\n      aria-label=\"Next branch\"\r\n      disabled={totalBranches <= 1}\r\n      onClick={goToNext}\r\n      size=\"icon-sm\"\r\n      type=\"button\"\r\n      variant=\"ghost\"\r\n      {...props}\r\n    >\r\n      {children ?? <ChevronRightIcon size={14} />}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport type MessageBranchPageProps = HTMLAttributes<HTMLSpanElement>;\r\n\r\nexport const MessageBranchPage = ({\r\n  className,\r\n  ...props\r\n}: MessageBranchPageProps) => {\r\n  const { currentBranch, totalBranches } = useMessageBranch();\r\n\r\n  return (\r\n    <ButtonGroupText\r\n      className={cn(\r\n        \"border-none bg-transparent text-muted-foreground shadow-none\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {currentBranch + 1} of {totalBranches}\r\n    </ButtonGroupText>\r\n  );\r\n};\r\n\r\nexport type MessageResponseProps = ComponentProps<typeof Streamdown>;\r\n\r\nexport const MessageResponse = memo(\r\n  ({ className, ...props }: MessageResponseProps) => (\r\n    <Streamdown\r\n      className={cn(\r\n        \"size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n  (prevProps, nextProps) => prevProps.children === nextProps.children\r\n);\r\n\r\nMessageResponse.displayName = \"MessageResponse\";\r\n\r\nexport type MessageAttachmentProps = HTMLAttributes<HTMLDivElement> & {\r\n  data: FileUIPart;\r\n  className?: string;\r\n  onRemove?: () => void;\r\n};\r\n\r\nexport function MessageAttachment({\r\n  data,\r\n  className,\r\n  onRemove,\r\n  ...props\r\n}: MessageAttachmentProps) {\r\n  const filename = data.filename || \"\";\r\n  const mediaType =\r\n    data.mediaType?.startsWith(\"image/\") && data.url ? \"image\" : \"file\";\r\n  const isImage = mediaType === \"image\";\r\n  const attachmentLabel = filename || (isImage ? \"Image\" : \"Attachment\");\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"group relative size-24 overflow-hidden rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isImage ? (\r\n        <>\r\n          <img\r\n            alt={filename || \"attachment\"}\r\n            className=\"size-full object-cover\"\r\n            height={100}\r\n            src={data.url}\r\n            width={100}\r\n          />\r\n          {onRemove && (\r\n            <Button\r\n              aria-label=\"Remove attachment\"\r\n              className=\"absolute top-2 right-2 size-6 rounded-full bg-background/80 p-0 opacity-0 backdrop-blur-sm transition-opacity hover:bg-background group-hover:opacity-100 [&>svg]:size-3\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onRemove();\r\n              }}\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n            >\r\n              <XIcon />\r\n              <span className=\"sr-only\">Remove</span>\r\n            </Button>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Tooltip>\r\n            <TooltipTrigger asChild>\r\n              <div className=\"flex size-full shrink-0 items-center justify-center rounded-lg bg-muted text-muted-foreground\">\r\n                <PaperclipIcon className=\"size-4\" />\r\n              </div>\r\n            </TooltipTrigger>\r\n            <TooltipContent>\r\n              <p>{attachmentLabel}</p>\r\n            </TooltipContent>\r\n          </Tooltip>\r\n          {onRemove && (\r\n            <Button\r\n              aria-label=\"Remove attachment\"\r\n              className=\"size-6 shrink-0 rounded-full p-0 opacity-0 transition-opacity hover:bg-accent group-hover:opacity-100 [&>svg]:size-3\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onRemove();\r\n              }}\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n            >\r\n              <XIcon />\r\n              <span className=\"sr-only\">Remove</span>\r\n            </Button>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type MessageAttachmentsProps = ComponentProps<\"div\">;\r\n\r\nexport function MessageAttachments({\r\n  children,\r\n  className,\r\n  ...props\r\n}: MessageAttachmentsProps) {\r\n  if (!children) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"ml-auto flex w-fit flex-wrap items-start gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type MessageToolbarProps = ComponentProps<\"div\">;\r\n\r\nexport const MessageToolbar = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: MessageToolbarProps) => (\r\n  <div\r\n    className={cn(\r\n      \"mt-4 flex w-full items-center justify-between gap-4\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\message.tsx"
    },
    {
      "path": "components\\ai-elements\\model-selector.tsx",
      "content": "import {\r\n  Command,\r\n  CommandDialog,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n  CommandShortcut,\r\n} from \"@/components/ui/command\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { ReactNode, ComponentProps } from \"react\";\r\n\r\nexport type ModelSelectorProps = ComponentProps<typeof Dialog>;\r\n\r\nexport const ModelSelector = (props: ModelSelectorProps) => (\r\n  <Dialog {...props} />\r\n);\r\n\r\nexport type ModelSelectorTriggerProps = ComponentProps<typeof DialogTrigger>;\r\n\r\nexport const ModelSelectorTrigger = (props: ModelSelectorTriggerProps) => (\r\n  <DialogTrigger {...props} />\r\n);\r\n\r\nexport type ModelSelectorContentProps = ComponentProps<typeof DialogContent> & {\r\n  title?: ReactNode;\r\n};\r\n\r\nexport const ModelSelectorContent = ({\r\n  className,\r\n  children,\r\n  title = \"Model Selector\",\r\n  ...props\r\n}: ModelSelectorContentProps) => (\r\n  <DialogContent className={cn(\"p-0\", className)} {...props}>\r\n    <DialogTitle className=\"sr-only\">{title}</DialogTitle>\r\n    <Command className=\"**:data-[slot=command-input-wrapper]:h-auto\">\r\n      {children}\r\n    </Command>\r\n  </DialogContent>\r\n);\r\n\r\nexport type ModelSelectorDialogProps = ComponentProps<typeof CommandDialog>;\r\n\r\nexport const ModelSelectorDialog = (props: ModelSelectorDialogProps) => (\r\n  <CommandDialog {...props} />\r\n);\r\n\r\nexport type ModelSelectorInputProps = ComponentProps<typeof CommandInput>;\r\n\r\nexport const ModelSelectorInput = ({\r\n  className,\r\n  ...props\r\n}: ModelSelectorInputProps) => (\r\n  <CommandInput className={cn(\"h-auto py-3.5\", className)} {...props} />\r\n);\r\n\r\nexport type ModelSelectorListProps = ComponentProps<typeof CommandList>;\r\n\r\nexport const ModelSelectorList = (props: ModelSelectorListProps) => (\r\n  <CommandList {...props} />\r\n);\r\n\r\nexport type ModelSelectorEmptyProps = ComponentProps<typeof CommandEmpty>;\r\n\r\nexport const ModelSelectorEmpty = (props: ModelSelectorEmptyProps) => (\r\n  <CommandEmpty {...props} />\r\n);\r\n\r\nexport type ModelSelectorGroupProps = ComponentProps<typeof CommandGroup>;\r\n\r\nexport const ModelSelectorGroup = (props: ModelSelectorGroupProps) => (\r\n  <CommandGroup {...props} />\r\n);\r\n\r\nexport type ModelSelectorItemProps = ComponentProps<typeof CommandItem>;\r\n\r\nexport const ModelSelectorItem = (props: ModelSelectorItemProps) => (\r\n  <CommandItem {...props} />\r\n);\r\n\r\nexport type ModelSelectorShortcutProps = ComponentProps<typeof CommandShortcut>;\r\n\r\nexport const ModelSelectorShortcut = (props: ModelSelectorShortcutProps) => (\r\n  <CommandShortcut {...props} />\r\n);\r\n\r\nexport type ModelSelectorSeparatorProps = ComponentProps<\r\n  typeof CommandSeparator\r\n>;\r\n\r\nexport const ModelSelectorSeparator = (props: ModelSelectorSeparatorProps) => (\r\n  <CommandSeparator {...props} />\r\n);\r\n\r\nexport type ModelSelectorLogoProps = Omit<\r\n  ComponentProps<\"img\">,\r\n  \"src\" | \"alt\"\r\n> & {\r\n  provider:\r\n    | \"moonshotai-cn\"\r\n    | \"lucidquery\"\r\n    | \"moonshotai\"\r\n    | \"zai-coding-plan\"\r\n    | \"alibaba\"\r\n    | \"xai\"\r\n    | \"vultr\"\r\n    | \"nvidia\"\r\n    | \"upstage\"\r\n    | \"groq\"\r\n    | \"github-copilot\"\r\n    | \"mistral\"\r\n    | \"vercel\"\r\n    | \"nebius\"\r\n    | \"deepseek\"\r\n    | \"alibaba-cn\"\r\n    | \"google-vertex-anthropic\"\r\n    | \"venice\"\r\n    | \"chutes\"\r\n    | \"cortecs\"\r\n    | \"github-models\"\r\n    | \"togetherai\"\r\n    | \"azure\"\r\n    | \"baseten\"\r\n    | \"huggingface\"\r\n    | \"opencode\"\r\n    | \"fastrouter\"\r\n    | \"google\"\r\n    | \"google-vertex\"\r\n    | \"cloudflare-workers-ai\"\r\n    | \"inception\"\r\n    | \"wandb\"\r\n    | \"openai\"\r\n    | \"zhipuai-coding-plan\"\r\n    | \"perplexity\"\r\n    | \"openrouter\"\r\n    | \"zenmux\"\r\n    | \"v0\"\r\n    | \"iflowcn\"\r\n    | \"synthetic\"\r\n    | \"deepinfra\"\r\n    | \"zhipuai\"\r\n    | \"submodel\"\r\n    | \"zai\"\r\n    | \"inference\"\r\n    | \"requesty\"\r\n    | \"morph\"\r\n    | \"lmstudio\"\r\n    | \"anthropic\"\r\n    | \"aihubmix\"\r\n    | \"fireworks-ai\"\r\n    | \"modelscope\"\r\n    | \"llama\"\r\n    | \"scaleway\"\r\n    | \"amazon-bedrock\"\r\n    | \"cerebras\"\r\n    | (string & {});\r\n};\r\n\r\nexport const ModelSelectorLogo = ({\r\n  provider,\r\n  className,\r\n  ...props\r\n}: ModelSelectorLogoProps) => (\r\n  <img\r\n    {...props}\r\n    alt={`${provider} logo`}\r\n    className={cn(\"size-3\", className)}\r\n    height={12}\r\n    src={`https://models.dev/logos/${provider}.svg`}\r\n    width={12}\r\n  />\r\n);\r\n\r\nexport type ModelSelectorLogoGroupProps = ComponentProps<\"div\">;\r\n\r\nexport const ModelSelectorLogoGroup = ({\r\n  className,\r\n  ...props\r\n}: ModelSelectorLogoGroupProps) => (\r\n  <div\r\n    className={cn(\r\n      \"-space-x-1 flex shrink-0 items-center [&>img]:rounded-full [&>img]:bg-background [&>img]:p-px [&>img]:ring-1 [&>img]:ring-border\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type ModelSelectorNameProps = ComponentProps<\"span\">;\r\n\r\nexport const ModelSelectorName = ({\r\n  className,\r\n  ...props\r\n}: ModelSelectorNameProps) => (\r\n  <span className={cn(\"flex-1 truncate text-left\", className)} {...props} />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\model-selector.tsx"
    },
    {
      "path": "components\\ai-elements\\node.tsx",
      "content": "import {\r\n  Card,\r\n  CardAction,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Handle, Position } from \"@xyflow/react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type NodeProps = ComponentProps<typeof Card> & {\r\n  handles: {\r\n    target: boolean;\r\n    source: boolean;\r\n  };\r\n};\r\n\r\nexport const Node = ({ handles, className, ...props }: NodeProps) => (\r\n  <Card\r\n    className={cn(\r\n      \"node-container relative size-full h-auto w-sm gap-0 rounded-md p-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {handles.target && <Handle position={Position.Left} type=\"target\" />}\r\n    {handles.source && <Handle position={Position.Right} type=\"source\" />}\r\n    {props.children}\r\n  </Card>\r\n);\r\n\r\nexport type NodeHeaderProps = ComponentProps<typeof CardHeader>;\r\n\r\nexport const NodeHeader = ({ className, ...props }: NodeHeaderProps) => (\r\n  <CardHeader\r\n    className={cn(\"gap-0.5 rounded-t-md border-b bg-secondary p-3!\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type NodeTitleProps = ComponentProps<typeof CardTitle>;\r\n\r\nexport const NodeTitle = (props: NodeTitleProps) => <CardTitle {...props} />;\r\n\r\nexport type NodeDescriptionProps = ComponentProps<typeof CardDescription>;\r\n\r\nexport const NodeDescription = (props: NodeDescriptionProps) => (\r\n  <CardDescription {...props} />\r\n);\r\n\r\nexport type NodeActionProps = ComponentProps<typeof CardAction>;\r\n\r\nexport const NodeAction = (props: NodeActionProps) => <CardAction {...props} />;\r\n\r\nexport type NodeContentProps = ComponentProps<typeof CardContent>;\r\n\r\nexport const NodeContent = ({ className, ...props }: NodeContentProps) => (\r\n  <CardContent className={cn(\"p-3\", className)} {...props} />\r\n);\r\n\r\nexport type NodeFooterProps = ComponentProps<typeof CardFooter>;\r\n\r\nexport const NodeFooter = ({ className, ...props }: NodeFooterProps) => (\r\n  <CardFooter\r\n    className={cn(\"rounded-b-md border-t bg-secondary p-3!\", className)}\r\n    {...props}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\node.tsx"
    },
    {
      "path": "components\\ai-elements\\open-in-chat.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  ChevronDownIcon,\r\n  ExternalLinkIcon,\r\n  MessageCircleIcon,\r\n} from \"lucide-react\";\r\nimport { type ComponentProps, createContext, useContext } from \"react\";\r\n\r\nconst providers = {\r\n  github: {\r\n    title: \"Open in GitHub\",\r\n    createUrl: (url: string) => url,\r\n    icon: (\r\n      <svg fill=\"currentColor\" role=\"img\" viewBox=\"0 0 24 24\">\r\n        <title>GitHub</title>\r\n        <path d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\" />\r\n      </svg>\r\n    ),\r\n  },\r\n  scira: {\r\n    title: \"Open in Scira\",\r\n    createUrl: (q: string) =>\r\n      `https://scira.ai/?${new URLSearchParams({\r\n        q,\r\n      })}`,\r\n    icon: (\r\n      <svg\r\n        fill=\"none\"\r\n        height=\"934\"\r\n        viewBox=\"0 0 910 934\"\r\n        width=\"910\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <title>Scira AI</title>\r\n        <path\r\n          d=\"M647.664 197.775C569.13 189.049 525.5 145.419 516.774 66.8849C508.048 145.419 464.418 189.049 385.884 197.775C464.418 206.501 508.048 250.131 516.774 328.665C525.5 250.131 569.13 206.501 647.664 197.775Z\"\r\n          fill=\"currentColor\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"8\"\r\n        />\r\n        <path\r\n          d=\"M516.774 304.217C510.299 275.491 498.208 252.087 480.335 234.214C462.462 216.341 439.058 204.251 410.333 197.775C439.059 191.3 462.462 179.209 480.335 161.336C498.208 143.463 510.299 120.06 516.774 91.334C523.25 120.059 535.34 143.463 553.213 161.336C571.086 179.209 594.49 191.3 623.216 197.775C594.49 204.251 571.086 216.341 553.213 234.214C535.34 252.087 523.25 275.491 516.774 304.217Z\"\r\n          fill=\"currentColor\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"8\"\r\n        />\r\n        <path\r\n          d=\"M857.5 508.116C763.259 497.644 710.903 445.288 700.432 351.047C689.961 445.288 637.605 497.644 543.364 508.116C637.605 518.587 689.961 570.943 700.432 665.184C710.903 570.943 763.259 518.587 857.5 508.116Z\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"20\"\r\n        />\r\n        <path\r\n          d=\"M700.432 615.957C691.848 589.05 678.575 566.357 660.383 548.165C642.191 529.973 619.499 516.7 592.593 508.116C619.499 499.533 642.191 486.258 660.383 468.066C678.575 449.874 691.848 427.181 700.432 400.274C709.015 427.181 722.289 449.874 740.481 468.066C758.673 486.258 781.365 499.533 808.271 508.116C781.365 516.7 758.673 529.973 740.481 548.165C722.289 566.357 709.015 589.05 700.432 615.957Z\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"20\"\r\n        />\r\n        <path\r\n          d=\"M889.949 121.237C831.049 114.692 798.326 81.9698 791.782 23.0692C785.237 81.9698 752.515 114.692 693.614 121.237C752.515 127.781 785.237 160.504 791.782 219.404C798.326 160.504 831.049 127.781 889.949 121.237Z\"\r\n          fill=\"currentColor\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"8\"\r\n        />\r\n        <path\r\n          d=\"M791.782 196.795C786.697 176.937 777.869 160.567 765.16 147.858C752.452 135.15 736.082 126.322 716.226 121.237C736.082 116.152 752.452 107.324 765.16 94.6152C777.869 81.9065 786.697 65.5368 791.782 45.6797C796.867 65.5367 805.695 81.9066 818.403 94.6152C831.112 107.324 847.481 116.152 867.338 121.237C847.481 126.322 831.112 135.15 818.403 147.858C805.694 160.567 796.867 176.937 791.782 196.795Z\"\r\n          fill=\"currentColor\"\r\n          stroke=\"currentColor\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"8\"\r\n        />\r\n        <path\r\n          d=\"M760.632 764.337C720.719 814.616 669.835 855.1 611.872 882.692C553.91 910.285 490.404 924.255 426.213 923.533C362.022 922.812 298.846 907.419 241.518 878.531C184.19 849.643 134.228 808.026 95.4548 756.863C56.6815 705.7 30.1238 646.346 17.8129 583.343C5.50207 520.339 7.76433 455.354 24.4266 393.359C41.089 331.364 71.7099 274.001 113.947 225.658C156.184 177.315 208.919 139.273 268.117 114.442\"\r\n          stroke=\"currentColor\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth=\"30\"\r\n        />\r\n      </svg>\r\n    ),\r\n  },\r\n  chatgpt: {\r\n    title: \"Open in ChatGPT\",\r\n    createUrl: (prompt: string) =>\r\n      `https://chatgpt.com/?${new URLSearchParams({\r\n        hints: \"search\",\r\n        prompt,\r\n      })}`,\r\n    icon: (\r\n      <svg\r\n        fill=\"currentColor\"\r\n        role=\"img\"\r\n        viewBox=\"0 0 24 24\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <title>OpenAI</title>\r\n        <path d=\"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z\" />\r\n      </svg>\r\n    ),\r\n  },\r\n  claude: {\r\n    title: \"Open in Claude\",\r\n    createUrl: (q: string) =>\r\n      `https://claude.ai/new?${new URLSearchParams({\r\n        q,\r\n      })}`,\r\n    icon: (\r\n      <svg\r\n        fill=\"currentColor\"\r\n        role=\"img\"\r\n        viewBox=\"0 0 12 12\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <title>Claude</title>\r\n        <path\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.3545 7.9775L4.7145 6.654L4.7545 6.539L4.7145 6.475H4.6L4.205 6.451L2.856 6.4145L1.6865 6.366L0.5535 6.305L0.268 6.2445L0 5.892L0.0275 5.716L0.2675 5.5555L0.6105 5.5855L1.3705 5.637L2.5095 5.716L3.3355 5.7645L4.56 5.892H4.7545L4.782 5.8135L4.715 5.7645L4.6635 5.716L3.4845 4.918L2.2085 4.074L1.5405 3.588L1.1785 3.3425L0.9965 3.1115L0.9175 2.6075L1.2455 2.2465L1.686 2.2765L1.7985 2.307L2.245 2.65L3.199 3.388L4.4445 4.3045L4.627 4.4565L4.6995 4.405L4.709 4.3685L4.627 4.2315L3.9495 3.0085L3.2265 1.7635L2.9045 1.2475L2.8195 0.938C2.78711 0.819128 2.76965 0.696687 2.7675 0.5735L3.1415 0.067L3.348 0L3.846 0.067L4.056 0.249L4.366 0.956L4.867 2.0705L5.6445 3.5855L5.8725 4.0345L5.994 4.4505L6.0395 4.578H6.1185V4.505L6.1825 3.652L6.301 2.6045L6.416 1.257L6.456 0.877L6.644 0.422L7.0175 0.176L7.3095 0.316L7.5495 0.6585L7.516 0.8805L7.373 1.806L7.0935 3.2575L6.9115 4.2285H7.0175L7.139 4.1075L7.6315 3.4545L8.4575 2.4225L8.8225 2.0125L9.2475 1.5605L9.521 1.345H10.0375L10.4175 1.9095L10.2475 2.4925L9.7155 3.166L9.275 3.737L8.643 4.587L8.248 5.267L8.2845 5.322L8.3785 5.312L9.8065 5.009L10.578 4.869L11.4985 4.7115L11.915 4.9055L11.9605 5.103L11.7965 5.5065L10.812 5.7495L9.6575 5.9805L7.938 6.387L7.917 6.402L7.9415 6.4325L8.716 6.5055L9.047 6.5235H9.858L11.368 6.636L11.763 6.897L12 7.216L11.9605 7.4585L11.353 7.7685L10.533 7.574L8.6185 7.119L7.9625 6.9545H7.8715V7.0095L8.418 7.5435L9.421 8.4485L10.6755 9.6135L10.739 9.9025L10.578 10.13L10.408 10.1055L9.3055 9.277L8.88 8.9035L7.917 8.0935H7.853V8.1785L8.075 8.503L9.2475 10.2635L9.3085 10.8035L9.2235 10.98L8.9195 11.0865L8.5855 11.0255L7.8985 10.063L7.191 8.9795L6.6195 8.008L6.5495 8.048L6.2125 11.675L6.0545 11.86L5.69 12L5.3865 11.7695L5.2255 11.396L5.3865 10.658L5.581 9.696L5.7385 8.931L5.8815 7.981L5.9665 7.665L5.9605 7.644L5.8905 7.653L5.1735 8.6365L4.0835 10.109L3.2205 11.0315L3.0135 11.1135L2.655 10.9285L2.6885 10.5975L2.889 10.303L4.083 8.785L4.803 7.844L5.268 7.301L5.265 7.222H5.2375L2.066 9.28L1.501 9.353L1.2575 9.125L1.288 8.752L1.4035 8.6305L2.3575 7.9745L2.3545 7.9775Z\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    ),\r\n  },\r\n  t3: {\r\n    title: \"Open in T3 Chat\",\r\n    createUrl: (q: string) =>\r\n      `https://t3.chat/new?${new URLSearchParams({\r\n        q,\r\n      })}`,\r\n    icon: <MessageCircleIcon />,\r\n  },\r\n  v0: {\r\n    title: \"Open in v0\",\r\n    createUrl: (q: string) =>\r\n      `https://v0.app?${new URLSearchParams({\r\n        q,\r\n      })}`,\r\n    icon: (\r\n      <svg\r\n        fill=\"currentColor\"\r\n        viewBox=\"0 0 147 70\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <title>v0</title>\r\n        <path d=\"M56 50.2031V14H70V60.1562C70 65.5928 65.5928 70 60.1562 70C57.5605 70 54.9982 68.9992 53.1562 67.1573L0 14H19.7969L56 50.2031Z\" />\r\n        <path d=\"M147 56H133V23.9531L100.953 56H133V70H96.6875C85.8144 70 77 61.1856 77 50.3125V14H91V46.1562L123.156 14H91V0H127.312C138.186 0 147 8.81439 147 19.6875V56Z\" />\r\n      </svg>\r\n    ),\r\n  },\r\n  cursor: {\r\n    title: \"Open in Cursor\",\r\n    createUrl: (text: string) => {\r\n      const url = new URL(\"https://cursor.com/link/prompt\");\r\n      url.searchParams.set(\"text\", text);\r\n      return url.toString();\r\n    },\r\n    icon: (\r\n      <svg\r\n        version=\"1.1\"\r\n        viewBox=\"0 0 466.73 532.09\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <title>Cursor</title>\r\n        <path\r\n          d=\"M457.43,125.94L244.42,2.96c-6.84-3.95-15.28-3.95-22.12,0L9.3,125.94c-5.75,3.32-9.3,9.46-9.3,16.11v247.99c0,6.65,3.55,12.79,9.3,16.11l213.01,122.98c6.84,3.95,15.28,3.95,22.12,0l213.01-122.98c5.75-3.32,9.3-9.46,9.3-16.11v-247.99c0-6.65-3.55-12.79-9.3-16.11h-.01ZM444.05,151.99l-205.63,356.16c-1.39,2.4-5.06,1.42-5.06-1.36v-233.21c0-4.66-2.49-8.97-6.53-11.31L24.87,145.67c-2.4-1.39-1.42-5.06,1.36-5.06h411.26c5.84,0,9.49,6.33,6.57,11.39h-.01Z\"\r\n          fill=\"currentColor\"\r\n        />\r\n      </svg>\r\n    ),\r\n  },\r\n};\r\n\r\nconst OpenInContext = createContext<{ query: string } | undefined>(undefined);\r\n\r\nconst useOpenInContext = () => {\r\n  const context = useContext(OpenInContext);\r\n  if (!context) {\r\n    throw new Error(\"OpenIn components must be used within an OpenIn provider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport type OpenInProps = ComponentProps<typeof DropdownMenu> & {\r\n  query: string;\r\n};\r\n\r\nexport const OpenIn = ({ query, ...props }: OpenInProps) => (\r\n  <OpenInContext.Provider value={{ query }}>\r\n    <DropdownMenu {...props} />\r\n  </OpenInContext.Provider>\r\n);\r\n\r\nexport type OpenInContentProps = ComponentProps<typeof DropdownMenuContent>;\r\n\r\nexport const OpenInContent = ({ className, ...props }: OpenInContentProps) => (\r\n  <DropdownMenuContent\r\n    align=\"start\"\r\n    className={cn(\"w-[240px]\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type OpenInItemProps = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInItem = (props: OpenInItemProps) => (\r\n  <DropdownMenuItem {...props} />\r\n);\r\n\r\nexport type OpenInLabelProps = ComponentProps<typeof DropdownMenuLabel>;\r\n\r\nexport const OpenInLabel = (props: OpenInLabelProps) => (\r\n  <DropdownMenuLabel {...props} />\r\n);\r\n\r\nexport type OpenInSeparatorProps = ComponentProps<typeof DropdownMenuSeparator>;\r\n\r\nexport const OpenInSeparator = (props: OpenInSeparatorProps) => (\r\n  <DropdownMenuSeparator {...props} />\r\n);\r\n\r\nexport type OpenInTriggerProps = ComponentProps<typeof DropdownMenuTrigger>;\r\n\r\nexport const OpenInTrigger = ({ children, ...props }: OpenInTriggerProps) => (\r\n  <DropdownMenuTrigger {...props} asChild>\r\n    {children ?? (\r\n      <Button type=\"button\" variant=\"outline\">\r\n        Open in chat\r\n        <ChevronDownIcon className=\"size-4\" />\r\n      </Button>\r\n    )}\r\n  </DropdownMenuTrigger>\r\n);\r\n\r\nexport type OpenInChatGPTProps = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInChatGPT = (props: OpenInChatGPTProps) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.chatgpt.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.chatgpt.icon}</span>\r\n        <span className=\"flex-1\">{providers.chatgpt.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n\r\nexport type OpenInClaudeProps = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInClaude = (props: OpenInClaudeProps) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.claude.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.claude.icon}</span>\r\n        <span className=\"flex-1\">{providers.claude.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n\r\nexport type OpenInT3Props = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInT3 = (props: OpenInT3Props) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.t3.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.t3.icon}</span>\r\n        <span className=\"flex-1\">{providers.t3.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n\r\nexport type OpenInSciraProps = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInScira = (props: OpenInSciraProps) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.scira.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.scira.icon}</span>\r\n        <span className=\"flex-1\">{providers.scira.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n\r\nexport type OpenInv0Props = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInv0 = (props: OpenInv0Props) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.v0.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.v0.icon}</span>\r\n        <span className=\"flex-1\">{providers.v0.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n\r\nexport type OpenInCursorProps = ComponentProps<typeof DropdownMenuItem>;\r\n\r\nexport const OpenInCursor = (props: OpenInCursorProps) => {\r\n  const { query } = useOpenInContext();\r\n  return (\r\n    <DropdownMenuItem asChild {...props}>\r\n      <a\r\n        className=\"flex items-center gap-2\"\r\n        href={providers.cursor.createUrl(query)}\r\n        rel=\"noopener\"\r\n        target=\"_blank\"\r\n      >\r\n        <span className=\"shrink-0\">{providers.cursor.icon}</span>\r\n        <span className=\"flex-1\">{providers.cursor.title}</span>\r\n        <ExternalLinkIcon className=\"size-4 shrink-0\" />\r\n      </a>\r\n    </DropdownMenuItem>\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\open-in-chat.tsx"
    },
    {
      "path": "components\\ai-elements\\panel.tsx",
      "content": "import { cn } from \"@/lib/utils\";\r\nimport { Panel as PanelPrimitive } from \"@xyflow/react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\ntype PanelProps = ComponentProps<typeof PanelPrimitive>;\r\n\r\nexport const Panel = ({ className, ...props }: PanelProps) => (\r\n  <PanelPrimitive\r\n    className={cn(\r\n      \"m-4 overflow-hidden rounded-md border bg-card p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\panel.tsx"
    },
    {
      "path": "components\\ai-elements\\queue.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ChevronDownIcon, PaperclipIcon } from \"lucide-react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type QueueMessagePart = {\r\n  type: string;\r\n  text?: string;\r\n  url?: string;\r\n  filename?: string;\r\n  mediaType?: string;\r\n};\r\n\r\nexport type QueueMessage = {\r\n  id: string;\r\n  parts: QueueMessagePart[];\r\n};\r\n\r\nexport type QueueTodo = {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  status?: \"pending\" | \"completed\";\r\n};\r\n\r\nexport type QueueItemProps = ComponentProps<\"li\">;\r\n\r\nexport const QueueItem = ({ className, ...props }: QueueItemProps) => (\r\n  <li\r\n    className={cn(\r\n      \"group flex flex-col gap-1 rounded-md px-3 py-1 text-sm transition-colors hover:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemIndicatorProps = ComponentProps<\"span\"> & {\r\n  completed?: boolean;\r\n};\r\n\r\nexport const QueueItemIndicator = ({\r\n  completed = false,\r\n  className,\r\n  ...props\r\n}: QueueItemIndicatorProps) => (\r\n  <span\r\n    className={cn(\r\n      \"mt-0.5 inline-block size-2.5 rounded-full border\",\r\n      completed\r\n        ? \"border-muted-foreground/20 bg-muted-foreground/10\"\r\n        : \"border-muted-foreground/50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemContentProps = ComponentProps<\"span\"> & {\r\n  completed?: boolean;\r\n};\r\n\r\nexport const QueueItemContent = ({\r\n  completed = false,\r\n  className,\r\n  ...props\r\n}: QueueItemContentProps) => (\r\n  <span\r\n    className={cn(\r\n      \"line-clamp-1 grow break-words\",\r\n      completed\r\n        ? \"text-muted-foreground/50 line-through\"\r\n        : \"text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemDescriptionProps = ComponentProps<\"div\"> & {\r\n  completed?: boolean;\r\n};\r\n\r\nexport const QueueItemDescription = ({\r\n  completed = false,\r\n  className,\r\n  ...props\r\n}: QueueItemDescriptionProps) => (\r\n  <div\r\n    className={cn(\r\n      \"ml-6 text-xs\",\r\n      completed\r\n        ? \"text-muted-foreground/40 line-through\"\r\n        : \"text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemActionsProps = ComponentProps<\"div\">;\r\n\r\nexport const QueueItemActions = ({\r\n  className,\r\n  ...props\r\n}: QueueItemActionsProps) => (\r\n  <div className={cn(\"flex gap-1\", className)} {...props} />\r\n);\r\n\r\nexport type QueueItemActionProps = Omit<\r\n  ComponentProps<typeof Button>,\r\n  \"variant\" | \"size\"\r\n>;\r\n\r\nexport const QueueItemAction = ({\r\n  className,\r\n  ...props\r\n}: QueueItemActionProps) => (\r\n  <Button\r\n    className={cn(\r\n      \"size-auto rounded p-1 text-muted-foreground opacity-0 transition-opacity hover:bg-muted-foreground/10 hover:text-foreground group-hover:opacity-100\",\r\n      className\r\n    )}\r\n    size=\"icon\"\r\n    type=\"button\"\r\n    variant=\"ghost\"\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemAttachmentProps = ComponentProps<\"div\">;\r\n\r\nexport const QueueItemAttachment = ({\r\n  className,\r\n  ...props\r\n}: QueueItemAttachmentProps) => (\r\n  <div className={cn(\"mt-1 flex flex-wrap gap-2\", className)} {...props} />\r\n);\r\n\r\nexport type QueueItemImageProps = ComponentProps<\"img\">;\r\n\r\nexport const QueueItemImage = ({\r\n  className,\r\n  ...props\r\n}: QueueItemImageProps) => (\r\n  <img\r\n    alt=\"\"\r\n    className={cn(\"h-8 w-8 rounded border object-cover\", className)}\r\n    height={32}\r\n    width={32}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type QueueItemFileProps = ComponentProps<\"span\">;\r\n\r\nexport const QueueItemFile = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: QueueItemFileProps) => (\r\n  <span\r\n    className={cn(\r\n      \"flex items-center gap-1 rounded border bg-muted px-2 py-1 text-xs\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <PaperclipIcon size={12} />\r\n    <span className=\"max-w-[100px] truncate\">{children}</span>\r\n  </span>\r\n);\r\n\r\nexport type QueueListProps = ComponentProps<typeof ScrollArea>;\r\n\r\nexport const QueueList = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: QueueListProps) => (\r\n  <ScrollArea className={cn(\"-mb-1 mt-2\", className)} {...props}>\r\n    <div className=\"max-h-40 pr-4\">\r\n      <ul>{children}</ul>\r\n    </div>\r\n  </ScrollArea>\r\n);\r\n\r\n// QueueSection - collapsible section container\r\nexport type QueueSectionProps = ComponentProps<typeof Collapsible>;\r\n\r\nexport const QueueSection = ({\r\n  className,\r\n  defaultOpen = true,\r\n  ...props\r\n}: QueueSectionProps) => (\r\n  <Collapsible className={cn(className)} defaultOpen={defaultOpen} {...props} />\r\n);\r\n\r\n// QueueSectionTrigger - section header/trigger\r\nexport type QueueSectionTriggerProps = ComponentProps<\"button\">;\r\n\r\nexport const QueueSectionTrigger = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: QueueSectionTriggerProps) => (\r\n  <CollapsibleTrigger asChild>\r\n    <button\r\n      className={cn(\r\n        \"group flex w-full items-center justify-between rounded-md bg-muted/40 px-3 py-2 text-left font-medium text-muted-foreground text-sm transition-colors hover:bg-muted\",\r\n        className\r\n      )}\r\n      type=\"button\"\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  </CollapsibleTrigger>\r\n);\r\n\r\n// QueueSectionLabel - label content with icon and count\r\nexport type QueueSectionLabelProps = ComponentProps<\"span\"> & {\r\n  count?: number;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport const QueueSectionLabel = ({\r\n  count,\r\n  label,\r\n  icon,\r\n  className,\r\n  ...props\r\n}: QueueSectionLabelProps) => (\r\n  <span className={cn(\"flex items-center gap-2\", className)} {...props}>\r\n    <ChevronDownIcon className=\"group-data-[state=closed]:-rotate-90 size-4 transition-transform\" />\r\n    {icon}\r\n    <span>\r\n      {count} {label}\r\n    </span>\r\n  </span>\r\n);\r\n\r\n// QueueSectionContent - collapsible content area\r\nexport type QueueSectionContentProps = ComponentProps<\r\n  typeof CollapsibleContent\r\n>;\r\n\r\nexport const QueueSectionContent = ({\r\n  className,\r\n  ...props\r\n}: QueueSectionContentProps) => (\r\n  <CollapsibleContent className={cn(className)} {...props} />\r\n);\r\n\r\nexport type QueueProps = ComponentProps<\"div\">;\r\n\r\nexport const Queue = ({ className, ...props }: QueueProps) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col gap-2 rounded-xl border border-border bg-background px-3 pt-2 pb-2 shadow-xs\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\queue.tsx"
    },
    {
      "path": "components\\ai-elements\\sources.tsx",
      "content": "\"use client\";\r\n\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { BookIcon, ChevronDownIcon } from \"lucide-react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type SourcesProps = ComponentProps<\"div\">;\r\n\r\nexport const Sources = ({ className, ...props }: SourcesProps) => (\r\n  <Collapsible\r\n    className={cn(\"not-prose mb-4 text-primary text-xs\", className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type SourcesTriggerProps = ComponentProps<typeof CollapsibleTrigger> & {\r\n  count: number;\r\n};\r\n\r\nexport const SourcesTrigger = ({\r\n  className,\r\n  count,\r\n  children,\r\n  ...props\r\n}: SourcesTriggerProps) => (\r\n  <CollapsibleTrigger\r\n    className={cn(\"flex items-center gap-2\", className)}\r\n    {...props}\r\n  >\r\n    {children ?? (\r\n      <>\r\n        <p className=\"font-medium\">Used {count} sources</p>\r\n        <ChevronDownIcon className=\"h-4 w-4\" />\r\n      </>\r\n    )}\r\n  </CollapsibleTrigger>\r\n);\r\n\r\nexport type SourcesContentProps = ComponentProps<typeof CollapsibleContent>;\r\n\r\nexport const SourcesContent = ({\r\n  className,\r\n  ...props\r\n}: SourcesContentProps) => (\r\n  <CollapsibleContent\r\n    className={cn(\r\n      \"mt-3 flex w-fit flex-col gap-2\",\r\n      \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 outline-none data-[state=closed]:animate-out data-[state=open]:animate-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport type SourceProps = ComponentProps<\"a\">;\r\n\r\nexport const Source = ({ href, title, children, ...props }: SourceProps) => (\r\n  <a\r\n    className=\"flex items-center gap-2\"\r\n    href={href}\r\n    rel=\"noreferrer\"\r\n    target=\"_blank\"\r\n    {...props}\r\n  >\r\n    {children ?? (\r\n      <>\r\n        <BookIcon className=\"h-4 w-4\" />\r\n        <span className=\"block font-medium\">{title}</span>\r\n      </>\r\n    )}\r\n  </a>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\sources.tsx"
    },
    {
      "path": "components\\ai-elements\\suggestion.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  ScrollArea,\r\n  ScrollBar,\r\n} from \"@/components/ui/scroll-area\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type SuggestionsProps = ComponentProps<typeof ScrollArea>;\r\n\r\nexport const Suggestions = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: SuggestionsProps) => (\r\n  <ScrollArea className=\"w-full overflow-x-auto whitespace-nowrap\" {...props}>\r\n    <div className={cn(\"flex w-max flex-nowrap items-center gap-2\", className)}>\r\n      {children}\r\n    </div>\r\n    <ScrollBar className=\"hidden\" orientation=\"horizontal\" />\r\n  </ScrollArea>\r\n);\r\n\r\nexport type SuggestionProps = Omit<ComponentProps<typeof Button>, \"onClick\"> & {\r\n  suggestion: string;\r\n  onClick?: (suggestion: string) => void;\r\n};\r\n\r\nexport const Suggestion = ({\r\n  suggestion,\r\n  onClick,\r\n  className,\r\n  variant = \"outline\",\r\n  size = \"sm\",\r\n  children,\r\n  ...props\r\n}: SuggestionProps) => {\r\n  const handleClick = () => {\r\n    onClick?.(suggestion);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      className={cn(\"cursor-pointer rounded-full px-4\", className)}\r\n      onClick={handleClick}\r\n      size={size}\r\n      type=\"button\"\r\n      variant={variant}\r\n      {...props}\r\n    >\r\n      {children || suggestion}\r\n    </Button>\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\suggestion.tsx"
    },
    {
      "path": "components\\ai-elements\\task.tsx",
      "content": "\"use client\";\r\n\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ChevronDownIcon, SearchIcon } from \"lucide-react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\nexport type TaskItemFileProps = ComponentProps<\"div\">;\r\n\r\nexport const TaskItemFile = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: TaskItemFileProps) => (\r\n  <div\r\n    className={cn(\r\n      \"inline-flex items-center gap-1 rounded-md border bg-secondary px-1.5 py-0.5 text-foreground text-xs\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type TaskItemProps = ComponentProps<\"div\">;\r\n\r\nexport const TaskItem = ({ children, className, ...props }: TaskItemProps) => (\r\n  <div className={cn(\"text-muted-foreground text-sm\", className)} {...props}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type TaskProps = ComponentProps<typeof Collapsible>;\r\n\r\nexport const Task = ({\r\n  defaultOpen = true,\r\n  className,\r\n  ...props\r\n}: TaskProps) => (\r\n  <Collapsible className={cn(className)} defaultOpen={defaultOpen} {...props} />\r\n);\r\n\r\nexport type TaskTriggerProps = ComponentProps<typeof CollapsibleTrigger> & {\r\n  title: string;\r\n};\r\n\r\nexport const TaskTrigger = ({\r\n  children,\r\n  className,\r\n  title,\r\n  ...props\r\n}: TaskTriggerProps) => (\r\n  <CollapsibleTrigger asChild className={cn(\"group\", className)} {...props}>\r\n    {children ?? (\r\n      <div className=\"flex w-full cursor-pointer items-center gap-2 text-muted-foreground text-sm transition-colors hover:text-foreground\">\r\n        <SearchIcon className=\"size-4\" />\r\n        <p className=\"text-sm\">{title}</p>\r\n        <ChevronDownIcon className=\"size-4 transition-transform group-data-[state=open]:rotate-180\" />\r\n      </div>\r\n    )}\r\n  </CollapsibleTrigger>\r\n);\r\n\r\nexport type TaskContentProps = ComponentProps<typeof CollapsibleContent>;\r\n\r\nexport const TaskContent = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: TaskContentProps) => (\r\n  <CollapsibleContent\r\n    className={cn(\r\n      \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-none data-[state=closed]:animate-out data-[state=open]:animate-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"mt-4 space-y-2 border-muted border-l-2 pl-4\">\r\n      {children}\r\n    </div>\r\n  </CollapsibleContent>\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\task.tsx"
    },
    {
      "path": "components\\ai-elements\\toolbar.tsx",
      "content": "import { cn } from \"@/lib/utils\";\r\nimport { NodeToolbar, Position } from \"@xyflow/react\";\r\nimport type { ComponentProps } from \"react\";\r\n\r\ntype ToolbarProps = ComponentProps<typeof NodeToolbar>;\r\n\r\nexport const Toolbar = ({ className, ...props }: ToolbarProps) => (\r\n  <NodeToolbar\r\n    className={cn(\r\n      \"flex items-center gap-1 rounded-sm border bg-background p-1.5\",\r\n      className\r\n    )}\r\n    position={Position.Bottom}\r\n    {...props}\r\n  />\r\n);\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\toolbar.tsx"
    },
    {
      "path": "components\\ai-elements\\web-preview.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ChevronDownIcon } from \"lucide-react\";\r\nimport type { ComponentProps, ReactNode } from \"react\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nexport type WebPreviewContextValue = {\r\n  url: string;\r\n  setUrl: (url: string) => void;\r\n  consoleOpen: boolean;\r\n  setConsoleOpen: (open: boolean) => void;\r\n};\r\n\r\nconst WebPreviewContext = createContext<WebPreviewContextValue | null>(null);\r\n\r\nconst useWebPreview = () => {\r\n  const context = useContext(WebPreviewContext);\r\n  if (!context) {\r\n    throw new Error(\"WebPreview components must be used within a WebPreview\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport type WebPreviewProps = ComponentProps<\"div\"> & {\r\n  defaultUrl?: string;\r\n  onUrlChange?: (url: string) => void;\r\n};\r\n\r\nexport const WebPreview = ({\r\n  className,\r\n  children,\r\n  defaultUrl = \"\",\r\n  onUrlChange,\r\n  ...props\r\n}: WebPreviewProps) => {\r\n  const [url, setUrl] = useState(defaultUrl);\r\n  const [consoleOpen, setConsoleOpen] = useState(false);\r\n\r\n  const handleUrlChange = (newUrl: string) => {\r\n    setUrl(newUrl);\r\n    onUrlChange?.(newUrl);\r\n  };\r\n\r\n  const contextValue: WebPreviewContextValue = {\r\n    url,\r\n    setUrl: handleUrlChange,\r\n    consoleOpen,\r\n    setConsoleOpen,\r\n  };\r\n\r\n  return (\r\n    <WebPreviewContext.Provider value={contextValue}>\r\n      <div\r\n        className={cn(\r\n          \"flex size-full flex-col rounded-lg border bg-card\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    </WebPreviewContext.Provider>\r\n  );\r\n};\r\n\r\nexport type WebPreviewNavigationProps = ComponentProps<\"div\">;\r\n\r\nexport const WebPreviewNavigation = ({\r\n  className,\r\n  children,\r\n  ...props\r\n}: WebPreviewNavigationProps) => (\r\n  <div\r\n    className={cn(\"flex items-center gap-1 border-b p-2\", className)}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport type WebPreviewNavigationButtonProps = ComponentProps<typeof Button> & {\r\n  tooltip?: string;\r\n};\r\n\r\nexport const WebPreviewNavigationButton = ({\r\n  onClick,\r\n  disabled,\r\n  tooltip,\r\n  children,\r\n  ...props\r\n}: WebPreviewNavigationButtonProps) => (\r\n  <TooltipProvider>\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>\r\n        <Button\r\n          className=\"h-8 w-8 p-0 hover:text-foreground\"\r\n          disabled={disabled}\r\n          onClick={onClick}\r\n          size=\"sm\"\r\n          variant=\"ghost\"\r\n          {...props}\r\n        >\r\n          {children}\r\n        </Button>\r\n      </TooltipTrigger>\r\n      <TooltipContent>\r\n        <p>{tooltip}</p>\r\n      </TooltipContent>\r\n    </Tooltip>\r\n  </TooltipProvider>\r\n);\r\n\r\nexport type WebPreviewUrlProps = ComponentProps<typeof Input>;\r\n\r\nexport const WebPreviewUrl = ({\r\n  value,\r\n  onChange,\r\n  onKeyDown,\r\n  ...props\r\n}: WebPreviewUrlProps) => {\r\n  const { url, setUrl } = useWebPreview();\r\n  const [inputValue, setInputValue] = useState(url);\r\n\r\n  // Sync input value with context URL when it changes externally\r\n  useEffect(() => {\r\n    setInputValue(url);\r\n  }, [url]);\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setInputValue(event.target.value);\r\n    onChange?.(event);\r\n  };\r\n\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.key === \"Enter\") {\r\n      const target = event.target as HTMLInputElement;\r\n      setUrl(target.value);\r\n    }\r\n    onKeyDown?.(event);\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      className=\"h-8 flex-1 text-sm\"\r\n      onChange={onChange ?? handleChange}\r\n      onKeyDown={handleKeyDown}\r\n      placeholder=\"Enter URL...\"\r\n      value={value ?? inputValue}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport type WebPreviewBodyProps = ComponentProps<\"iframe\"> & {\r\n  loading?: ReactNode;\r\n};\r\n\r\nexport const WebPreviewBody = ({\r\n  className,\r\n  loading,\r\n  src,\r\n  ...props\r\n}: WebPreviewBodyProps) => {\r\n  const { url } = useWebPreview();\r\n\r\n  return (\r\n    <div className=\"flex-1\">\r\n      <iframe\r\n        className={cn(\"size-full\", className)}\r\n        sandbox=\"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation\"\r\n        src={(src ?? url) || undefined}\r\n        title=\"Preview\"\r\n        {...props}\r\n      />\r\n      {loading}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport type WebPreviewConsoleProps = ComponentProps<\"div\"> & {\r\n  logs?: Array<{\r\n    level: \"log\" | \"warn\" | \"error\";\r\n    message: string;\r\n    timestamp: Date;\r\n  }>;\r\n};\r\n\r\nexport const WebPreviewConsole = ({\r\n  className,\r\n  logs = [],\r\n  children,\r\n  ...props\r\n}: WebPreviewConsoleProps) => {\r\n  const { consoleOpen, setConsoleOpen } = useWebPreview();\r\n\r\n  return (\r\n    <Collapsible\r\n      className={cn(\"border-t bg-muted/50 font-mono text-sm\", className)}\r\n      onOpenChange={setConsoleOpen}\r\n      open={consoleOpen}\r\n      {...props}\r\n    >\r\n      <CollapsibleTrigger asChild>\r\n        <Button\r\n          className=\"flex w-full items-center justify-between p-4 text-left font-medium hover:bg-muted/50\"\r\n          variant=\"ghost\"\r\n        >\r\n          Console\r\n          <ChevronDownIcon\r\n            className={cn(\r\n              \"h-4 w-4 transition-transform duration-200\",\r\n              consoleOpen && \"rotate-180\"\r\n            )}\r\n          />\r\n        </Button>\r\n      </CollapsibleTrigger>\r\n      <CollapsibleContent\r\n        className={cn(\r\n          \"px-4 pb-4\",\r\n          \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 outline-none data-[state=closed]:animate-out data-[state=open]:animate-in\"\r\n        )}\r\n      >\r\n        <div className=\"max-h-48 space-y-1 overflow-y-auto\">\r\n          {logs.length === 0 ? (\r\n            <p className=\"text-muted-foreground\">No console output</p>\r\n          ) : (\r\n            logs.map((log, index) => (\r\n              <div\r\n                className={cn(\r\n                  \"text-xs\",\r\n                  log.level === \"error\" && \"text-destructive\",\r\n                  log.level === \"warn\" && \"text-yellow-600\",\r\n                  log.level === \"log\" && \"text-foreground\"\r\n                )}\r\n                key={`${log.timestamp.getTime()}-${index}`}\r\n              >\r\n                <span className=\"text-muted-foreground\">\r\n                  {log.timestamp.toLocaleTimeString()}\r\n                </span>{\" \"}\r\n                {log.message}\r\n              </div>\r\n            ))\r\n          )}\r\n          {children}\r\n        </div>\r\n      </CollapsibleContent>\r\n    </Collapsible>\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\ai-elements\\web-preview.tsx"
    },
    {
      "path": "components\\auth\\sign-out-button.tsx",
      "content": "\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { LogOut } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { Spinner } from \"@/components/ui/spinner\";\r\n\r\nexport function SignOutButton() {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSignOut = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await authClient.signOut();\r\n      router.push(\"/sign-in\");\r\n    } catch (error) {\r\n      console.error(\"Failed to sign out:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button onClick={handleSignOut} variant=\"outline\" disabled={loading}>\r\n      {loading ? (\r\n        <>\r\n          <Spinner className=\"mr-2 h-4 w-4\" />\r\n          Signing out...\r\n        </>\r\n      ) : (\r\n        <>\r\n          <LogOut className=\"mr-2 h-4 w-4\" />\r\n          Sign Out\r\n        </>\r\n      )}\r\n    </Button>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\auth\\sign-out-button.tsx"
    },
    {
      "path": "components\\data-table\\data-table-column-header.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Column } from \"@tanstack/react-table\";\r\nimport {\r\n  ChevronDown,\r\n  ChevronsUpDown,\r\n  ChevronUp,\r\n  EyeOff,\r\n  X,\r\n} from \"lucide-react\";\r\n\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTableColumnHeaderProps<TData, TValue>\r\n  extends React.ComponentProps<typeof DropdownMenuTrigger> {\r\n  column: Column<TData, TValue>;\r\n  label: string;\r\n}\r\n\r\nexport function DataTableColumnHeader<TData, TValue>({\r\n  column,\r\n  label,\r\n  className,\r\n  ...props\r\n}: DataTableColumnHeaderProps<TData, TValue>) {\r\n  if (!column.getCanSort() && !column.getCanHide()) {\r\n    return <div className={cn(className)}>{label}</div>;\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger\r\n        className={cn(\r\n          \"-ml-1.5 flex h-8 items-center gap-1.5 rounded-md px-2 py-1.5 hover:bg-accent focus:outline-none focus:ring-1 focus:ring-ring data-[state=open]:bg-accent [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:text-muted-foreground\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        {label}\r\n        {column.getCanSort() &&\r\n          (column.getIsSorted() === \"desc\" ? (\r\n            <ChevronDown />\r\n          ) : column.getIsSorted() === \"asc\" ? (\r\n            <ChevronUp />\r\n          ) : (\r\n            <ChevronsUpDown />\r\n          ))}\r\n      </DropdownMenuTrigger>\r\n      <DropdownMenuContent align=\"start\" className=\"w-28\">\r\n        {column.getCanSort() && (\r\n          <>\r\n            <DropdownMenuCheckboxItem\r\n              className=\"relative pr-8 pl-2 [&>span:first-child]:right-2 [&>span:first-child]:left-auto [&_svg]:text-muted-foreground\"\r\n              checked={column.getIsSorted() === \"asc\"}\r\n              onClick={() => column.toggleSorting(false)}\r\n            >\r\n              <ChevronUp />\r\n              Asc\r\n            </DropdownMenuCheckboxItem>\r\n            <DropdownMenuCheckboxItem\r\n              className=\"relative pr-8 pl-2 [&>span:first-child]:right-2 [&>span:first-child]:left-auto [&_svg]:text-muted-foreground\"\r\n              checked={column.getIsSorted() === \"desc\"}\r\n              onClick={() => column.toggleSorting(true)}\r\n            >\r\n              <ChevronDown />\r\n              Desc\r\n            </DropdownMenuCheckboxItem>\r\n            {column.getIsSorted() && (\r\n              <DropdownMenuItem\r\n                className=\"pl-2 [&_svg]:text-muted-foreground\"\r\n                onClick={() => column.clearSorting()}\r\n              >\r\n                <X />\r\n                Reset\r\n              </DropdownMenuItem>\r\n            )}\r\n          </>\r\n        )}\r\n        {column.getCanHide() && (\r\n          <DropdownMenuCheckboxItem\r\n            className=\"relative pr-8 pl-2 [&>span:first-child]:right-2 [&>span:first-child]:left-auto [&_svg]:text-muted-foreground\"\r\n            checked={!column.getIsVisible()}\r\n            onClick={() => column.toggleVisibility(false)}\r\n          >\r\n            <EyeOff />\r\n            Hide\r\n          </DropdownMenuCheckboxItem>\r\n        )}\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-column-header.tsx"
    },
    {
      "path": "components\\data-table\\data-table-date-filter.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Column } from \"@tanstack/react-table\";\r\nimport { CalendarIcon, XCircle } from \"lucide-react\";\r\nimport * as React from \"react\";\r\nimport type { DateRange } from \"react-day-picker\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { formatDate } from \"@/lib/format\";\r\n\r\ntype DateSelection = Date[] | DateRange;\r\n\r\nfunction getIsDateRange(value: DateSelection): value is DateRange {\r\n  return value && typeof value === \"object\" && !Array.isArray(value);\r\n}\r\n\r\nfunction parseAsDate(timestamp: number | string | undefined): Date | undefined {\r\n  if (!timestamp) return undefined;\r\n  const numericTimestamp =\r\n    typeof timestamp === \"string\" ? Number(timestamp) : timestamp;\r\n  const date = new Date(numericTimestamp);\r\n  return !Number.isNaN(date.getTime()) ? date : undefined;\r\n}\r\n\r\nfunction parseColumnFilterValue(value: unknown) {\r\n  if (value === null || value === undefined) {\r\n    return [];\r\n  }\r\n\r\n  if (Array.isArray(value)) {\r\n    return value.map((item) => {\r\n      if (typeof item === \"number\" || typeof item === \"string\") {\r\n        return item;\r\n      }\r\n      return undefined;\r\n    });\r\n  }\r\n\r\n  if (typeof value === \"string\" || typeof value === \"number\") {\r\n    return [value];\r\n  }\r\n\r\n  return [];\r\n}\r\n\r\ninterface DataTableDateFilterProps<TData> {\r\n  column: Column<TData, unknown>;\r\n  title?: string;\r\n  multiple?: boolean;\r\n}\r\n\r\nexport function DataTableDateFilter<TData>({\r\n  column,\r\n  title,\r\n  multiple,\r\n}: DataTableDateFilterProps<TData>) {\r\n  const columnFilterValue = column.getFilterValue();\r\n\r\n  const selectedDates = React.useMemo<DateSelection>(() => {\r\n    if (!columnFilterValue) {\r\n      return multiple ? { from: undefined, to: undefined } : [];\r\n    }\r\n\r\n    if (multiple) {\r\n      const timestamps = parseColumnFilterValue(columnFilterValue);\r\n      return {\r\n        from: parseAsDate(timestamps[0]),\r\n        to: parseAsDate(timestamps[1]),\r\n      };\r\n    }\r\n\r\n    const timestamps = parseColumnFilterValue(columnFilterValue);\r\n    const date = parseAsDate(timestamps[0]);\r\n    return date ? [date] : [];\r\n  }, [columnFilterValue, multiple]);\r\n\r\n  const onSelect = React.useCallback(\r\n    (date: Date | DateRange | undefined) => {\r\n      if (!date) {\r\n        column.setFilterValue(undefined);\r\n        return;\r\n      }\r\n\r\n      if (multiple && !(\"getTime\" in date)) {\r\n        const from = date.from?.getTime();\r\n        const to = date.to?.getTime();\r\n        column.setFilterValue(from || to ? [from, to] : undefined);\r\n      } else if (!multiple && \"getTime\" in date) {\r\n        column.setFilterValue(date.getTime());\r\n      }\r\n    },\r\n    [column, multiple],\r\n  );\r\n\r\n  const onReset = React.useCallback(\r\n    (event: React.MouseEvent) => {\r\n      event.stopPropagation();\r\n      column.setFilterValue(undefined);\r\n    },\r\n    [column],\r\n  );\r\n\r\n  const hasValue = React.useMemo(() => {\r\n    if (multiple) {\r\n      if (!getIsDateRange(selectedDates)) return false;\r\n      return selectedDates.from || selectedDates.to;\r\n    }\r\n    if (!Array.isArray(selectedDates)) return false;\r\n    return selectedDates.length > 0;\r\n  }, [multiple, selectedDates]);\r\n\r\n  const formatDateRange = React.useCallback((range: DateRange) => {\r\n    if (!range.from && !range.to) return \"\";\r\n    if (range.from && range.to) {\r\n      return `${formatDate(range.from)} - ${formatDate(range.to)}`;\r\n    }\r\n    return formatDate(range.from ?? range.to);\r\n  }, []);\r\n\r\n  const label = React.useMemo(() => {\r\n    if (multiple) {\r\n      if (!getIsDateRange(selectedDates)) return null;\r\n\r\n      const hasSelectedDates = selectedDates.from || selectedDates.to;\r\n      const dateText = hasSelectedDates\r\n        ? formatDateRange(selectedDates)\r\n        : \"Select date range\";\r\n\r\n      return (\r\n        <span className=\"flex items-center gap-2\">\r\n          <span>{title}</span>\r\n          {hasSelectedDates && (\r\n            <>\r\n              <Separator\r\n                orientation=\"vertical\"\r\n                className=\"mx-0.5 data-[orientation=vertical]:h-4\"\r\n              />\r\n              <span>{dateText}</span>\r\n            </>\r\n          )}\r\n        </span>\r\n      );\r\n    }\r\n\r\n    if (getIsDateRange(selectedDates)) return null;\r\n\r\n    const hasSelectedDate = selectedDates.length > 0;\r\n    const dateText = hasSelectedDate\r\n      ? formatDate(selectedDates[0])\r\n      : \"Select date\";\r\n\r\n    return (\r\n      <span className=\"flex items-center gap-2\">\r\n        <span>{title}</span>\r\n        {hasSelectedDate && (\r\n          <>\r\n            <Separator\r\n              orientation=\"vertical\"\r\n              className=\"mx-0.5 data-[orientation=vertical]:h-4\"\r\n            />\r\n            <span>{dateText}</span>\r\n          </>\r\n        )}\r\n      </span>\r\n    );\r\n  }, [selectedDates, multiple, formatDateRange, title]);\r\n\r\n  return (\r\n    <Popover>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"border-dashed font-normal\"\r\n        >\r\n          {hasValue ? (\r\n            <div\r\n              role=\"button\"\r\n              aria-label={`Clear ${title} filter`}\r\n              tabIndex={0}\r\n              onClick={onReset}\r\n              className=\"rounded-sm opacity-70 transition-opacity hover:opacity-100 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\r\n            >\r\n              <XCircle />\r\n            </div>\r\n          ) : (\r\n            <CalendarIcon />\r\n          )}\r\n          {label}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n        {multiple ? (\r\n          <Calendar\r\n            autoFocus\r\n            captionLayout=\"dropdown\"\r\n            mode=\"range\"\r\n            selected={\r\n              getIsDateRange(selectedDates)\r\n                ? selectedDates\r\n                : { from: undefined, to: undefined }\r\n            }\r\n            onSelect={onSelect}\r\n          />\r\n        ) : (\r\n          <Calendar\r\n            captionLayout=\"dropdown\"\r\n            mode=\"single\"\r\n            selected={\r\n              !getIsDateRange(selectedDates) ? selectedDates[0] : undefined\r\n            }\r\n            onSelect={onSelect}\r\n          />\r\n        )}\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-date-filter.tsx"
    },
    {
      "path": "components\\data-table\\data-table-faceted-filter.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Column } from \"@tanstack/react-table\";\r\nimport { Check, PlusCircle, XCircle } from \"lucide-react\";\r\nimport * as React from \"react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n} from \"@/components/ui/command\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { Option } from \"@/types/data-table\";\r\n\r\ninterface DataTableFacetedFilterProps<TData, TValue> {\r\n  column?: Column<TData, TValue>;\r\n  title?: string;\r\n  options: Option[];\r\n  multiple?: boolean;\r\n}\r\n\r\nexport function DataTableFacetedFilter<TData, TValue>({\r\n  column,\r\n  title,\r\n  options,\r\n  multiple,\r\n}: DataTableFacetedFilterProps<TData, TValue>) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const columnFilterValue = column?.getFilterValue();\r\n  const selectedValues = new Set(\r\n    Array.isArray(columnFilterValue) ? columnFilterValue : []\r\n  );\r\n\r\n  const onItemSelect = React.useCallback(\r\n    (option: Option, isSelected: boolean) => {\r\n      if (!column) return;\r\n\r\n      if (multiple) {\r\n        const newSelectedValues = new Set(selectedValues);\r\n        if (isSelected) {\r\n          newSelectedValues.delete(option.value);\r\n        } else {\r\n          newSelectedValues.add(option.value);\r\n        }\r\n        const filterValues = Array.from(newSelectedValues);\r\n        column.setFilterValue(filterValues.length ? filterValues : undefined);\r\n      } else {\r\n        column.setFilterValue(isSelected ? undefined : [option.value]);\r\n        setOpen(false);\r\n      }\r\n    },\r\n    [column, multiple, selectedValues]\r\n  );\r\n\r\n  const onReset = React.useCallback(\r\n    (event?: React.MouseEvent) => {\r\n      event?.stopPropagation();\r\n      column?.setFilterValue(undefined);\r\n    },\r\n    [column]\r\n  );\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"border-dashed font-normal\"\r\n        >\r\n          {selectedValues?.size > 0 ? (\r\n            <div\r\n              role=\"button\"\r\n              aria-label={`Clear ${title} filter`}\r\n              tabIndex={0}\r\n              className=\"rounded-sm opacity-70 transition-opacity hover:opacity-100 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\r\n              onClick={onReset}\r\n            >\r\n              <XCircle />\r\n            </div>\r\n          ) : (\r\n            <PlusCircle />\r\n          )}\r\n          {title}\r\n          {selectedValues?.size > 0 && (\r\n            <>\r\n              <Separator\r\n                orientation=\"vertical\"\r\n                className=\"mx-0.5 data-[orientation=vertical]:h-4\"\r\n              />\r\n              <Badge\r\n                variant=\"secondary\"\r\n                className=\"rounded-sm px-1 font-normal lg:hidden\"\r\n              >\r\n                {selectedValues.size}\r\n              </Badge>\r\n              <div className=\"hidden items-center gap-1 lg:flex\">\r\n                {selectedValues.size > 2 ? (\r\n                  <Badge\r\n                    variant=\"secondary\"\r\n                    className=\"rounded-sm px-1 font-normal\"\r\n                  >\r\n                    {selectedValues.size} selected\r\n                  </Badge>\r\n                ) : (\r\n                  options\r\n                    .filter((option) => selectedValues.has(option.value))\r\n                    .map((option) => (\r\n                      <Badge\r\n                        variant=\"secondary\"\r\n                        key={option.value}\r\n                        className=\"rounded-sm px-1 font-normal\"\r\n                      >\r\n                        {option.label}\r\n                      </Badge>\r\n                    ))\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-50 p-0\" align=\"start\">\r\n        <Command>\r\n          <CommandInput placeholder={title} />\r\n          <CommandList className=\"max-h-full\">\r\n            <CommandEmpty>No results found.</CommandEmpty>\r\n            <CommandGroup className=\"max-h-[300px] scroll-py-1 overflow-y-auto overflow-x-hidden\">\r\n              {options.map((option) => {\r\n                const isSelected = selectedValues.has(option.value);\r\n\r\n                return (\r\n                  <CommandItem\r\n                    key={option.value}\r\n                    onSelect={() => onItemSelect(option, isSelected)}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        \"flex size-4 items-center justify-center rounded-sm border border-primary\",\r\n                        isSelected\r\n                          ? \"bg-primary\"\r\n                          : \"opacity-50 [&_svg]:invisible\"\r\n                      )}\r\n                    >\r\n                      <Check />\r\n                    </div>\r\n                    {option.icon && <option.icon />}\r\n                    <span className=\"truncate\">{option.label}</span>\r\n                    {option.count && (\r\n                      <span className=\"ml-auto font-mono text-xs\">\r\n                        {option.count}\r\n                      </span>\r\n                    )}\r\n                  </CommandItem>\r\n                );\r\n              })}\r\n            </CommandGroup>\r\n            {selectedValues.size > 0 && (\r\n              <>\r\n                <CommandSeparator />\r\n                <CommandGroup>\r\n                  <CommandItem\r\n                    onSelect={() => onReset()}\r\n                    className=\"justify-center text-center\"\r\n                  >\r\n                    Clear filters\r\n                  </CommandItem>\r\n                </CommandGroup>\r\n              </>\r\n            )}\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-faceted-filter.tsx"
    },
    {
      "path": "components\\data-table\\data-table-pagination.tsx",
      "content": "import type { Table } from \"@tanstack/react-table\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n} from \"lucide-react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTablePaginationProps<TData> extends React.ComponentProps<\"div\"> {\r\n  table: Table<TData>;\r\n  pageSizeOptions?: number[];\r\n}\r\n\r\nexport function DataTablePagination<TData>({\r\n  table,\r\n  pageSizeOptions = [10, 20, 30, 40, 50],\r\n  className,\r\n  ...props\r\n}: DataTablePaginationProps<TData>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex w-full flex-col-reverse items-center justify-between gap-4 overflow-auto p-1 sm:flex-row sm:gap-8\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"flex-1 whitespace-nowrap text-muted-foreground text-sm\">\r\n        {table.getFilteredSelectedRowModel().rows.length} of{\" \"}\r\n        {table.getFilteredRowModel().rows.length} row(s) selected.\r\n      </div>\r\n      <div className=\"flex flex-col-reverse items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <p className=\"whitespace-nowrap font-medium text-sm\">Rows per page</p>\r\n          <Select\r\n            value={`${table.getState().pagination.pageSize}`}\r\n            onValueChange={(value) => {\r\n              table.setPageSize(Number(value));\r\n            }}\r\n          >\r\n            <SelectTrigger className=\"h-8 w-18 data-size:h-8\">\r\n              <SelectValue placeholder={table.getState().pagination.pageSize} />\r\n            </SelectTrigger>\r\n            <SelectContent side=\"top\">\r\n              {pageSizeOptions.map((pageSize) => (\r\n                <SelectItem key={pageSize} value={`${pageSize}`}>\r\n                  {pageSize}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        <div className=\"flex items-center justify-center font-medium text-sm\">\r\n          Page {table.getState().pagination.pageIndex + 1} of{\" \"}\r\n          {table.getPageCount()}\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            aria-label=\"Go to first page\"\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            className=\"hidden size-8 lg:flex\"\r\n            onClick={() => table.setPageIndex(0)}\r\n            disabled={!table.getCanPreviousPage()}\r\n          >\r\n            <ChevronsLeft />\r\n          </Button>\r\n          <Button\r\n            aria-label=\"Go to previous page\"\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            className=\"size-8\"\r\n            onClick={() => table.previousPage()}\r\n            disabled={!table.getCanPreviousPage()}\r\n          >\r\n            <ChevronLeft />\r\n          </Button>\r\n          <Button\r\n            aria-label=\"Go to next page\"\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            className=\"size-8\"\r\n            onClick={() => table.nextPage()}\r\n            disabled={!table.getCanNextPage()}\r\n          >\r\n            <ChevronRight />\r\n          </Button>\r\n          <Button\r\n            aria-label=\"Go to last page\"\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            className=\"hidden size-8 lg:flex\"\r\n            onClick={() => table.setPageIndex(table.getPageCount() - 1)}\r\n            disabled={!table.getCanNextPage()}\r\n          >\r\n            <ChevronsRight />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-pagination.tsx"
    },
    {
      "path": "components\\data-table\\data-table-skeleton.tsx",
      "content": "import { Skeleton } from \"@/components/ui/skeleton\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTableSkeletonProps extends React.ComponentProps<\"div\"> {\r\n  columnCount: number;\r\n  rowCount?: number;\r\n  filterCount?: number;\r\n  cellWidths?: string[];\r\n  withViewOptions?: boolean;\r\n  withPagination?: boolean;\r\n  shrinkZero?: boolean;\r\n}\r\n\r\nexport function DataTableSkeleton({\r\n  columnCount,\r\n  rowCount = 10,\r\n  filterCount = 0,\r\n  cellWidths = [\"auto\"],\r\n  withViewOptions = true,\r\n  withPagination = true,\r\n  shrinkZero = false,\r\n  className,\r\n  ...props\r\n}: DataTableSkeletonProps) {\r\n  const cozyCellWidths = Array.from(\r\n    { length: columnCount },\r\n    (_, index) => cellWidths[index % cellWidths.length] ?? \"auto\",\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"flex w-full flex-col gap-2.5 overflow-auto\", className)}\r\n      {...props}\r\n    >\r\n      <div className=\"flex w-full items-center justify-between gap-2 overflow-auto p-1\">\r\n        <div className=\"flex flex-1 items-center gap-2\">\r\n          {filterCount > 0\r\n            ? Array.from({ length: filterCount }).map((_, i) => (\r\n                <Skeleton key={i} className=\"h-7 w-18 border-dashed\" />\r\n              ))\r\n            : null}\r\n        </div>\r\n        {withViewOptions ? (\r\n          <Skeleton className=\"ml-auto hidden h-7 w-18 lg:flex\" />\r\n        ) : null}\r\n      </div>\r\n      <div className=\"rounded-md border\">\r\n        <Table>\r\n          <TableHeader>\r\n            {Array.from({ length: 1 }).map((_, i) => (\r\n              <TableRow key={i} className=\"hover:bg-transparent\">\r\n                {Array.from({ length: columnCount }).map((_, j) => (\r\n                  <TableHead\r\n                    key={j}\r\n                    style={{\r\n                      width: cozyCellWidths[j],\r\n                      minWidth: shrinkZero ? cozyCellWidths[j] : \"auto\",\r\n                    }}\r\n                  >\r\n                    <Skeleton className=\"h-6 w-full\" />\r\n                  </TableHead>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableHeader>\r\n          <TableBody>\r\n            {Array.from({ length: rowCount }).map((_, i) => (\r\n              <TableRow key={i} className=\"hover:bg-transparent\">\r\n                {Array.from({ length: columnCount }).map((_, j) => (\r\n                  <TableCell\r\n                    key={j}\r\n                    style={{\r\n                      width: cozyCellWidths[j],\r\n                      minWidth: shrinkZero ? cozyCellWidths[j] : \"auto\",\r\n                    }}\r\n                  >\r\n                    <Skeleton className=\"h-6 w-full\" />\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      {withPagination ? (\r\n        <div className=\"flex w-full items-center justify-between gap-4 overflow-auto p-1 sm:gap-8\">\r\n          <Skeleton className=\"h-7 w-40 shrink-0\" />\r\n          <div className=\"flex items-center gap-4 sm:gap-6 lg:gap-8\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Skeleton className=\"h-7 w-24\" />\r\n              <Skeleton className=\"h-7 w-18\" />\r\n            </div>\r\n            <div className=\"flex items-center justify-center font-medium text-sm\">\r\n              <Skeleton className=\"h-7 w-20\" />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Skeleton className=\"hidden size-7 lg:block\" />\r\n              <Skeleton className=\"size-7\" />\r\n              <Skeleton className=\"size-7\" />\r\n              <Skeleton className=\"hidden size-7 lg:block\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-skeleton.tsx"
    },
    {
      "path": "components\\data-table\\data-table-slider-filter.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Column } from \"@tanstack/react-table\";\r\nimport { PlusCircle, XCircle } from \"lucide-react\";\r\nimport * as React from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Slider } from \"@/components/ui/slider\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Range {\r\n  min: number;\r\n  max: number;\r\n}\r\n\r\ntype RangeValue = [number, number];\r\n\r\nfunction getIsValidRange(value: unknown): value is RangeValue {\r\n  return (\r\n    Array.isArray(value) &&\r\n    value.length === 2 &&\r\n    typeof value[0] === \"number\" &&\r\n    typeof value[1] === \"number\"\r\n  );\r\n}\r\n\r\nfunction parseValuesAsNumbers(value: unknown): RangeValue | undefined {\r\n  if (\r\n    Array.isArray(value) &&\r\n    value.length === 2 &&\r\n    value.every(\r\n      (v) =>\r\n        (typeof v === \"string\" || typeof v === \"number\") && !Number.isNaN(v),\r\n    )\r\n  ) {\r\n    return [Number(value[0]), Number(value[1])];\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\ninterface DataTableSliderFilterProps<TData> {\r\n  column: Column<TData, unknown>;\r\n  title?: string;\r\n}\r\n\r\nexport function DataTableSliderFilter<TData>({\r\n  column,\r\n  title,\r\n}: DataTableSliderFilterProps<TData>) {\r\n  const id = React.useId();\r\n\r\n  const columnFilterValue = parseValuesAsNumbers(column.getFilterValue());\r\n\r\n  const defaultRange = column.columnDef.meta?.range;\r\n  const unit = column.columnDef.meta?.unit;\r\n\r\n  const { min, max, step } = React.useMemo<Range & { step: number }>(() => {\r\n    let minValue = 0;\r\n    let maxValue = 100;\r\n\r\n    if (defaultRange && getIsValidRange(defaultRange)) {\r\n      [minValue, maxValue] = defaultRange;\r\n    } else {\r\n      const values = column.getFacetedMinMaxValues();\r\n      if (values && Array.isArray(values) && values.length === 2) {\r\n        const [facetMinValue, facetMaxValue] = values;\r\n        if (\r\n          typeof facetMinValue === \"number\" &&\r\n          typeof facetMaxValue === \"number\"\r\n        ) {\r\n          minValue = facetMinValue;\r\n          maxValue = facetMaxValue;\r\n        }\r\n      }\r\n    }\r\n\r\n    const rangeSize = maxValue - minValue;\r\n    const step =\r\n      rangeSize <= 20\r\n        ? 1\r\n        : rangeSize <= 100\r\n          ? Math.ceil(rangeSize / 20)\r\n          : Math.ceil(rangeSize / 50);\r\n\r\n    return { min: minValue, max: maxValue, step };\r\n  }, [column, defaultRange]);\r\n\r\n  const range = React.useMemo((): RangeValue => {\r\n    return columnFilterValue ?? [min, max];\r\n  }, [columnFilterValue, min, max]);\r\n\r\n  const formatValue = React.useCallback((value: number) => {\r\n    return value.toLocaleString(undefined, { maximumFractionDigits: 0 });\r\n  }, []);\r\n\r\n  const onFromInputChange = React.useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const numValue = Number(event.target.value);\r\n      if (!Number.isNaN(numValue) && numValue >= min && numValue <= range[1]) {\r\n        column.setFilterValue([numValue, range[1]]);\r\n      }\r\n    },\r\n    [column, min, range],\r\n  );\r\n\r\n  const onToInputChange = React.useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const numValue = Number(event.target.value);\r\n      if (!Number.isNaN(numValue) && numValue <= max && numValue >= range[0]) {\r\n        column.setFilterValue([range[0], numValue]);\r\n      }\r\n    },\r\n    [column, max, range],\r\n  );\r\n\r\n  const onSliderValueChange = React.useCallback(\r\n    (value: RangeValue) => {\r\n      if (Array.isArray(value) && value.length === 2) {\r\n        column.setFilterValue(value);\r\n      }\r\n    },\r\n    [column],\r\n  );\r\n\r\n  const onReset = React.useCallback(\r\n    (event: React.MouseEvent) => {\r\n      if (event.target instanceof HTMLDivElement) {\r\n        event.stopPropagation();\r\n      }\r\n      column.setFilterValue(undefined);\r\n    },\r\n    [column],\r\n  );\r\n\r\n  return (\r\n    <Popover>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"border-dashed font-normal\"\r\n        >\r\n          {columnFilterValue ? (\r\n            <div\r\n              role=\"button\"\r\n              aria-label={`Clear ${title} filter`}\r\n              tabIndex={0}\r\n              className=\"rounded-sm opacity-70 transition-opacity hover:opacity-100 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\r\n              onClick={onReset}\r\n            >\r\n              <XCircle />\r\n            </div>\r\n          ) : (\r\n            <PlusCircle />\r\n          )}\r\n          <span>{title}</span>\r\n          {columnFilterValue ? (\r\n            <>\r\n              <Separator\r\n                orientation=\"vertical\"\r\n                className=\"mx-0.5 data-[orientation=vertical]:h-4\"\r\n              />\r\n              {formatValue(columnFilterValue[0])} -{\" \"}\r\n              {formatValue(columnFilterValue[1])}\r\n              {unit ? ` ${unit}` : \"\"}\r\n            </>\r\n          ) : null}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent align=\"start\" className=\"flex w-auto flex-col gap-4\">\r\n        <div className=\"flex flex-col gap-3\">\r\n          <p className=\"font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\r\n            {title}\r\n          </p>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Label htmlFor={`${id}-from`} className=\"sr-only\">\r\n              From\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <Input\r\n                id={`${id}-from`}\r\n                type=\"number\"\r\n                aria-valuemin={min}\r\n                aria-valuemax={max}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder={min.toString()}\r\n                min={min}\r\n                max={max}\r\n                value={range[0]?.toString()}\r\n                onChange={onFromInputChange}\r\n                className={cn(\"h-8 w-24\", unit && \"pr-8\")}\r\n              />\r\n              {unit && (\r\n                <span className=\"absolute top-0 right-0 bottom-0 flex items-center rounded-r-md bg-accent px-2 text-muted-foreground text-sm\">\r\n                  {unit}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <Label htmlFor={`${id}-to`} className=\"sr-only\">\r\n              to\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <Input\r\n                id={`${id}-to`}\r\n                type=\"number\"\r\n                aria-valuemin={min}\r\n                aria-valuemax={max}\r\n                inputMode=\"numeric\"\r\n                pattern=\"[0-9]*\"\r\n                placeholder={max.toString()}\r\n                min={min}\r\n                max={max}\r\n                value={range[1]?.toString()}\r\n                onChange={onToInputChange}\r\n                className={cn(\"h-8 w-24\", unit && \"pr-8\")}\r\n              />\r\n              {unit && (\r\n                <span className=\"absolute top-0 right-0 bottom-0 flex items-center rounded-r-md bg-accent px-2 text-muted-foreground text-sm\">\r\n                  {unit}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <Label htmlFor={`${id}-slider`} className=\"sr-only\">\r\n            {title} slider\r\n          </Label>\r\n          <Slider\r\n            id={`${id}-slider`}\r\n            min={min}\r\n            max={max}\r\n            step={step}\r\n            value={range}\r\n            onValueChange={onSliderValueChange}\r\n          />\r\n        </div>\r\n        <Button\r\n          aria-label={`Clear ${title} filter`}\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={onReset}\r\n        >\r\n          Clear\r\n        </Button>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-slider-filter.tsx"
    },
    {
      "path": "components\\data-table\\data-table-toolbar.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Column, Table } from \"@tanstack/react-table\";\r\nimport { X } from \"lucide-react\";\r\nimport * as React from \"react\";\r\n\r\nimport { DataTableDateFilter } from \"@/components/data-table/data-table-date-filter\";\r\nimport { DataTableFacetedFilter } from \"@/components/data-table/data-table-faceted-filter\";\r\nimport { DataTableSliderFilter } from \"@/components/data-table/data-table-slider-filter\";\r\nimport { DataTableViewOptions } from \"@/components/data-table/data-table-view-options\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTableToolbarProps<TData> extends React.ComponentProps<\"div\"> {\r\n  table: Table<TData>;\r\n}\r\n\r\nexport function DataTableToolbar<TData>({\r\n  table,\r\n  children,\r\n  className,\r\n  ...props\r\n}: DataTableToolbarProps<TData>) {\r\n  const isFiltered = table.getState().columnFilters.length > 0;\r\n\r\n  const columns = React.useMemo(\r\n    () => table.getAllColumns().filter((column) => column.getCanFilter()),\r\n    [table],\r\n  );\r\n\r\n  const onReset = React.useCallback(() => {\r\n    table.resetColumnFilters();\r\n  }, [table]);\r\n\r\n  return (\r\n    <div\r\n      role=\"toolbar\"\r\n      aria-orientation=\"horizontal\"\r\n      className={cn(\r\n        \"flex w-full items-start justify-between gap-2 p-1\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"flex flex-1 flex-wrap items-center gap-2\">\r\n        {columns.map((column) => (\r\n          <DataTableToolbarFilter key={column.id} column={column} />\r\n        ))}\r\n        {isFiltered && (\r\n          <Button\r\n            aria-label=\"Reset filters\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"border-dashed\"\r\n            onClick={onReset}\r\n          >\r\n            <X />\r\n            Reset\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        {children}\r\n        <DataTableViewOptions table={table} align=\"end\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\ninterface DataTableToolbarFilterProps<TData> {\r\n  column: Column<TData>;\r\n}\r\n\r\nfunction DataTableToolbarFilter<TData>({\r\n  column,\r\n}: DataTableToolbarFilterProps<TData>) {\r\n  {\r\n    const columnMeta = column.columnDef.meta;\r\n\r\n    const onFilterRender = React.useCallback(() => {\r\n      if (!columnMeta?.variant) return null;\r\n\r\n      switch (columnMeta.variant) {\r\n        case \"text\":\r\n          return (\r\n            <Input\r\n              placeholder={columnMeta.placeholder ?? columnMeta.label}\r\n              value={(column.getFilterValue() as string) ?? \"\"}\r\n              onChange={(event) => column.setFilterValue(event.target.value)}\r\n              className=\"h-8 w-40 lg:w-56\"\r\n            />\r\n          );\r\n\r\n        case \"number\":\r\n          return (\r\n            <div className=\"relative\">\r\n              <Input\r\n                type=\"number\"\r\n                inputMode=\"numeric\"\r\n                placeholder={columnMeta.placeholder ?? columnMeta.label}\r\n                value={(column.getFilterValue() as string) ?? \"\"}\r\n                onChange={(event) => column.setFilterValue(event.target.value)}\r\n                className={cn(\"h-8 w-[120px]\", columnMeta.unit && \"pr-8\")}\r\n              />\r\n              {columnMeta.unit && (\r\n                <span className=\"absolute top-0 right-0 bottom-0 flex items-center rounded-r-md bg-accent px-2 text-muted-foreground text-sm\">\r\n                  {columnMeta.unit}\r\n                </span>\r\n              )}\r\n            </div>\r\n          );\r\n\r\n        case \"range\":\r\n          return (\r\n            <DataTableSliderFilter\r\n              column={column}\r\n              title={columnMeta.label ?? column.id}\r\n            />\r\n          );\r\n\r\n        case \"date\":\r\n        case \"dateRange\":\r\n          return (\r\n            <DataTableDateFilter\r\n              column={column}\r\n              title={columnMeta.label ?? column.id}\r\n              multiple={columnMeta.variant === \"dateRange\"}\r\n            />\r\n          );\r\n\r\n        case \"select\":\r\n        case \"multiSelect\":\r\n          return (\r\n            <DataTableFacetedFilter\r\n              column={column}\r\n              title={columnMeta.label ?? column.id}\r\n              options={columnMeta.options ?? []}\r\n              multiple={columnMeta.variant === \"multiSelect\"}\r\n            />\r\n          );\r\n\r\n        default:\r\n          return null;\r\n      }\r\n    }, [column, columnMeta]);\r\n\r\n    return onFilterRender();\r\n  }\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-toolbar.tsx"
    },
    {
      "path": "components\\data-table\\data-table-view-options.tsx",
      "content": "\"use client\";\r\n\r\nimport type { Table } from \"@tanstack/react-table\";\r\nimport { Check, Settings2 } from \"lucide-react\";\r\nimport * as React from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n} from \"@/components/ui/command\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTableViewOptionsProps<TData>\r\n  extends React.ComponentProps<typeof PopoverContent> {\r\n  table: Table<TData>;\r\n}\r\n\r\nexport function DataTableViewOptions<TData>({\r\n  table,\r\n  ...props\r\n}: DataTableViewOptionsProps<TData>) {\r\n  const columns = React.useMemo(\r\n    () =>\r\n      table\r\n        .getAllColumns()\r\n        .filter(\r\n          (column) =>\r\n            typeof column.accessorFn !== \"undefined\" && column.getCanHide(),\r\n        ),\r\n    [table],\r\n  );\r\n\r\n  return (\r\n    <Popover>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          aria-label=\"Toggle columns\"\r\n          role=\"combobox\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"ml-auto hidden h-8 font-normal lg:flex\"\r\n        >\r\n          <Settings2 className=\"text-muted-foreground\" />\r\n          View\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-44 p-0\" {...props}>\r\n        <Command>\r\n          <CommandInput placeholder=\"Search columns...\" />\r\n          <CommandList>\r\n            <CommandEmpty>No columns found.</CommandEmpty>\r\n            <CommandGroup>\r\n              {columns.map((column) => (\r\n                <CommandItem\r\n                  key={column.id}\r\n                  onSelect={() =>\r\n                    column.toggleVisibility(!column.getIsVisible())\r\n                  }\r\n                >\r\n                  <span className=\"truncate\">\r\n                    {column.columnDef.meta?.label ?? column.id}\r\n                  </span>\r\n                  <Check\r\n                    className={cn(\r\n                      \"ml-auto size-4 shrink-0\",\r\n                      column.getIsVisible() ? \"opacity-100\" : \"opacity-0\",\r\n                    )}\r\n                  />\r\n                </CommandItem>\r\n              ))}\r\n            </CommandGroup>\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table-view-options.tsx"
    },
    {
      "path": "components\\data-table\\data-table.tsx",
      "content": "import { flexRender, type Table as TanstackTable } from \"@tanstack/react-table\";\r\nimport type * as React from \"react\";\r\n\r\nimport { DataTablePagination } from \"@/components/data-table/data-table-pagination\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { getCommonPinningStyles } from \"@/lib/data-table\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DataTableProps<TData> extends React.ComponentProps<\"div\"> {\r\n  table: TanstackTable<TData>;\r\n  actionBar?: React.ReactNode;\r\n}\r\n\r\nexport function DataTable<TData>({\r\n  table,\r\n  actionBar,\r\n  children,\r\n  className,\r\n  ...props\r\n}: DataTableProps<TData>) {\r\n  return (\r\n    <div\r\n      className={cn(\"flex w-full flex-col gap-2.5 overflow-auto\", className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <div className=\"overflow-hidden rounded-md border\">\r\n        <Table>\r\n          <TableHeader>\r\n            {table.getHeaderGroups().map((headerGroup) => (\r\n              <TableRow key={headerGroup.id}>\r\n                {headerGroup.headers.map((header) => (\r\n                  <TableHead\r\n                    key={header.id}\r\n                    colSpan={header.colSpan}\r\n                    style={{\r\n                      ...getCommonPinningStyles({ column: header.column }),\r\n                    }}\r\n                  >\r\n                    {header.isPlaceholder\r\n                      ? null\r\n                      : flexRender(\r\n                          header.column.columnDef.header,\r\n                          header.getContext()\r\n                        )}\r\n                  </TableHead>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableHeader>\r\n          <TableBody>\r\n            {table.getRowModel().rows?.length ? (\r\n              table.getRowModel().rows.map((row) => (\r\n                <TableRow\r\n                  key={row.id}\r\n                  data-state={row.getIsSelected() && \"selected\"}\r\n                >\r\n                  {row.getVisibleCells().map((cell) => (\r\n                    <TableCell\r\n                      key={cell.id}\r\n                      style={{\r\n                        ...getCommonPinningStyles({ column: cell.column }),\r\n                      }}\r\n                    >\r\n                      {flexRender(\r\n                        cell.column.columnDef.cell,\r\n                        cell.getContext()\r\n                      )}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))\r\n            ) : (\r\n              <TableRow>\r\n                <TableCell\r\n                  colSpan={table.getAllColumns().length}\r\n                  className=\"h-24 text-center\"\r\n                >\r\n                  No results.\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      <div className=\"flex flex-col gap-2.5\">\r\n        <DataTablePagination table={table} />\r\n        {actionBar &&\r\n          table.getFilteredSelectedRowModel().rows.length > 0 &&\r\n          actionBar}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\data-table\\data-table.tsx"
    },
    {
      "path": "components\\games\\head-soccer\\index.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useRef, useState, useCallback } from \"react\";\r\nimport { useGameStats } from \"@/hooks/use-game-stats\";\r\n\r\ninterface Player {\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n  width: number;\r\n  height: number;\r\n  onGround: boolean;\r\n  color: string;\r\n  isAI: boolean;\r\n}\r\n\r\ninterface Ball {\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n  radius: number;\r\n}\r\n\r\ninterface GameState {\r\n  player1Score: number;\r\n  player2Score: number;\r\n  timeLeft: number;\r\n  gameRunning: boolean;\r\n  gameOver: boolean;\r\n  winner: string | null;\r\n}\r\n\r\ninterface GoalPost {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst CANVAS_WIDTH = 800;\r\nconst CANVAS_HEIGHT = 300;\r\nconst GRAVITY = 0.5;\r\nconst JUMP_FORCE = -12;\r\nconst MOVE_SPEED = 5;\r\nconst BALL_BOUNCE = 0.85;\r\nconst POST_BOUNCE = 0.9;\r\nconst GOAL_WIDTH = 20;\r\nconst GOAL_HEIGHT = 120;\r\nconst CROSSBAR_HEIGHT = 10;\r\nconst GAME_DURATION = 60;\r\nconst GOAL_COOLDOWN = 1000; // 1 second cooldown after goal\r\nconst MAX_BALL_VELOCITY = 25; // Prevent ball from moving too fast\r\n\r\nexport default function HeadSoccerGame() {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const animationRef = useRef<number>(0);\r\n  const keysRef = useRef<Set<string>>(new Set());\r\n  const { updateStats } = useGameStats(\"head-soccer\");\r\n  const statsTrackedRef = useRef(false);\r\n\r\n  const [gameState, setGameState] = useState<GameState>({\r\n    player1Score: 0,\r\n    player2Score: 0,\r\n    timeLeft: GAME_DURATION,\r\n    gameRunning: false,\r\n    gameOver: false,\r\n    winner: null,\r\n  });\r\n\r\n  const playerRef = useRef<Player>({\r\n    x: 150,\r\n    y: CANVAS_HEIGHT - 100,\r\n    vx: 0,\r\n    vy: 0,\r\n    width: 40,\r\n    height: 60,\r\n    onGround: false,\r\n    color: \"#15803d\",\r\n    isAI: false,\r\n  });\r\n\r\n  const aiPlayerRef = useRef<Player>({\r\n    x: CANVAS_WIDTH - 190,\r\n    y: CANVAS_HEIGHT - 100,\r\n    vx: 0,\r\n    vy: 0,\r\n    width: 40,\r\n    height: 60,\r\n    onGround: false,\r\n    color: \"#ea580c\",\r\n    isAI: true,\r\n  });\r\n\r\n  const ballRef = useRef<Ball>({\r\n    x: CANVAS_WIDTH / 2,\r\n    y: CANVAS_HEIGHT / 2,\r\n    vx: 0,\r\n    vy: 0,\r\n    radius: 15,\r\n  });\r\n\r\n  const gameTimerRef = useRef<NodeJS.Timeout | undefined>(undefined);\r\n  const lastGoalEffectRef = useRef<{\r\n    side: \"left\" | \"right\" | null;\r\n    time: number;\r\n  }>({ side: null, time: 0 });\r\n\r\n  // FIX: Add goal cooldown ref to prevent race condition\r\n  const goalCooldownRef = useRef<number>(0);\r\n\r\n  // Define goal posts structure\r\n  const goalPostsRef = useRef({\r\n    left: {\r\n      vertical: {\r\n        x: 0,\r\n        y: CANVAS_HEIGHT - GOAL_HEIGHT - 20,\r\n        width: GOAL_WIDTH,\r\n        height: GOAL_HEIGHT,\r\n      },\r\n      crossbar: {\r\n        x: 0,\r\n        y: CANVAS_HEIGHT - GOAL_HEIGHT - 20,\r\n        width: GOAL_WIDTH * 4,\r\n        height: CROSSBAR_HEIGHT,\r\n      },\r\n    },\r\n    right: {\r\n      vertical: {\r\n        x: CANVAS_WIDTH - GOAL_WIDTH,\r\n        y: CANVAS_HEIGHT - GOAL_HEIGHT - 20,\r\n        width: GOAL_WIDTH,\r\n        height: GOAL_HEIGHT,\r\n      },\r\n      crossbar: {\r\n        x: CANVAS_WIDTH - GOAL_WIDTH * 4,\r\n        y: CANVAS_HEIGHT - GOAL_HEIGHT - 20,\r\n        width: GOAL_WIDTH * 4,\r\n        height: CROSSBAR_HEIGHT,\r\n      },\r\n    },\r\n  });\r\n\r\n  // Input handling\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      keysRef.current.add(e.key.toLowerCase());\r\n    };\r\n\r\n    const handleKeyUp = (e: KeyboardEvent) => {\r\n      keysRef.current.delete(e.key.toLowerCase());\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    window.addEventListener(\"keyup\", handleKeyUp);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n      window.removeEventListener(\"keyup\", handleKeyUp);\r\n    };\r\n  }, []);\r\n\r\n  // FIX: Extract ball reset into separate function\r\n  const resetBall = useCallback(() => {\r\n    const ball = ballRef.current;\r\n    ball.x = CANVAS_WIDTH / 2;\r\n    ball.y = CANVAS_HEIGHT / 2 - 100;\r\n    ball.vx = 0;\r\n    ball.vy = -3;\r\n  }, []);\r\n\r\n  const resetGame = useCallback(() => {\r\n    playerRef.current = {\r\n      x: 150,\r\n      y: CANVAS_HEIGHT - 100,\r\n      vx: 0,\r\n      vy: 0,\r\n      width: 40,\r\n      height: 60,\r\n      onGround: false,\r\n      color: \"#15803d\",\r\n      isAI: false,\r\n    };\r\n\r\n    aiPlayerRef.current = {\r\n      x: CANVAS_WIDTH - 190,\r\n      y: CANVAS_HEIGHT - 100,\r\n      vx: 0,\r\n      vy: 0,\r\n      width: 40,\r\n      height: 60,\r\n      onGround: false,\r\n      color: \"#ea580c\",\r\n      isAI: true,\r\n    };\r\n\r\n    resetBall();\r\n\r\n    // Reset goal cooldown\r\n    goalCooldownRef.current = 0;\r\n\r\n    setGameState({\r\n      player1Score: 0,\r\n      player2Score: 0,\r\n      timeLeft: GAME_DURATION,\r\n      gameRunning: true,\r\n      gameOver: false,\r\n      winner: null,\r\n    });\r\n  }, [resetBall]);\r\n\r\n  const startGame = useCallback(() => {\r\n    resetGame();\r\n\r\n    // Start game timer\r\n    gameTimerRef.current = setInterval(() => {\r\n      setGameState((prev) => {\r\n        const newTimeLeft = prev.timeLeft - 1;\r\n        if (newTimeLeft <= 0) {\r\n          const winner =\r\n            prev.player1Score > prev.player2Score\r\n              ? \"Player 1\"\r\n              : prev.player2Score > prev.player1Score\r\n              ? \"AI Player\"\r\n              : \"Tie\";\r\n          return {\r\n            ...prev,\r\n            timeLeft: 0,\r\n            gameRunning: false,\r\n            gameOver: true,\r\n            winner,\r\n          };\r\n        }\r\n        return { ...prev, timeLeft: newTimeLeft };\r\n      });\r\n    }, 1000);\r\n  }, [resetGame]);\r\n\r\n  const stopGame = useCallback(() => {\r\n    if (gameTimerRef.current) {\r\n      clearInterval(gameTimerRef.current);\r\n    }\r\n    if (animationRef.current) {\r\n      cancelAnimationFrame(animationRef.current);\r\n    }\r\n  }, []);\r\n\r\n  // AI Logic\r\n  const updateAI = useCallback(() => {\r\n    const ai = aiPlayerRef.current;\r\n    const ball = ballRef.current;\r\n\r\n    // Enhanced AI: predict ball trajectory\r\n    const predictedBallX = ball.x + ball.vx * 10;\r\n    const distanceToBall = Math.abs(ai.x - predictedBallX);\r\n\r\n    if (predictedBallX < ai.x - 20) {\r\n      ai.vx = -MOVE_SPEED * 0.85;\r\n    } else if (predictedBallX > ai.x + 20) {\r\n      ai.vx = MOVE_SPEED * 0.85;\r\n    } else {\r\n      ai.vx *= 0.8;\r\n    }\r\n\r\n    // Smarter jumping\r\n    if (\r\n      distanceToBall < 80 &&\r\n      ball.y < ai.y &&\r\n      ai.onGround &&\r\n      Math.random() < 0.3\r\n    ) {\r\n      ai.vy = JUMP_FORCE;\r\n      ai.onGround = false;\r\n    }\r\n  }, []);\r\n\r\n  // Goal post collision detection and physics\r\n  const handleGoalPostCollision = useCallback((ball: Ball) => {\r\n    const posts = goalPostsRef.current;\r\n\r\n    // Helper function to check collision with a rectangle\r\n    const checkRectCollision = (\r\n      rect: GoalPost,\r\n      isVertical: boolean,\r\n      isLeft: boolean\r\n    ) => {\r\n      const closestX = Math.max(rect.x, Math.min(ball.x, rect.x + rect.width));\r\n      const closestY = Math.max(rect.y, Math.min(ball.y, rect.y + rect.height));\r\n\r\n      const distanceX = ball.x - closestX;\r\n      const distanceY = ball.y - closestY;\r\n      const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\r\n\r\n      if (distance < ball.radius) {\r\n        // Collision detected!\r\n        const overlap = ball.radius - distance;\r\n\r\n        // Check for corner collision (joint of post & crossbar)\r\n        const isNearTopCorner =\r\n          isVertical &&\r\n          Math.abs(ball.y - rect.y) < ball.radius * 2 &&\r\n          Math.abs(ball.x - (isLeft ? rect.x + rect.width : rect.x)) <\r\n            ball.radius * 2;\r\n\r\n        if (isNearTopCorner) {\r\n          // Corner collision - unpredictable bounce\r\n          const angle = Math.atan2(distanceY, distanceX);\r\n          const speed = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);\r\n\r\n          // Add some chaos to corner bounces\r\n          const chaosAngle = angle + (Math.random() - 0.5) * 0.3;\r\n          ball.vx = Math.cos(chaosAngle) * speed * POST_BOUNCE;\r\n          ball.vy = Math.sin(chaosAngle) * speed * POST_BOUNCE;\r\n\r\n          // Push ball away from corner\r\n          ball.x += Math.cos(angle) * (overlap + 1);\r\n          ball.y += Math.sin(angle) * (overlap + 1);\r\n        } else if (isVertical) {\r\n          // Vertical post collision\r\n          const normalX = distanceX / distance;\r\n          const dotProduct = ball.vx * normalX + ball.vy * 0;\r\n\r\n          // Reflect velocity\r\n          ball.vx = (ball.vx - 2 * dotProduct * normalX) * POST_BOUNCE;\r\n\r\n          // Push ball away from post\r\n          ball.x += normalX * (overlap + 1);\r\n        } else {\r\n          // Horizontal crossbar collision\r\n          const normalY = distanceY / distance;\r\n          const dotProduct = ball.vx * 0 + ball.vy * normalY;\r\n\r\n          // Reflect velocity - sharper bounce for crossbar\r\n          ball.vy = (ball.vy - 2 * dotProduct * normalY) * POST_BOUNCE;\r\n\r\n          // If hit from below, add downward emphasis\r\n          if (ball.vy < 0 && ball.y > rect.y + rect.height) {\r\n            ball.vy *= 1.2;\r\n          }\r\n\r\n          // Push ball away from crossbar\r\n          ball.y += normalY * (overlap + 1);\r\n        }\r\n\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Check all goal post components\r\n    let collided = false;\r\n\r\n    // Left goal\r\n    collided = checkRectCollision(posts.left.vertical, true, true) || collided;\r\n    collided = checkRectCollision(posts.left.crossbar, false, true) || collided;\r\n\r\n    // Right goal\r\n    collided =\r\n      checkRectCollision(posts.right.vertical, true, false) || collided;\r\n    collided =\r\n      checkRectCollision(posts.right.crossbar, false, false) || collided;\r\n\r\n    return collided;\r\n  }, []);\r\n\r\n  // FIX: Add velocity cap to prevent clipping through posts\r\n  const capBallVelocity = useCallback((ball: Ball) => {\r\n    const speed = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);\r\n    if (speed > MAX_BALL_VELOCITY) {\r\n      const scale = MAX_BALL_VELOCITY / speed;\r\n      ball.vx *= scale;\r\n      ball.vy *= scale;\r\n    }\r\n  }, []);\r\n\r\n  // Physics update\r\n  const updatePhysics = useCallback(() => {\r\n    const player = playerRef.current;\r\n    const aiPlayer = aiPlayerRef.current;\r\n    const ball = ballRef.current;\r\n\r\n    // Handle player input\r\n    if (keysRef.current.has(\"a\")) player.vx = -MOVE_SPEED;\r\n    else if (keysRef.current.has(\"d\")) player.vx = MOVE_SPEED;\r\n    else player.vx *= 0.8;\r\n\r\n    if (keysRef.current.has(\"w\") && player.onGround) {\r\n      player.vy = JUMP_FORCE;\r\n      player.onGround = false;\r\n    }\r\n\r\n    // Update AI\r\n    updateAI();\r\n\r\n    // Apply gravity and update positions\r\n    const players = [player, aiPlayer];\r\n    players.forEach((p) => {\r\n      p.vy += GRAVITY;\r\n      p.x += p.vx;\r\n      p.y += p.vy;\r\n\r\n      // Ground collision\r\n      if (p.y + p.height >= CANVAS_HEIGHT - 20) {\r\n        p.y = CANVAS_HEIGHT - 20 - p.height;\r\n        p.vy = 0;\r\n        p.onGround = true;\r\n      }\r\n\r\n      // Wall collision\r\n      if (p.x < 0) p.x = 0;\r\n      if (p.x + p.width > CANVAS_WIDTH) p.x = CANVAS_WIDTH - p.width;\r\n    });\r\n\r\n    // Ball physics\r\n    ball.vy += GRAVITY * 0.3;\r\n    ball.x += ball.vx;\r\n    ball.y += ball.vy;\r\n\r\n    // FIX: Cap ball velocity to prevent clipping\r\n    capBallVelocity(ball);\r\n\r\n    // Ball ground collision\r\n    if (ball.y + ball.radius >= CANVAS_HEIGHT - 20) {\r\n      ball.y = CANVAS_HEIGHT - 20 - ball.radius;\r\n      ball.vy *= -BALL_BOUNCE;\r\n      ball.vx *= 0.95;\r\n    }\r\n\r\n    // Ball ceiling collision\r\n    if (ball.y - ball.radius <= 0) {\r\n      ball.y = ball.radius;\r\n      ball.vy *= -BALL_BOUNCE;\r\n    }\r\n\r\n    // FIX: Check if ball is in goal area FIRST - if so, skip post collision\r\n    const isInLeftGoalArea =\r\n      ball.x <= GOAL_WIDTH * 4 && ball.y >= CANVAS_HEIGHT - GOAL_HEIGHT - 20;\r\n    const isInRightGoalArea =\r\n      ball.x >= CANVAS_WIDTH - GOAL_WIDTH * 4 &&\r\n      ball.y >= CANVAS_HEIGHT - GOAL_HEIGHT - 20;\r\n    const isInGoalArea = isInLeftGoalArea || isInRightGoalArea;\r\n\r\n    // Only check goal post collisions if ball is NOT deep in the goal area\r\n    let hitPost = false;\r\n    if (!isInGoalArea) {\r\n      hitPost = handleGoalPostCollision(ball);\r\n    }\r\n\r\n    // Ball wall collision (only if not in goal area and didn't hit post)\r\n    if (!hitPost && !isInGoalArea) {\r\n      if (\r\n        ball.x - ball.radius <= 0 &&\r\n        ball.y < CANVAS_HEIGHT - GOAL_HEIGHT - 20\r\n      ) {\r\n        ball.vx *= -BALL_BOUNCE;\r\n        ball.x = ball.radius;\r\n      }\r\n      if (\r\n        ball.x + ball.radius >= CANVAS_WIDTH &&\r\n        ball.y < CANVAS_HEIGHT - GOAL_HEIGHT - 20\r\n      ) {\r\n        ball.vx *= -BALL_BOUNCE;\r\n        ball.x = CANVAS_WIDTH - ball.radius;\r\n      }\r\n    }\r\n\r\n    // Player-ball collision\r\n    players.forEach((p, index) => {\r\n      const dx = ball.x - (p.x + p.width / 2);\r\n      const dy = ball.y - (p.y + p.height / 2);\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      if (distance < ball.radius + 25) {\r\n        const angle = Math.atan2(dy, dx);\r\n        const force = 8;\r\n        ball.vx = Math.cos(angle) * force;\r\n        ball.vy = Math.sin(angle) * force;\r\n\r\n        // Super shot detection\r\n        const isSuperShot =\r\n          (index === 0 && keysRef.current.has(\"w\")) ||\r\n          (index === 1 && Math.random() < 0.15);\r\n        if (isSuperShot) {\r\n          ball.vx *= 1.8;\r\n          ball.vy *= 1.8;\r\n        }\r\n      }\r\n    });\r\n\r\n    // FIX: Goal detection with cooldown and mutual exclusivity\r\n    // Goals should be scored when ball crosses the goal line while in the goal area\r\n    const now = Date.now();\r\n    const canScoreGoal = now - goalCooldownRef.current > GOAL_COOLDOWN;\r\n\r\n    if (canScoreGoal) {\r\n      // Left goal - Player 2 (AI) scores\r\n      // Ball needs to be past the left boundary AND in the goal height range\r\n      if (\r\n        ball.x - ball.radius <= GOAL_WIDTH &&\r\n        ball.y >= CANVAS_HEIGHT - GOAL_HEIGHT - 20 &&\r\n        ball.y <= CANVAS_HEIGHT - 20\r\n      ) {\r\n        setGameState((prev) => ({\r\n          ...prev,\r\n          player2Score: prev.player2Score + 1,\r\n        }));\r\n        goalCooldownRef.current = now;\r\n        lastGoalEffectRef.current = { side: \"left\", time: now };\r\n        resetBall();\r\n      }\r\n      // Right goal - Player 1 scores\r\n      // Ball needs to be past the right boundary AND in the goal height range\r\n      else if (\r\n        ball.x + ball.radius >= CANVAS_WIDTH - GOAL_WIDTH &&\r\n        ball.y >= CANVAS_HEIGHT - GOAL_HEIGHT - 20 &&\r\n        ball.y <= CANVAS_HEIGHT - 20\r\n      ) {\r\n        setGameState((prev) => ({\r\n          ...prev,\r\n          player1Score: prev.player1Score + 1,\r\n        }));\r\n        goalCooldownRef.current = now;\r\n        lastGoalEffectRef.current = { side: \"right\", time: now };\r\n        resetBall();\r\n      }\r\n    }\r\n  }, [updateAI, handleGoalPostCollision, capBallVelocity, resetBall]);\r\n\r\n  // Enhanced render function\r\n  const render = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n\r\n    // Beautiful gradient background\r\n    const backgroundGradient = ctx.createLinearGradient(0, 0, 0, CANVAS_HEIGHT);\r\n    backgroundGradient.addColorStop(0, \"#1e3a8a\");\r\n    backgroundGradient.addColorStop(0.3, \"#3b82f6\");\r\n    backgroundGradient.addColorStop(0.6, \"#60a5fa\");\r\n    backgroundGradient.addColorStop(0.85, \"#93c5fd\");\r\n    backgroundGradient.addColorStop(1, \"#10b981\");\r\n    ctx.fillStyle = backgroundGradient;\r\n    ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\r\n    // Animated sun\r\n    const sunX = CANVAS_WIDTH - 100;\r\n    const sunY = 60;\r\n    const sunGradient = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, 40);\r\n    sunGradient.addColorStop(0, \"#fef08a\");\r\n    sunGradient.addColorStop(0.5, \"#fbbf24\");\r\n    sunGradient.addColorStop(1, \"rgba(251, 191, 36, 0)\");\r\n    ctx.fillStyle = sunGradient;\r\n    ctx.beginPath();\r\n    ctx.arc(sunX, sunY, 40, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Fluffy clouds with shadows\r\n    const drawCloud = (x: number, y: number, size: number) => {\r\n      ctx.fillStyle = \"rgba(100, 116, 139, 0.3)\";\r\n      ctx.beginPath();\r\n      ctx.arc(x + 2, y + 2, size, 0, Math.PI * 2);\r\n      ctx.arc(x + size * 1.5 + 2, y + 2, size * 1.2, 0, Math.PI * 2);\r\n      ctx.arc(x + size * 3 + 2, y + 2, size, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.9)\";\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, size, 0, Math.PI * 2);\r\n      ctx.arc(x + size * 1.5, y, size * 1.2, 0, Math.PI * 2);\r\n      ctx.arc(x + size * 3, y, size, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    };\r\n    drawCloud(80, 50, 15);\r\n    drawCloud(600, 80, 18);\r\n    drawCloud(350, 40, 12);\r\n    drawCloud(500, 120, 14);\r\n\r\n    // Beautiful patterned ground\r\n    const groundGradient = ctx.createLinearGradient(\r\n      0,\r\n      CANVAS_HEIGHT - 50,\r\n      0,\r\n      CANVAS_HEIGHT\r\n    );\r\n    groundGradient.addColorStop(0, \"#059669\");\r\n    groundGradient.addColorStop(1, \"#047857\");\r\n    ctx.fillStyle = groundGradient;\r\n    ctx.fillRect(0, CANVAS_HEIGHT - 20, CANVAS_WIDTH, 20);\r\n\r\n    // Grass pattern\r\n    for (let i = 0; i < CANVAS_WIDTH; i += 40) {\r\n      ctx.fillStyle =\r\n        i % 80 === 0 ? \"rgba(5, 150, 105, 0.3)\" : \"rgba(4, 120, 87, 0.3)\";\r\n      ctx.fillRect(i, CANVAS_HEIGHT - 20, 40, 20);\r\n    }\r\n\r\n    // Ground border\r\n    ctx.strokeStyle = \"#065f46\";\r\n    ctx.lineWidth = 3;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, CANVAS_HEIGHT - 20);\r\n    ctx.lineTo(CANVAS_WIDTH, CANVAS_HEIGHT - 20);\r\n    ctx.stroke();\r\n\r\n    // Center line with glow\r\n    ctx.shadowBlur = 10;\r\n    ctx.shadowColor = \"rgba(255, 255, 255, 0.5)\";\r\n    ctx.strokeStyle = \"#ffffff\";\r\n    ctx.lineWidth = 4;\r\n    ctx.setLineDash([15, 10]);\r\n    ctx.beginPath();\r\n    ctx.moveTo(CANVAS_WIDTH / 2, 0);\r\n    ctx.lineTo(CANVAS_WIDTH / 2, CANVAS_HEIGHT - 20);\r\n    ctx.stroke();\r\n    ctx.setLineDash([]);\r\n    ctx.shadowBlur = 0;\r\n\r\n    // Draw goal posts with 3D effect\r\n    const drawGoalPost = (isLeft: boolean) => {\r\n      const posts = isLeft\r\n        ? goalPostsRef.current.left\r\n        : goalPostsRef.current.right;\r\n\r\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.1)\";\r\n      ctx.fillRect(\r\n        isLeft ? 0 : CANVAS_WIDTH - GOAL_WIDTH * 4,\r\n        CANVAS_HEIGHT - GOAL_HEIGHT - 20,\r\n        GOAL_WIDTH * 4,\r\n        GOAL_HEIGHT\r\n      );\r\n\r\n      ctx.strokeStyle = \"rgba(255, 255, 255, 0.3)\";\r\n      ctx.lineWidth = 1;\r\n      const netSpacing = 15;\r\n      for (\r\n        let y = CANVAS_HEIGHT - GOAL_HEIGHT - 20;\r\n        y < CANVAS_HEIGHT - 20;\r\n        y += netSpacing\r\n      ) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(isLeft ? 0 : CANVAS_WIDTH - GOAL_WIDTH * 4, y);\r\n        ctx.lineTo(isLeft ? GOAL_WIDTH * 4 : CANVAS_WIDTH, y);\r\n        ctx.stroke();\r\n      }\r\n      for (let x = 0; x < GOAL_WIDTH * 4; x += netSpacing) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(\r\n          isLeft ? x : CANVAS_WIDTH - GOAL_WIDTH * 4 + x,\r\n          CANVAS_HEIGHT - GOAL_HEIGHT - 20\r\n        );\r\n        ctx.lineTo(\r\n          isLeft ? x : CANVAS_WIDTH - GOAL_WIDTH * 4 + x,\r\n          CANVAS_HEIGHT - 20\r\n        );\r\n        ctx.stroke();\r\n      }\r\n\r\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.3)\";\r\n      ctx.fillRect(\r\n        posts.vertical.x + (isLeft ? 3 : -3),\r\n        posts.vertical.y + 3,\r\n        posts.vertical.width,\r\n        posts.vertical.height\r\n      );\r\n      ctx.fillRect(\r\n        posts.crossbar.x + (isLeft ? 3 : -3),\r\n        posts.crossbar.y + 3,\r\n        posts.crossbar.width,\r\n        posts.crossbar.height\r\n      );\r\n\r\n      const postGradient = ctx.createLinearGradient(\r\n        posts.vertical.x,\r\n        0,\r\n        posts.vertical.x + posts.vertical.width,\r\n        0\r\n      );\r\n      postGradient.addColorStop(0, \"#ffffff\");\r\n      postGradient.addColorStop(0.5, \"#e5e5e5\");\r\n      postGradient.addColorStop(1, \"#d4d4d4\");\r\n\r\n      ctx.fillStyle = postGradient;\r\n      ctx.fillRect(\r\n        posts.vertical.x,\r\n        posts.vertical.y,\r\n        posts.vertical.width,\r\n        posts.vertical.height\r\n      );\r\n      ctx.fillRect(\r\n        posts.crossbar.x,\r\n        posts.crossbar.y,\r\n        posts.crossbar.width,\r\n        posts.crossbar.height\r\n      );\r\n\r\n      ctx.strokeStyle = \"#a3a3a3\";\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeRect(\r\n        posts.vertical.x,\r\n        posts.vertical.y,\r\n        posts.vertical.width,\r\n        posts.vertical.height\r\n      );\r\n      ctx.strokeRect(\r\n        posts.crossbar.x,\r\n        posts.crossbar.y,\r\n        posts.crossbar.width,\r\n        posts.crossbar.height\r\n      );\r\n\r\n      ctx.fillStyle = \"rgba(255, 255, 255, 0.6)\";\r\n      ctx.fillRect(\r\n        posts.vertical.x + 2,\r\n        posts.vertical.y,\r\n        3,\r\n        posts.vertical.height\r\n      );\r\n      ctx.fillRect(\r\n        posts.crossbar.x + 2,\r\n        posts.crossbar.y,\r\n        posts.crossbar.width - 4,\r\n        3\r\n      );\r\n    };\r\n\r\n    drawGoalPost(true);\r\n    drawGoalPost(false);\r\n\r\n    // Goal celebration effect\r\n    const now = Date.now();\r\n    if (\r\n      lastGoalEffectRef.current.side &&\r\n      now - lastGoalEffectRef.current.time < 1000\r\n    ) {\r\n      const progress = (now - lastGoalEffectRef.current.time) / 1000;\r\n      const alpha = 1 - progress;\r\n      const x =\r\n        lastGoalEffectRef.current.side === \"left\"\r\n          ? GOAL_WIDTH * 2\r\n          : CANVAS_WIDTH - GOAL_WIDTH * 2;\r\n\r\n      ctx.fillStyle = `rgba(255, 215, 0, ${alpha * 0.5})`;\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        x,\r\n        CANVAS_HEIGHT - GOAL_HEIGHT / 2 - 20,\r\n        50 + progress * 50,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n\r\n      for (let i = 0; i < 8; i++) {\r\n        const angle = (Math.PI * 2 * i) / 8;\r\n        const dist = progress * 100;\r\n        const px = x + Math.cos(angle) * dist;\r\n        const py =\r\n          CANVAS_HEIGHT - GOAL_HEIGHT / 2 - 20 + Math.sin(angle) * dist;\r\n        ctx.fillStyle = `rgba(255, 215, 0, ${alpha})`;\r\n        ctx.beginPath();\r\n        ctx.arc(px, py, 5, 0, Math.PI * 2);\r\n        ctx.fill();\r\n      }\r\n    }\r\n\r\n    // Enhanced player drawing with shadows and details\r\n    const drawPlayer = (player: Player) => {\r\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.3)\";\r\n      ctx.beginPath();\r\n      ctx.ellipse(\r\n        player.x + player.width / 2,\r\n        CANVAS_HEIGHT - 22,\r\n        player.width / 2,\r\n        8,\r\n        0,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n\r\n      const bodyGradient = ctx.createLinearGradient(\r\n        player.x,\r\n        player.y,\r\n        player.x + player.width,\r\n        player.y\r\n      );\r\n      const baseColor = player.color;\r\n      bodyGradient.addColorStop(0, baseColor);\r\n      bodyGradient.addColorStop(0.5, baseColor);\r\n      bodyGradient.addColorStop(1, baseColor + \"cc\");\r\n      ctx.fillStyle = bodyGradient;\r\n      ctx.fillRect(player.x, player.y + 30, player.width, player.height - 30);\r\n\r\n      ctx.strokeStyle = \"rgba(0, 0, 0, 0.5)\";\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeRect(player.x, player.y + 30, player.width, player.height - 30);\r\n\r\n      const headGradient = ctx.createRadialGradient(\r\n        player.x + player.width / 2 - 8,\r\n        player.y + 12,\r\n        0,\r\n        player.x + player.width / 2,\r\n        player.y + 20,\r\n        25\r\n      );\r\n      headGradient.addColorStop(0, \"#ffd4a3\");\r\n      headGradient.addColorStop(1, \"#d4a373\");\r\n      ctx.fillStyle = headGradient;\r\n      ctx.beginPath();\r\n      ctx.arc(player.x + player.width / 2, player.y + 20, 25, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      ctx.strokeStyle = \"#a0826d\";\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(player.x + player.width / 2, player.y + 20, 25, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n\r\n      ctx.fillStyle = \"#ffffff\";\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        player.x + player.width / 2 - 8,\r\n        player.y + 15,\r\n        5,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.arc(\r\n        player.x + player.width / 2 + 8,\r\n        player.y + 15,\r\n        5,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = \"#000000\";\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        player.x + player.width / 2 - 8,\r\n        player.y + 15,\r\n        3,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.arc(\r\n        player.x + player.width / 2 + 8,\r\n        player.y + 15,\r\n        3,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = \"#ffffff\";\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        player.x + player.width / 2 - 7,\r\n        player.y + 14,\r\n        1,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.arc(\r\n        player.x + player.width / 2 + 9,\r\n        player.y + 14,\r\n        1,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n\r\n      ctx.strokeStyle = \"#000000\";\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        player.x + player.width / 2,\r\n        player.y + 22,\r\n        8,\r\n        0.2,\r\n        Math.PI - 0.2\r\n      );\r\n      ctx.stroke();\r\n    };\r\n\r\n    drawPlayer(playerRef.current);\r\n    drawPlayer(aiPlayerRef.current);\r\n\r\n    // Enhanced ball with realistic soccer pattern\r\n    const ball = ballRef.current;\r\n\r\n    const shadowY = CANVAS_HEIGHT - 22;\r\n    const shadowSize = Math.max(5, 20 - (shadowY - ball.y) / 10);\r\n    ctx.fillStyle = \"rgba(0, 0, 0, 0.3)\";\r\n    ctx.beginPath();\r\n    ctx.ellipse(ball.x, shadowY, shadowSize, shadowSize / 2, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    const ballGradient = ctx.createRadialGradient(\r\n      ball.x - 5,\r\n      ball.y - 5,\r\n      0,\r\n      ball.x,\r\n      ball.y,\r\n      ball.radius\r\n    );\r\n    ballGradient.addColorStop(0, \"#ffffff\");\r\n    ballGradient.addColorStop(0.7, \"#f0f0f0\");\r\n    ballGradient.addColorStop(1, \"#d0d0d0\");\r\n    ctx.fillStyle = ballGradient;\r\n    ctx.beginPath();\r\n    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.strokeStyle = \"#000000\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.lineWidth = 2;\r\n\r\n    ctx.beginPath();\r\n    for (let i = 0; i < 5; i++) {\r\n      const angle = (Math.PI * 2 * i) / 5 - Math.PI / 2;\r\n      const x = ball.x + Math.cos(angle) * 6;\r\n      const y = ball.y + Math.sin(angle) * 6;\r\n      if (i === 0) ctx.moveTo(x, y);\r\n      else ctx.lineTo(x, y);\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    for (let i = 0; i < 5; i++) {\r\n      const angle = (Math.PI * 2 * i) / 5 - Math.PI / 2;\r\n      const x = ball.x + Math.cos(angle) * 10;\r\n      const y = ball.y + Math.sin(angle) * 10;\r\n      ctx.strokeRect(x - 3, y - 3, 6, 6);\r\n    }\r\n\r\n    ctx.strokeStyle = \"#404040\";\r\n    ctx.lineWidth = 2;\r\n    ctx.beginPath();\r\n    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n  }, []);\r\n\r\n  // Game loop\r\n  useEffect(() => {\r\n    const gameLoop = () => {\r\n      if (gameState.gameRunning) {\r\n        updatePhysics();\r\n      }\r\n      render();\r\n      animationRef.current = requestAnimationFrame(gameLoop);\r\n    };\r\n\r\n    gameLoop();\r\n\r\n    return () => {\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, [gameState.gameRunning, updatePhysics, render]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      stopGame();\r\n    };\r\n  }, [stopGame]);\r\n\r\n  // Track stats when game is over\r\n  useEffect(() => {\r\n    if (gameState.gameOver && !statsTrackedRef.current && gameState.winner) {\r\n      statsTrackedRef.current = true;\r\n\r\n      const playerWon = gameState.winner === \"Player 1\";\r\n      const tie = gameState.winner === \"Tie\";\r\n\r\n      updateStats({ playerWon, tie });\r\n    }\r\n\r\n    // Reset stats tracked when starting a new game\r\n    if (!gameState.gameOver && gameState.gameRunning) {\r\n      statsTrackedRef.current = false;\r\n    }\r\n  }, [gameState.gameOver, gameState.winner, gameState.gameRunning, updateStats]);\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full\">\r\n      {/* Start Game Dialog */}\r\n      {/* Start Game Dialog */}\r\n      {!gameState.gameRunning && !gameState.gameOver && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-md mx-4 animate-[scale-in_0.3s_ease-out]\">\r\n            <div className=\"bg-linear-to-br from-slate-800 via-purple-900 to-slate-800 rounded-2xl shadow-2xl border-4 border-yellow-400/50 overflow-hidden\">\r\n              {/* Animated Background */}\r\n              <div className=\"absolute inset-0 opacity-20\">\r\n                <div className=\"absolute top-0 left-0 w-32 h-32 bg-yellow-400 rounded-full blur-3xl animate-pulse\"></div>\r\n                <div className=\"absolute bottom-0 right-0 w-32 h-32 bg-orange-400 rounded-full blur-3xl animate-pulse delay-1000\"></div>\r\n              </div>\r\n\r\n              <div className=\"relative p-8\">\r\n                <h2 className=\"text-4xl font-black text-center mb-2 bg-linear-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent animate-pulse\">\r\n                  âš½ HEAD SOCCER âš½\r\n                </h2>\r\n                <p className=\"text-center text-yellow-300 font-bold text-xl mb-6\">\r\n                  CHAMPIONSHIP\r\n                </p>\r\n\r\n                <div className=\"space-y-4 mb-8\">\r\n                  <div className=\"flex items-start gap-3 bg-black/30 p-3 rounded-lg border border-green-400/30\">\r\n                    <span className=\"text-2xl\">ðŸŽ®</span>\r\n                    <span className=\"text-gray-200\">\r\n                      Player 1:{\" \"}\r\n                      <strong className=\"text-green-400\">W/A/D</strong> keys\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-3 bg-black/30 p-3 rounded-lg border border-blue-400/30\">\r\n                    <span className=\"text-2xl\">âš½</span>\r\n                    <span className=\"text-gray-200\">\r\n                      Hit the ball with your head to score goals\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-3 bg-black/30 p-3 rounded-lg border border-yellow-400/30\">\r\n                    <span className=\"text-2xl\">ðŸ’¥</span>\r\n                    <span className=\"text-gray-200\">\r\n                      Press <strong className=\"text-yellow-400\">W</strong> while\r\n                      hitting for super shot!\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-3 bg-black/30 p-3 rounded-lg border border-purple-400/30\">\r\n                    <span className=\"text-2xl\">ðŸ</span>\r\n                    <span className=\"text-gray-200\">\r\n                      Score the most goals in 60 seconds to win!\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={startGame}\r\n                  className=\"w-full py-4 px-6 bg-linear-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-black text-xl rounded-xl shadow-lg transform hover:scale-105 transition-all duration-200 border-2 border-green-400\"\r\n                >\r\n                  ðŸŽ® START GAME\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Game Over Dialog */}\r\n      {gameState.gameOver && gameState.winner && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-md mx-4 animate-[scale-in_0.3s_ease-out]\">\r\n            <div className=\"bg-linear-to-br from-yellow-900 via-orange-900 to-red-900 rounded-2xl shadow-2xl border-4 border-yellow-400 overflow-hidden\">\r\n              {/* Animated Background */}\r\n              <div className=\"absolute inset-0 opacity-20\">\r\n                <div className=\"absolute top-0 left-0 w-40 h-40 bg-yellow-300 rounded-full blur-3xl animate-pulse\"></div>\r\n                <div className=\"absolute bottom-0 right-0 w-40 h-40 bg-orange-300 rounded-full blur-3xl animate-pulse delay-500\"></div>\r\n              </div>\r\n\r\n              <div className=\"relative p-8\">\r\n                <h2 className=\"text-5xl font-black text-center mb-4 text-yellow-300 animate-bounce\">\r\n                  ðŸ† GAME OVER! ðŸ†\r\n                </h2>\r\n                <p className=\"text-center text-2xl font-bold mb-8 text-white\">\r\n                  {gameState.winner === \"Tie\"\r\n                    ? \"ðŸ¤ IT'S A TIE! ðŸ¤\"\r\n                    : `ðŸŽ‰ ${gameState.winner.toUpperCase()} WINS! ðŸŽ‰`}\r\n                </p>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4 mb-8\">\r\n                  <div className=\"text-center p-6 bg-green-500/30 rounded-xl border-2 border-green-400 backdrop-blur-sm\">\r\n                    <div className=\"text-5xl font-black text-green-300 mb-2\">\r\n                      {gameState.player1Score}\r\n                    </div>\r\n                    <div className=\"text-sm font-bold text-green-200\">\r\n                      PLAYER 1\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-center p-6 bg-orange-500/30 rounded-xl border-2 border-orange-400 backdrop-blur-sm\">\r\n                    <div className=\"text-5xl font-black text-orange-300 mb-2\">\r\n                      {gameState.player2Score}\r\n                    </div>\r\n                    <div className=\"text-sm font-bold text-orange-200\">\r\n                      AI PLAYER\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={startGame}\r\n                  className=\"w-full cursor-pointer py-4 px-6 bg-linear-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-black text-xl rounded-xl shadow-lg transform hover:scale-105 transition-all duration-200 border-2 border-yellow-300\"\r\n                >\r\n                  ðŸ”„ PLAY AGAIN\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Fullscreen Game Canvas */}\r\n      <div className=\"relative w-full h-full bg-linear-to-br from-slate-900 via-purple-900 to-slate-900\">\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={CANVAS_WIDTH}\r\n          height={CANVAS_HEIGHT}\r\n          className=\"w-full h-full\"\r\n        />\r\n\r\n        {/* HUD Overlay */}\r\n        {gameState.gameRunning && (\r\n          <div className=\"absolute top-0 left-0 right-0 flex justify-between items-center p-4 pointer-events-none\">\r\n            <div className=\"bg-green-500/30 backdrop-blur-md px-6 py-3 rounded-lg border border-green-400/50\">\r\n              <div className=\"text-4xl font-bold text-white drop-shadow-lg\">\r\n                {gameState.player1Score}\r\n              </div>\r\n              <div className=\"text-xs text-green-100 font-semibold\">\r\n                Player 1\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-purple-500/30 backdrop-blur-md px-8 py-3 rounded-lg border border-purple-400/50\">\r\n              <div className=\"text-4xl font-bold text-white drop-shadow-lg\">\r\n                {formatTime(gameState.timeLeft)}\r\n              </div>\r\n              <div className=\"text-xs text-purple-100 font-semibold text-center\">\r\n                Time Left\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-orange-500/30 backdrop-blur-md px-6 py-3 rounded-lg border border-orange-400/50\">\r\n              <div className=\"text-4xl font-bold text-white drop-shadow-lg\">\r\n                {gameState.player2Score}\r\n              </div>\r\n              <div className=\"text-xs text-orange-100 font-semibold\">\r\n                AI Player\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\games\\head-soccer\\index.tsx"
    },
    {
      "path": "components\\games\\paaji\\index.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { X, Sparkles, Trophy, Zap } from \"lucide-react\";\r\nimport { useSound } from \"@/hooks/use-sound\";\r\nimport Image from \"next/image\";\r\n\r\ntype GameStatus = \"idle\" | \"in-progress\" | \"won\" | \"lost\" | \"cashed-out\";\r\ntype Difficulty = \"Easy\" | \"Hard\";\r\n\r\ninterface PaajiProps {\r\n  rows?: number;\r\n  cols?: number;\r\n}\r\n\r\ntype RowConfig = {\r\n  safeIndices: number[];\r\n  revealedIndex?: number;\r\n};\r\n\r\ntype PopupType = \"win\" | \"lose\" | null;\r\ntype PopupState = {\r\n  isOpen: boolean;\r\n  type: PopupType;\r\n};\r\n\r\nexport function Paaji({ rows = 8, cols = 4 }: PaajiProps) {\r\n  const [status, setStatus] = React.useState<GameStatus>(\"idle\");\r\n  const [currentRow, setCurrentRow] = React.useState(0);\r\n  const [config, setConfig] = React.useState<RowConfig[]>([]);\r\n  const [steps, setSteps] = React.useState(0);\r\n  const [difficulty, setDifficulty] = React.useState<Difficulty>(\"Easy\");\r\n  const [numCols, setNumCols] = React.useState(cols);\r\n  const [betAmount, setBetAmount] = React.useState<string>(\"10\");\r\n  const [balance, setBalance] = React.useState<number>(1000);\r\n  const [popup, setPopup] = React.useState<PopupState>({\r\n    isOpen: false,\r\n    type: null,\r\n  });\r\n  const [errorMessage, setErrorMessage] = React.useState<string>(\"\");\r\n  const [successMessage, setSuccessMessage] = React.useState<string>(\"\");\r\n\r\n  const [PaajiWinSound] = useSound(\"/sounds/PaajiWin.mp3\");\r\n  const [BetSound] = useSound(\"/sounds/Bet.mp3\");\r\n  const [PaajiLoseSound] = useSound(\"/sounds/PaajiLose.mp3\");\r\n  const [PaajiCashoutSound] = useSound(\"/sounds/PaajiCashOut.mp3\");\r\n\r\n  const multiplier = React.useMemo(() => {\r\n    const easy = [1.12, 1.36, 1.65, 1.95, 2.0, 2.4, 2.6, 3.0];\r\n    const hard = [1.25, 1.56, 1.95, 2.2, 2.8, 3.5, 4.3, 5.0];\r\n    const list = difficulty === \"Easy\" ? easy : hard;\r\n    return list[Math.min(steps, list.length - 1)].toFixed(2);\r\n  }, [steps, difficulty]);\r\n\r\n  const potentialWin = React.useMemo(() => {\r\n    const bet = parseFloat(betAmount) || 0;\r\n    return (bet * parseFloat(multiplier)).toFixed(2);\r\n  }, [betAmount, multiplier]);\r\n\r\n  const canPlay = status === \"in-progress\";\r\n\r\n  const clearMessages = () => {\r\n    setErrorMessage(\"\");\r\n    setSuccessMessage(\"\");\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (errorMessage || successMessage) {\r\n      const t = setTimeout(clearMessages, 4000);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [errorMessage, successMessage]);\r\n\r\n  React.useEffect(() => {\r\n    setNumCols(difficulty === \"Easy\" ? 4 : 5);\r\n  }, [difficulty]);\r\n\r\n  function generateBoard(): RowConfig[] {\r\n    const safePerRow = difficulty === \"Easy\" ? 2 : 1;\r\n    return Array.from({ length: rows }, () => {\r\n      const safeIndices: number[] = [];\r\n      while (safeIndices.length < safePerRow) {\r\n        const idx = Math.floor(Math.random() * numCols);\r\n        if (!safeIndices.includes(idx)) safeIndices.push(idx);\r\n      }\r\n      return { safeIndices };\r\n    });\r\n  }\r\n\r\n  async function startGame() {\r\n    clearMessages();\r\n\r\n    const bet = parseFloat(betAmount);\r\n    if (isNaN(bet) || bet <= 0) {\r\n      setErrorMessage(\"Please enter a valid bet amount.\");\r\n      return;\r\n    }\r\n\r\n    if (bet > balance) {\r\n      setErrorMessage(\"Insufficient balance!\");\r\n      return;\r\n    }\r\n\r\n    if (bet < 1) {\r\n      setErrorMessage(\"Minimum bet amount is 1.\");\r\n      return;\r\n    }\r\n\r\n    BetSound();\r\n    setBalance((prev) => prev - bet);\r\n    setConfig(generateBoard());\r\n    setStatus(\"in-progress\");\r\n    setCurrentRow(0);\r\n    setSteps(0);\r\n    setPopup({ isOpen: false, type: null });\r\n    setSuccessMessage(\"ðŸŽ® Game started! Good luck!\");\r\n  }\r\n\r\n  function resetGame() {\r\n    setStatus(\"idle\");\r\n    setCurrentRow(0);\r\n    setConfig([]);\r\n    setSteps(0);\r\n    setPopup({ isOpen: false, type: null });\r\n  }\r\n\r\n  const cashOut = async () => {\r\n    if (status === \"in-progress\") {\r\n      PaajiCashoutSound();\r\n      setStatus(\"cashed-out\");\r\n      const winnings = parseFloat(potentialWin);\r\n      setBalance((prev) => prev + winnings);\r\n      setSuccessMessage(`ðŸ’° Cashed out ${winnings.toFixed(2)} coins!`);\r\n    }\r\n  };\r\n\r\n  const pickTile = (row: number, col: number) => {\r\n    if (!canPlay || row !== currentRow) return;\r\n\r\n    setConfig((prev) => {\r\n      const next = [...prev];\r\n      next[row] = { ...next[row], revealedIndex: col };\r\n      return next;\r\n    });\r\n\r\n    const isSafe = config[row]?.safeIndices?.includes(col);\r\n    if (isSafe) {\r\n      PaajiWinSound();\r\n      const nextRow = currentRow + 1;\r\n      setSteps((s) => s + 1);\r\n\r\n      if (nextRow >= rows) {\r\n        setStatus(\"won\");\r\n        PaajiCashoutSound();\r\n        const winnings = parseFloat(potentialWin);\r\n        setBalance((prev) => prev + winnings);\r\n        setSuccessMessage(`ðŸŽ‰ You won ${winnings.toFixed(2)} coins!`);\r\n      } else {\r\n        setCurrentRow(nextRow);\r\n      }\r\n    } else {\r\n      PaajiLoseSound();\r\n      setStatus(\"lost\");\r\n      setErrorMessage(\"ðŸ’¥ Better luck next time!\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (status === \"lost\") setPopup({ isOpen: true, type: \"lose\" });\r\n    if (status === \"won\" || status === \"cashed-out\")\r\n      setPopup({ isOpen: true, type: \"win\" });\r\n  }, [status]);\r\n\r\n  React.useEffect(() => {\r\n    if (popup.isOpen && popup.type === \"win\") {\r\n      const end = Date.now() + 2500;\r\n      const colors = [\"#a786ff\", \"#fd8bbc\", \"#eca184\", \"#f8deb1\"];\r\n\r\n      const frame = () => {\r\n        if (Date.now() > end) return;\r\n        confetti({\r\n          particleCount: 3,\r\n          angle: 60,\r\n          spread: 55,\r\n          startVelocity: 60,\r\n          origin: { x: 0, y: 0.5 },\r\n          colors,\r\n        });\r\n        confetti({\r\n          particleCount: 3,\r\n          angle: 120,\r\n          spread: 55,\r\n          startVelocity: 60,\r\n          origin: { x: 1, y: 0.5 },\r\n          colors,\r\n        });\r\n        requestAnimationFrame(frame);\r\n      };\r\n      frame();\r\n    }\r\n  }, [popup]);\r\n\r\n  const closePopup = () => {\r\n    setPopup({ isOpen: false, type: null });\r\n    resetGame();\r\n  };\r\n\r\n  const adjustBetAmount = (factor: number) => {\r\n    const val = parseFloat(betAmount) || 0;\r\n    const newVal = Math.max(1, val * factor);\r\n    setBetAmount(newVal.toFixed(0));\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto max-w-6xl w-full pt-4 px-4\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-[320px_minmax(0,1fr)] gap-6\">\r\n        {/* Left Panel */}\r\n        <div className=\"rounded-3xl border-2 border-primary/20 bg-linear-to-br from-background via-background to-primary/5 p-6 space-y-4 shadow-xl\">\r\n          {/* Balance Card */}\r\n          <div className=\"bg-linear-to-r from-primary/20 to-purple-500/20 border-2 border-primary/30 rounded-2xl p-4 text-center backdrop-blur-sm\">\r\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\r\n              <Sparkles className=\"w-5 h-5 text-yellow-400\" />\r\n              <span className=\"text-sm font-medium text-muted-foreground uppercase tracking-wide\">\r\n                Balance\r\n              </span>\r\n            </div>\r\n            <p className=\"text-3xl font-bold text-primary\">\r\n              {balance.toFixed(2)}\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">coins</p>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          {errorMessage && (\r\n            <div className=\"bg-red-500/10 border-2 border-red-500/30 rounded-2xl p-3 text-center text-red-400 animate-in fade-in slide-in-from-top-2\">\r\n              <p className=\"font-medium\">{errorMessage}</p>\r\n            </div>\r\n          )}\r\n          {successMessage && (\r\n            <div className=\"bg-green-500/10 border-2 border-green-500/30 rounded-2xl p-3 text-center text-green-400 animate-in fade-in slide-in-from-top-2\">\r\n              <p className=\"font-medium\">{successMessage}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Bet Amount */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide flex items-center gap-2\">\r\n              <Zap className=\"w-3 h-3\" />\r\n              Bet Amount\r\n            </label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"relative flex-1\">\r\n                <Input\r\n                  value={betAmount}\r\n                  onChange={(e) => setBetAmount(e.target.value)}\r\n                  disabled={status === \"in-progress\"}\r\n                  className=\"pr-16 h-12 text-lg font-semibold bg-background/50 border-2\"\r\n                />\r\n                <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-sm font-medium text-muted-foreground\">\r\n                  coins\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => adjustBetAmount(0.5)}\r\n                disabled={status === \"in-progress\"}\r\n                className=\"h-9\"\r\n              >\r\n                Â½Ã—\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => adjustBetAmount(2)}\r\n                disabled={status === \"in-progress\"}\r\n                className=\"h-9\"\r\n              >\r\n                2Ã—\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => setBetAmount(Math.min(balance, 100).toFixed(0))}\r\n                disabled={status === \"in-progress\"}\r\n                className=\"h-9\"\r\n              >\r\n                Max\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Difficulty */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\r\n              Difficulty\r\n            </label>\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              {[\"Easy\", \"Hard\"].map((d) => (\r\n                <Button\r\n                  key={d}\r\n                  onClick={() => {\r\n                    setDifficulty(d as Difficulty);\r\n                    resetGame();\r\n                  }}\r\n                  variant={difficulty === d ? \"default\" : \"outline\"}\r\n                  className=\"h-11 font-semibold\"\r\n                  disabled={status === \"in-progress\"}\r\n                >\r\n                  {d === \"Easy\" ? \"ðŸ˜Š Easy\" : \"ðŸ”¥ Hard\"}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground text-center mt-2\">\r\n              {difficulty === \"Easy\"\r\n                ? \"2 safe tiles per row\"\r\n                : \"1 safe tile per row\"}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Game Controls */}\r\n          {status !== \"in-progress\" ? (\r\n            <Button\r\n              className=\"w-full h-14 text-lg font-bold rounded-2xl bg-linear-to-r from-primary to-purple-500 hover:from-primary/90 hover:to-purple-500/90 shadow-lg\"\r\n              onClick={startGame}\r\n            >\r\n              <Trophy className=\"w-5 h-5 mr-2\" />\r\n              Start Game\r\n            </Button>\r\n          ) : (\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <Button\r\n                onClick={cashOut}\r\n                className=\"h-12 font-semibold bg-linear-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600\"\r\n              >\r\n                ðŸ’° Cash Out\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={resetGame}\r\n                className=\"h-12 font-semibold\"\r\n              >\r\n                Reset\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats */}\r\n          <div className=\"bg-background/50 border-2 border-border rounded-2xl p-4 space-y-3\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm text-muted-foreground\">Multiplier</span>\r\n              <span className=\"text-xl font-bold text-primary\">\r\n                {multiplier}Ã—\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm text-muted-foreground\">Steps</span>\r\n              <span className=\"text-xl font-bold\">\r\n                {steps} / {rows}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center pt-2 border-t border-border\">\r\n              <span className=\"text-sm font-semibold\">Potential Win</span>\r\n              <span className=\"text-xl font-bold text-green-400\">\r\n                {potentialWin}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Board */}\r\n        <div className=\"relative rounded-3xl border-2 border-primary/20 bg-linear-to-br from-background via-background to-primary/5 p-6 shadow-2xl\">\r\n          <div className=\"absolute top-4 left-4 bg-primary/10 border border-primary/20 rounded-full px-4 py-2 backdrop-blur-sm\">\r\n            <p className=\"text-sm font-semibold\">\r\n              {status === \"idle\" && \"ðŸŽ¯ Ready to play!\"}\r\n              {status === \"in-progress\" &&\r\n                `ðŸŽ® Row ${currentRow + 1} of ${rows}`}\r\n              {status === \"won\" && \"ðŸ† Victory!\"}\r\n              {status === \"lost\" && \"ðŸ’¥ Game Over\"}\r\n              {status === \"cashed-out\" && \"ðŸ’° Cashed Out!\"}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid gap-3 mt-12\">\r\n            {Array.from({ length: rows }).map((_, rowIdx) => {\r\n              const logicalRow = rows - 1 - rowIdx;\r\n              const rowCfg = config[logicalRow];\r\n              const isActive = canPlay && logicalRow === currentRow;\r\n              const isPast =\r\n                logicalRow < currentRow ||\r\n                [\"won\", \"lost\", \"cashed-out\"].includes(status);\r\n\r\n              return (\r\n                <div\r\n                  key={rowIdx}\r\n                  className={cn(\r\n                    \"grid gap-3 transition-all duration-300\",\r\n                    numCols === 4 ? \"grid-cols-4\" : \"grid-cols-5\",\r\n                    isActive && \"scale-[1.02]\"\r\n                  )}\r\n                >\r\n                  {Array.from({ length: numCols }).map((__, col) => {\r\n                    const picked = rowCfg?.revealedIndex === col;\r\n                    const isSafe = rowCfg?.safeIndices?.includes(col);\r\n                    const reveal =\r\n                      isPast ||\r\n                      picked ||\r\n                      [\"won\", \"lost\", \"cashed-out\"].includes(status);\r\n\r\n                    return (\r\n                      <button\r\n                        key={col}\r\n                        disabled={!isActive}\r\n                        onClick={() => pickTile(logicalRow, col)}\r\n                        className={cn(\r\n                          \"aspect-[2.1/1] rounded-2xl border-2 transition-all duration-300 relative overflow-hidden group\",\r\n                          isActive\r\n                            ? \"border-primary/50 bg-linear-to-br from-primary/20 to-purple-500/20 hover:border-primary hover:scale-105 hover:shadow-lg hover:shadow-primary/20 cursor-pointer\"\r\n                            : \"border-border bg-background/40\",\r\n                          picked &&\r\n                            isSafe &&\r\n                            \"bg-linear-to-br from-green-500/20 to-emerald-500/20 border-green-500/50\",\r\n                          picked &&\r\n                            !isSafe &&\r\n                            \"bg-linear-to-br from-red-500/20 to-orange-500/20 border-red-500/50\"\r\n                        )}\r\n                      >\r\n                        {isActive && (\r\n                          <div className=\"absolute inset-0 bg-linear-to-r from-primary/0 via-primary/10 to-primary/0 animate-pulse\" />\r\n                        )}\r\n                        {reveal && (\r\n                          <div className=\"flex items-center justify-center h-full animate-in zoom-in-50 duration-300\">\r\n                            {isSafe ? (\r\n                              <Image\r\n                                src=\"/happypaaji.png\"\r\n                                width={100}\r\n                                height={100}\r\n                                alt=\"Safe\"\r\n                                className=\"h-full object-contain p-2\"\r\n                              />\r\n                            ) : (\r\n                              <div className=\"size-12 bg-linear-to-br from-red-500 to-orange-500 rounded-full shadow-lg shadow-red-500/50 animate-pulse\" />\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Popup */}\r\n      {popup.isOpen && (\r\n        <div\r\n          onClick={closePopup}\r\n          className=\"fixed inset-0 bg-background/90 backdrop-blur-md flex items-center justify-center z-50 animate-in fade-in duration-300\"\r\n        >\r\n          <div className=\"bg-linear-to-br from-background via-background to-primary/10 border-2 border-primary/30 rounded-3xl p-10 max-w-md w-full text-center relative shadow-2xl animate-in zoom-in-95 duration-300\">\r\n            <button\r\n              onClick={closePopup}\r\n              className=\"absolute top-6 right-6 text-foreground/60 hover:text-foreground hover:bg-foreground/10 rounded-full p-2 transition-colors\"\r\n            >\r\n              <X size={24} />\r\n            </button>\r\n\r\n            {popup.type === \"lose\" ? (\r\n              <>\r\n                <div className=\"mb-6 animate-in zoom-in-50 duration-500\">\r\n                  <Image\r\n                    height={100}\r\n                    width={100}\r\n                    src=\"/Bomb.svg\"\r\n                    alt=\"Lose\"\r\n                    className=\"w-28 mx-auto\"\r\n                  />\r\n                </div>\r\n                <h2 className=\"text-4xl font-bold text-red-400 mb-3\">\r\n                  BOOM! ðŸ’¥\r\n                </h2>\r\n                <p className=\"text-lg text-muted-foreground mb-6\">\r\n                  Better luck next time, champ!\r\n                </p>\r\n                <div className=\"bg-red-500/10 border border-red-500/30 rounded-2xl p-4 mb-6\">\r\n                  <p className=\"text-sm text-red-300\">\r\n                    You made it {steps} step{steps !== 1 ? \"s\" : \"\"} this time\r\n                  </p>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div className=\"mb-6 animate-in zoom-in-50 duration-500\">\r\n                  <Image\r\n                    height={100}\r\n                    width={100}\r\n                    src=\"/Gems.svg\"\r\n                    alt=\"Win\"\r\n                    className=\"w-28 mx-auto\"\r\n                  />\r\n                </div>\r\n                <h2 className=\"text-4xl font-bold bg-linear-to-r from-primary to-purple-400 bg-clip-text text-transparent mb-3\">\r\n                  Amazing! ðŸŽ‰\r\n                </h2>\r\n                <p className=\"text-lg text-muted-foreground mb-6\">\r\n                  {status === \"won\"\r\n                    ? \"You conquered all rows!\"\r\n                    : \"Smart cash out!\"}\r\n                </p>\r\n                <div className=\"bg-green-500/10 border border-green-500/30 rounded-2xl p-4 mb-6\">\r\n                  <p className=\"text-sm text-green-300 mb-2\">\r\n                    Multiplier: {multiplier}Ã— | Steps: {steps}\r\n                  </p>\r\n                  <p className=\"text-2xl font-bold text-green-400\">\r\n                    Won {potentialWin} coins!\r\n                  </p>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            <Button\r\n              className=\"w-full h-14 rounded-2xl text-lg font-bold bg-linear-to-r from-primary to-purple-500 hover:from-primary/90 hover:to-purple-500/90 shadow-lg\"\r\n              onClick={closePopup}\r\n            >\r\n              Play Again\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Paaji;\r\n",
      "type": "registry:component",
      "target": "components\\games\\paaji\\index.tsx"
    },
    {
      "path": "components\\games\\rock-paper-scissor\\index.tsx",
      "content": "\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { useGameStats } from \"@/hooks/use-game-stats\";\r\n\r\n// SVG Components (reused from original)\r\nconst RockIcon = () => (\r\n  <svg\r\n    aria-label=\"Rock\"\r\n    className=\"h-full w-full\"\r\n    viewBox=\"0 0 309.274 282.945\"\r\n  >\r\n    <title>Rock</title>\r\n    <g>\r\n      <path\r\n        d=\"M274.085,123.143c-2.976-11.404-7.057-22.556-11.228-33.537c-2.789-7.34-5.713-14.627-8.475-21.98\r\n        c-0.385-1.024-0.791-2.045-1.191-3.066c-2.01-1.381-3.938-2.896-5.791-4.482c-7.007-4.258-13.768-8.834-21.1-12.621\r\n        c-9.2-4.752-18.252-9.584-27.888-13.422c-13.671-5.445-28.599-9.875-43.546-11.748c0.018-0.005,0.036-0.008,0.055-0.012\r\n        c-0.365-0.047-0.73-0.093-1.095-0.139c-3.302,0.229-6.676,0.841-10.009,0.803c-0.162,0.051-0.324,0.094-0.486,0.146\r\n        c-0.779,0.246-1.561,0.488-2.342,0.728c-0.816,0.16-1.629,0.335-2.434,0.546c-2.658,0.699-5.27,1.576-7.85,2.535\r\n        c-2.545,0.777-5.08,1.589-7.596,2.486c-2.974,1.061-5.942,2.295-8.652,3.926c-0.384,0.23-0.764,0.508-1.143,0.81\r\n        c-0.785,0.369-1.574,0.735-2.347,1.129c-1.886,0.957-3.677,1.976-5.506,3.016c-1.637,0.928-2.372,2.989-3.39,4.45\r\n        C90.282,59.617,80.513,77.49,72.122,96.288c-4.256,9.536-8.756,18.917-12.242,28.776c-0.881,2.492-1.629,5.028-2.337,7.573\r\n        c-0.563,2.023-1.343,3.656-1.258,5.78c0.059,1.488,0.778,2.899,1.353,4.242c1.242,2.903,2.686,5.693,3.82,8.65\r\n        c1.725,4.49,3.205,8.773,5.467,13.022c2.499,4.694,5.213,9.275,7.684,13.982c2.158,4.109,4.158,8.031,6.895,11.795\r\n        c2.473,3.402,4.197,6.496,7.715,8.92c2.375,1.636,4.496,3.618,6.746,5.42c2.568,2.053,5.464,3.684,8.205,5.493\r\n        c5.732,3.782,11.178,7.83,16.553,12.105c9.818,7.813,20.291,14.984,30.879,21.764c1.907,0.524,3.748,1.369,5.475,2.246\r\n        c0.604,0.307,1.201,0.625,1.793,0.95c0.756-0.188,1.49-0.388,2.182-0.62c4.195-1.416,8.299-3.123,12.441-4.688\r\n        c8.129-3.068,16.268-6.092,24.266-9.48c3.873-1.643,7.879-2.959,11.689-4.729c3.83-1.778,7.668-3.577,11.564-5.2\r\n        c3.805-1.585,7.596-3.186,11.318-4.957c3.862-1.835,7.355-4.249,11.131-6.212c2.633-1.367,5.592-2.651,7.125-5.359\r\n        c1.693-2.99,2.536-6.691,3.563-9.957c2.76-8.782,5.019-17.742,7.746-26.544c2.627-8.474,5.528-16.849,8.408-25.239\r\n        c0.74-2.158,1.463-4.403,2.207-6.672c0.787-2.829,1.851-5.588,2.678-8.41C274.676,127.024,274.271,125.094,274.085,123.143z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst PaperIcon = () => (\r\n  <svg id=\"svg4883\" version=\"1.1\" viewBox=\"0 0 765 990\">\r\n    <title>Paper Icon</title>\r\n    <defs id=\"defs4885\">\r\n      <filter id=\"filter12589\">\r\n        <feGaussianBlur id=\"feGaussianBlur12591\" stdDeviation=\"2.6717241\" />\r\n      </filter>\r\n    </defs>\r\n    <g id=\"layer1\" transform=\"translate(0 -62.362)\">\r\n      <path\r\n        d=\"m11.084 72.444v969.55h699.16c27.525 0 49.597-21.711 49.597-48.663v-872.23c0-26.952-22.072-48.663-49.597-48.663h-699.16z\"\r\n        fill=\"#fff\"\r\n        id=\"path8098\"\r\n        stroke=\"#979797\"\r\n        strokeWidth=\"3.5504\"\r\n      />\r\n      <path\r\n        d=\"m10.143 182.56h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5538\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n        style={{ color: \"#000000\" }}\r\n      />\r\n      <path\r\n        d=\"m10.143 229.33h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5540\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 277.12h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5542\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 324.91h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5544\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 372.7h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5546\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 420.49h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5548\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 468.28h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5550\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 516.07h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5552\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 563.86h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5554\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 611.65h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5556\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 659.45h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5592\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 707.24h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5594\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 755.03h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5596\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 802.82h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5598\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 850.61h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5600\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 898.4h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5602\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 946.19h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5604\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n      <path\r\n        d=\"m10.143 993.98h750.64\"\r\n        fill=\"#00f\"\r\n        id=\"path5606\"\r\n        stroke=\"#01f\"\r\n        strokeWidth=\"1.6689px\"\r\n      />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst ScissorsIcon = () => (\r\n  <svg\r\n    aria-label=\"Scissors Icon\"\r\n    style={{ background: \"new 0 0 2122 2122\" }}\r\n    viewBox=\"0 0 2122 2122\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <title>Scissors Icon</title>\r\n    <g>\r\n      <path\r\n        d=\"M809.446,1224.667c-10.28-20.243-26.041-41.598-39.552-63.893\r\n\t\tc-117.091,138.042-211.927,310.679-281.676,467.488c-29.023,65.325-53.091,133.077-68.424,202.938\r\n\t\tc-7.445,34.007-43.035,158.772,29.213,114.879l0.176-0.088c60.019-36.619,103.805-98.212,150.869-150.353\r\n\t\tc52.96-58.641,105.871-117.257,158.83-175.893c40.326-44.662,80.663-89.359,120.989-134.017\r\n\t\tc-4.867-24.068-7.191-48.867-10.904-73.232C859.093,1347.547,839.22,1283.328,809.446,1224.667z\"\r\n        style={{ fill: \"#91A9D8\" }}\r\n      />\r\n      <path\r\n        d=\"M975.643,1223.386c-11.24,2.943-22.611,3.235-33.481-0.969\r\n\t\tc-13.179-5.077-25.174-13.613-36.312-24.151c-32.526-30.772-41.403-77.252-64.75-114.027\r\n\t\tc-24.57,23.951-48.321,49.568-71.206,76.536c13.51,22.295,29.271,43.649,39.552,63.893c29.773,58.661,49.647,122.879,59.523,187.83\r\n\t\tc3.712,24.365,6.036,49.164,10.904,73.232c54.095-59.907,108.19-119.815,162.28-179.722\r\n\t\tc-12.365-15.099-24.736-30.198-37.101-45.296C995.77,1249.374,985.66,1236.819,975.643,1223.386z\"\r\n        style={{ fill: \"#7594C6\" }}\r\n      />\r\n      <path\r\n        d=\"M1767.093,400.834c-25.843-94.243-104.968-163.191-190.58-203.752\r\n\t\tc-73.838-35.023-162.443-38.266-237.029-8.731c-86.51,34.275-150.12,109.06-185.392,192.676\r\n\t\tc-35.323,83.616-44.952,175.813-46.698,266.863c-0.698,38.914-0.25,78.927-14.668,114.897\r\n\t\tc-8.581,21.403-21.703,39.812-37.168,56.725c41.009,46.298,97.436,83.816,126.821,138.396c8.033,14.867,13.969,31.83,10.626,48.493\r\n\t\tc-1.446,7.134-4.49,13.77-8.231,20.106c9.43,7.833,18.509,16.065,27.29,24.446c14.669,14.069,28.987,28.787,42.956,44.053\r\n\t\tc30.682-38.964,122.78-118.539,163.691-138.595C1611.885,861.721,1832.999,641.256,1767.093,400.834z M1220.346,601.293\r\n\t\tc-8.233-76.532,9.129-160.198,56.126-220.315c59.169-75.484,167.033-96.438,254.191-61.465\r\n\t\tc112.951,45.25,145.33,168.729,102.175,277.141c-26.692,67.003-83.566,135.602-153.163,159.898\r\n\t\tC1356.595,799.557,1232.019,709.406,1220.346,601.293z\"\r\n        style={{ fill: \"#C11833\" }}\r\n      />\r\n      <path\r\n        d=\"M1575.292,1648.964c-62.105-159.985-148.506-336.993-258.806-480.521\r\n\t\tc-14.568,21.617-31.338,42.183-42.587,61.91c-32.57,57.154-55.512,120.346-68.511,184.74c-4.882,24.156-8.4,48.818-14.421,72.619\r\n\t\tc38.129,46.558,76.263,93.145,114.387,139.697c50.07,61.126,100.098,122.222,150.168,183.347\r\n\t\tc44.497,54.349,85.262,117.983,143.44,157.457l0.171,0.092c70.051,47.328,40.516-79.011,34.723-113.335\r\n\t\tC1621.908,1784.448,1601.133,1715.619,1575.292,1648.964z\"\r\n        style={{ fill: \"#B5C5E7\" }}\r\n      />\r\n      <path\r\n        d=\"M1273.899,1230.353c11.25-19.727,28.019-40.292,42.587-61.91\r\n\t\tc-19.718-25.642-40.205-50.192-61.447-73.413c-13.997-15.294-28.307-30.022-42.971-44.051\r\n\t\tc-8.794-8.412-17.886-16.619-27.279-24.453c-2.543,4.358-5.389,8.587-8.273,12.726c-42.168,60.392-94.388,114.375-153.997,159.135\r\n\t\tc-13.929,10.456-30.256,20.648-46.874,24.999c10.017,13.432,20.127,25.988,29.408,37.325\r\n\t\tc12.365,15.098,24.736,30.197,37.101,45.296c49.608,60.57,99.211,121.14,148.814,181.705c6.022-23.801,9.54-48.463,14.421-72.619\r\n\t\tC1218.386,1350.699,1241.329,1287.508,1273.899,1230.353z\"\r\n        style={{ fill: \"#91A9D8\" }}\r\n      />\r\n      <path\r\n        d=\"M1182.379,957.909c-29.385-54.58-85.811-92.098-126.821-138.396\r\n\t\tc-17.412-19.657-32.03-40.91-40.612-65.755c-12.672-36.57-10.277-76.532-9.129-115.446c2.693-91.05-2.495-183.596-33.726-268.809\r\n\t\tc-31.231-85.213-91.2-162.992-175.913-201.357c-73.09-33.127-161.695-34.175-237.179-2.794\r\n\t\tc-87.458,36.42-169.827,101.527-200.21,194.373C281.41,596.703,491.647,827.546,680.033,931.468\r\n\t\tc41.06,22.65,133.207,110.856,159.15,149.771c0.7,0.948,1.298,1.996,1.897,2.993c23.348,36.769,32.229,83.267,64.757,114.049\r\n\t\tc11.175,10.527,23.149,19.058,36.321,24.147c10.876,4.191,22.251,3.891,33.476,0.948c16.614-4.34,32.977-14.518,46.896-24.995\r\n\t\tc59.62-44.752,111.805-98.733,153.962-159.15c2.893-4.141,5.737-8.332,8.282-12.722c3.742-6.336,6.786-12.971,8.231-20.106\r\n\t\tC1196.348,989.739,1190.412,972.777,1182.379,957.909z M895.26,586.326C878.448,693.74,749.63,777.755,628.746,728.913\r\n\t\tc-68.299-27.639-121.832-98.883-145.231-167.133c-37.916-110.357,0.35-232.14,115.347-271.902\r\n\t\tc88.755-30.683,195.52-4.59,250.949,73.688C893.913,425.879,907.184,510.293,895.26,586.326z\"\r\n        style={{ fill: \"#E51C37\" }}\r\n      />\r\n      <path\r\n        d=\"M922.956,1007.813c11.435,39.6,52.804,62.429,92.404,50.994\r\n\t\tc39.601-11.435,62.431-52.806,50.991-92.404c-11.435-39.6-52.804-62.431-92.404-50.993\r\n\t\tC934.347,926.843,911.517,968.215,922.956,1007.813z\"\r\n        style={{ fill: \"#577FBD\" }}\r\n      />\r\n      <path\r\n        d=\"M657.938,840.327c-79.166-56.312-152.287-111.383-210.406-190.136\r\n\t\tc-3.693-5.004-11.493-0.762-8.487,4.96c40.614,77.262,119.756,131.206,189.023,180.541c78.48,55.896,153.696,110.991,209.88,190.49\r\n\t\tc2.256,3.196,7.084,0.467,5.281-3.087C803.527,944.736,727.77,890.003,657.938,840.327z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M707.8,196.155c29.408,11.583,60.511,13.805,89.666,28.192\r\n\t\tc27.036,13.345,51.727,31.513,72.517,53.338c44.687,46.913,68.399,109.342,75.176,173.093c0.248,2.331,3.616,2.434,3.708,0\r\n\t\tc2.607-67.566-23.83-132.785-70.241-181.737c-23.274-24.548-51.411-44.675-82.095-58.913\r\n\t\tc-26.085-12.109-59.522-26.029-88.73-21.839C703.342,188.927,704.569,194.883,707.8,196.155z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M1550.848,826.035c-2.67,1.917-0.36,6.132,2.621,4.482\r\n\t\tc68.049-37.678,119.488-100.475,150.933-171.081c29.578-66.414,46.358-150.618,25.534-221.834\r\n\t\tc-1.198-4.095-7.868-3.476-7.649,1.035c3.65,75.198,0.541,144.611-29.559,214.962\r\n\t\tC1662.702,723.777,1612.587,781.706,1550.848,826.035z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M1264.276,307.039c26.748-15.486,48.555-36.92,76.901-50.38\r\n\t\tc31.722-15.057,66.441-23.52,101.539-24.643c68.268-2.18,129.198,24.87,182.406,65.715c2.324,1.786,4.902-1.944,3.031-3.929\r\n\t\tc-47.674-50.628-120.468-76.704-189.461-74.504c-59.951,1.912-146.743,27.659-179.362,82.794\r\n\t\tC1257.475,305.222,1261.158,308.845,1264.276,307.039z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M1111.126,929.06c13.559,15.695,53.34,47.851,43.586,70.926\r\n\t\tc-4.668,11.043-18.913,22.606-26.845,31.637c-8.365,9.532-16.736,19.067-25.106,28.599c-14.914,16.992-29.778,33.941-42.134,52.919\r\n\t\tc-1.949,2.996,2.222,5.637,4.662,3.596c25.481-21.335,46.777-47.396,68.896-72.081c12.673-14.139,37.306-33.252,36.745-54.753\r\n\t\tc-0.482-18.575-21.817-35.406-32.735-47.856c-20.575-23.469-39.854-50.848-64.745-69.876c-2.572-1.966-5.554,1.737-4.185,4.185\r\n\t\tC1080.208,895.932,1096.54,912.166,1111.126,929.06z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M740.964,1264.093c-88.238,96.964-155.166,210.533-210.728,328.827\r\n\t\tc-2.562,5.457,5.462,10.266,8.166,4.775c57.578-117.004,131.152-224.448,207.805-329.559\r\n\t\tC748.443,1265.072,743.493,1261.311,740.964,1264.093z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M508.945,1653.617c-21.92,34.406-38.913,73.028-47.766,112.969c-0.385,1.735,2.27,3.113,3.05,1.286\r\n\t\tc15.995-37.51,32.409-74.216,51.284-110.421C517.773,1653.11,511.581,1649.476,508.945,1653.617z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M1435.019,1424.239c-3.727-6.002-12.677-0.726-9.447,5.525\r\n\t\tc34.397,66.46,69.184,131.43,96.853,201.184c26.655,67.206,44.424,136.706,67.678,204.94c1.486,4.356,7.513,2.558,6.797-1.875\r\n\t\tc-11.858-73.17-39.508-145.846-67.186-214.348C1502.819,1553.111,1472.958,1485.31,1435.019,1424.239z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M1402.649,1370.197c1.213,2.07,4.287,0.243,3.201-1.871c-9.301-18.11-18.212-36.434-27.742-54.421\r\n\t\tc-8.2-15.479-15.391-33.525-27.693-46.134c-1.267-1.296-3.342,0.044-2.948,1.715c4.053,17.165,15.488,32.965,24.166,48.205\r\n\t\tC1381.689,1335.347,1392.364,1352.667,1402.649,1370.197z\"\r\n        style={{ fill: \"#1A1A1A\" }}\r\n      />\r\n      <path\r\n        d=\"M455.035,359.151c24.702-54.441,64.623-92.158,105.364-134.219\r\n\t\tc10.49-10.833-2.689-24.971-15.118-19.595c-58.46,25.298-101.983,85.942-125.798,143.089\r\n\t\tc-27.016,64.83-37.349,149.724-12.112,216.911c6.996,18.633,31.835,11.072,29.242-8.061\r\n\t\tC427.264,488.218,425.432,424.391,455.035,359.151z\"\r\n        style={{ fill: \"#FFFFFF\" }}\r\n      />\r\n      <path\r\n        d=\"M796.789,1507.303c-47.98,43.269-86.656,100.677-127.225,150.821\r\n\t\tc-41.466,51.249-82.943,102.48-123.912,154.129c-7.103,8.95,5.262,21.798,12.774,12.775\r\n\t\tc43.192-51.874,85.837-104.181,128.526-156.473c40.282-49.344,87.829-98.271,119.975-153.432\r\n\t\tC810.708,1508.633,802.153,1502.47,796.789,1507.303z\"\r\n        style={{ fill: \"#FFFFFF\" }}\r\n      />\r\n      <path\r\n        d=\"M1487.521,1774.669c-23.05-31.488-46.845-62.509-70.909-93.232\r\n\t\tc-25.457-32.502-51.366-64.657-77.437-96.662c-14.041-17.237-28.161-34.407-42.358-51.517\r\n\t\tc-11.177-13.467-20.278-27.703-37.218-33.715c-4.317-1.53-7.381,2.996-6.748,6.748c3.035,17.842,16.428,29.671,27.688,43.245\r\n\t\tc12.17,14.665,24.283,29.374,36.336,44.131c27.128,33.203,53.914,66.674,80.511,100.302c25.578,32.341,50.976,64.842,76.735,97.037\r\n\t\tc23.757,29.681,46.27,68.658,76.551,91.717c2.948,2.246,7.552-1.491,6.319-4.857\r\n\t\tC1543.491,1840.964,1510.644,1806.255,1487.521,1774.669z\"\r\n        style={{ fill: \"#FFFFFF\" }}\r\n      />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\ntype Choice = \"rock\" | \"paper\" | \"scissors\";\r\ntype GameResult = \"win\" | \"lose\" | \"tie\";\r\ntype GameState = \"ready\" | \"playing\" | \"result\";\r\n\r\ntype GameStats = {\r\n  playerWins: number;\r\n  aiWins: number;\r\n  ties: number;\r\n};\r\n\r\nconst choices: Choice[] = [\"rock\", \"paper\", \"scissors\"];\r\n\r\nconst SVGChoice = ({\r\n  choice,\r\n  isSelected,\r\n  onClick,\r\n  disabled = false,\r\n}: {\r\n  choice: Choice;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n  disabled?: boolean;\r\n}) => {\r\n  const renderChoice = () => {\r\n    if (choice === \"rock\") {\r\n      return <RockIcon />;\r\n    }\r\n    if (choice === \"paper\") {\r\n      return <PaperIcon />;\r\n    }\r\n    if (choice === \"scissors\") {\r\n      return <ScissorsIcon />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <button\r\n      aria-label={`Select ${choice}`}\r\n      className={`cursor-pointer transition-transform hover:scale-105 ${\r\n        isSelected ? \"scale-110\" : \"\"\r\n      } ${disabled ? \"cursor-not-allowed opacity-50\" : \"\"}`}\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      type=\"button\"\r\n    >\r\n      <svg\r\n        aria-label={choice}\r\n        className=\"rounded-lg border-2 border-border bg-card\"\r\n        height=\"120\"\r\n        viewBox=\"0 0 120 120\"\r\n        width=\"120\"\r\n      >\r\n        <title>{choice}</title>\r\n        {renderChoice()}\r\n      </svg>\r\n      <p className=\"mt-2 text-center font-medium text-foreground capitalize\">\r\n        {choice}\r\n      </p>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default function RockPaperScissorsGame() {\r\n  const [gameState, setGameState] = useState<GameState>(\"ready\");\r\n  const [playerChoice, setPlayerChoice] = useState<Choice | null>(null);\r\n  const [computerChoice, setComputerChoice] = useState<Choice | null>(null);\r\n  const [result, setResult] = useState<GameResult | null>(null);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const [showInstructions, setShowInstructions] = useState(true);\r\n  const [showResultDialog, setShowResultDialog] = useState(false);\r\n  const { updateStats: updateGlobalStats } = useGameStats(\"rock-paper-scissor\");\r\n  const statsTrackedRef = useRef(false);\r\n\r\n  const [stats, setStats] = useState<GameStats>({\r\n    playerWins: 0,\r\n    aiWins: 0,\r\n    ties: 0,\r\n  });\r\n\r\n  const getWinner = (player: Choice, computer: Choice): GameResult => {\r\n    if (player === computer) {\r\n      return \"tie\";\r\n    }\r\n    if (\r\n      (player === \"rock\" && computer === \"scissors\") ||\r\n      (player === \"paper\" && computer === \"rock\") ||\r\n      (player === \"scissors\" && computer === \"paper\")\r\n    ) {\r\n      return \"win\";\r\n    }\r\n    return \"lose\";\r\n  };\r\n\r\n  const updateLocalStats = (gameResult: GameResult) => {\r\n    setStats((prev) => {\r\n      if (gameResult === \"win\") {\r\n        return { ...prev, playerWins: prev.playerWins + 1 };\r\n      }\r\n      if (gameResult === \"lose\") {\r\n        return { ...prev, aiWins: prev.aiWins + 1 };\r\n      }\r\n      return { ...prev, ties: prev.ties + 1 };\r\n    });\r\n  };\r\n\r\n  const playGame = (selectedChoice: Choice) => {\r\n    if (gameState !== \"ready\" || isAnimating) {\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setPlayerChoice(selectedChoice);\r\n    setGameState(\"playing\");\r\n\r\n    const ANIMATION_DELAY = 1000;\r\n    const RESULT_DELAY = 1000;\r\n\r\n    // Animate computer choice selection\r\n    setTimeout(() => {\r\n      const aiChoice = choices[Math.floor(Math.random() * choices.length)];\r\n      const gameResult = getWinner(selectedChoice, aiChoice);\r\n\r\n      setComputerChoice(aiChoice);\r\n      setResult(gameResult);\r\n      setIsAnimating(false);\r\n      setGameState(\"result\");\r\n\r\n      updateLocalStats(gameResult);\r\n\r\n      // Show result dialog\r\n      setTimeout(() => {\r\n        setShowResultDialog(true);\r\n      }, RESULT_DELAY);\r\n    }, ANIMATION_DELAY);\r\n  };\r\n\r\n  const resetGame = () => {\r\n    setPlayerChoice(null);\r\n    setComputerChoice(null);\r\n    setResult(null);\r\n    setIsAnimating(false);\r\n    setGameState(\"ready\");\r\n    setShowResultDialog(false);\r\n    statsTrackedRef.current = false;\r\n  };\r\n\r\n  // Track stats when game result is available\r\n  useEffect(() => {\r\n    if (gameState === \"result\" && result && !statsTrackedRef.current) {\r\n      statsTrackedRef.current = true;\r\n\r\n      const playerWon = result === \"win\";\r\n      const tie = result === \"tie\";\r\n\r\n      updateGlobalStats({ playerWon, tie });\r\n    }\r\n  }, [gameState, result, updateGlobalStats]);\r\n\r\n  const getResultMessage = () => {\r\n    if (!result) {\r\n      return \"Choose your move!\";\r\n    }\r\n    switch (result) {\r\n      case \"win\":\r\n        return \"ðŸŽ‰ You Win!\";\r\n      case \"lose\":\r\n        return \"ðŸ’» AI Wins!\";\r\n      case \"tie\":\r\n        return \"ðŸ¤ It's a Tie!\";\r\n      default:\r\n        return \"Choose your move!\";\r\n    }\r\n  };\r\n\r\n  const getResultColor = () => {\r\n    switch (result) {\r\n      case \"win\":\r\n        return \"text-green-600\";\r\n      case \"lose\":\r\n        return \"text-red-600\";\r\n      case \"tie\":\r\n        return \"text-yellow-600\";\r\n      default:\r\n        return \"text-foreground\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full\">\r\n      {/* Instruction Dialog */}\r\n      {showInstructions && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n          <Card className=\"relative w-full max-w-md mx-4 p-6\">\r\n            <div className=\"space-y-4\">\r\n              <h2 className=\"text-center font-mono text-2xl font-bold\">\r\n                ðŸª¨ðŸ“„âœ‚ï¸ ROCK PAPER SCISSORS âœ‚ï¸ðŸ“„ðŸª¨\r\n              </h2>\r\n\r\n              <div className=\"space-y-2 text-center\">\r\n                <p className=\"font-semibold text-lg\">How to Play:</p>\r\n                <div className=\"space-y-2 text-left text-sm\">\r\n                  <p>â€¢ Choose Rock, Paper, or Scissors</p>\r\n                  <p>â€¢ Rock beats Scissors</p>\r\n                  <p>â€¢ Paper beats Rock</p>\r\n                  <p>â€¢ Scissors beats Paper</p>\r\n                  <p>â€¢ Play against the AI and track your wins!</p>\r\n                </div>\r\n              </div>\r\n\r\n              <Button\r\n                className=\"w-full font-mono\"\r\n                onClick={() => setShowInstructions(false)}\r\n                size=\"lg\"\r\n              >\r\n                START GAME\r\n              </Button>\r\n\r\n              <Link className=\"w-full\" href=\"/games\">\r\n                <Button\r\n                  className=\"w-full font-mono\"\r\n                  size=\"lg\"\r\n                  variant=\"outline\"\r\n                >\r\n                  ðŸ  GO TO GAMES\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Result Dialog */}\r\n      {showResultDialog && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n          <Card className=\"relative w-full max-w-md mx-4 p-6\">\r\n            <div className=\"space-y-4\">\r\n              <h2 className=\"text-center font-mono text-2xl font-bold\">\r\n                {result === \"win\" && \"ðŸŽ‰ VICTORY! ðŸŽ‰\"}\r\n                {result === \"lose\" && \"ðŸ’€ DEFEAT ðŸ’€\"}\r\n                {result === \"tie\" && \"ðŸ¤ TIE! ðŸ¤\"}\r\n              </h2>\r\n\r\n              <p className=\"text-center font-semibold text-lg\">\r\n                {getResultMessage()}\r\n              </p>\r\n\r\n              {result === \"win\" && (\r\n                <div className=\"rounded-lg bg-green-100 p-4 dark:bg-green-900\">\r\n                  <p className=\"font-bold text-green-800 dark:text-green-200\">\r\n                    Congratulations! You won! ðŸŽ‰\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {result === \"lose\" && (\r\n                <div className=\"rounded-lg bg-red-100 p-4 dark:bg-red-900\">\r\n                  <p className=\"font-bold text-red-800 dark:text-red-200\">\r\n                    The AI won this round! ðŸ’€\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {result === \"tie\" && (\r\n                <div className=\"rounded-lg bg-yellow-100 p-4 dark:bg-yellow-900\">\r\n                  <p className=\"font-bold text-yellow-800 dark:text-yellow-200\">\r\n                    It&apos;s a tie! Great minds think alike! ðŸ¤\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <Button\r\n                className=\"w-full font-mono\"\r\n                onClick={() => {\r\n                  resetGame();\r\n                  setShowResultDialog(false);\r\n                }}\r\n                size=\"lg\"\r\n              >\r\n                PLAY AGAIN\r\n              </Button>\r\n\r\n              <div className=\"flex justify-center flex-wrap gap-4 text-xs\">\r\n                <span className=\"text-primary\">\r\n                  Your Wins: {stats.playerWins}\r\n                </span>\r\n                <span className=\"text-muted-foreground\">VS</span>\r\n                <span className=\"text-destructive\">\r\n                  AI Wins: {stats.aiWins}\r\n                </span>\r\n                <span className=\"text-muted-foreground\">|</span>\r\n                <span className=\"text-yellow-600\">Ties: {stats.ties}</span>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Game */}\r\n      <div className=\"h-full bg-background p-8\">\r\n        <div className=\"mx-auto max-w-4xl\">\r\n          <h1 className=\"mb-8 text-center font-bold text-4xl text-foreground\">\r\n            ðŸª¨ðŸ“„âœ‚ï¸ Rock Paper Scissors âœ‚ï¸ðŸ“„ðŸª¨\r\n          </h1>\r\n\r\n          {/* Score Board */}\r\n          <Card className=\"mb-8 p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-semibold text-foreground text-lg\">You</h3>\r\n                <p className=\"font-bold text-3xl text-accent\">\r\n                  {stats.playerWins}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-bold text-2xl text-foreground\">VS</h3>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-semibold text-foreground text-lg\">AI</h3>\r\n                <p className=\"font-bold text-3xl text-accent\">{stats.aiWins}</p>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-semibold text-foreground text-lg\">Ties</h3>\r\n                <p className=\"font-bold text-3xl text-yellow-600\">\r\n                  {stats.ties}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          <div className=\"mb-8 text-center\">\r\n            <h2 className={`font-bold text-2xl ${getResultColor()}`}>\r\n              {getResultMessage()}\r\n            </h2>\r\n            {isAnimating && (\r\n              <p className=\"mt-2 text-muted-foreground\">AI is thinking...</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Game Area */}\r\n          <div className=\"mb-8 grid gap-8 md:grid-cols-2\">\r\n            {/* Player Side */}\r\n            <Card className=\"p-6\">\r\n              <h3 className=\"mb-4 text-center font-semibold text-foreground text-xl\">\r\n                Your Choice\r\n              </h3>\r\n              <div className=\"flex justify-center gap-4\">\r\n                {choices.map((choice) => (\r\n                  <SVGChoice\r\n                    choice={choice}\r\n                    disabled={gameState !== \"ready\" || isAnimating}\r\n                    isSelected={playerChoice === choice}\r\n                    key={choice}\r\n                    onClick={() => playGame(choice)}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Computer Side */}\r\n            <Card className=\"p-6\">\r\n              <h3 className=\"mb-4 text-center font-semibold text-foreground text-xl\">\r\n                AI&apos;s Choice\r\n              </h3>\r\n              <div className=\"flex justify-center\">\r\n                {computerChoice ? (\r\n                  <SVGChoice\r\n                    choice={computerChoice}\r\n                    isSelected={true}\r\n                    onClick={() => {\r\n                      // No action needed for computer choice\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div className=\"flex h-[120px] w-[120px] items-center justify-center rounded-lg border-2 border-muted-foreground border-dashed bg-muted\">\r\n                    <span className=\"text-2xl text-muted-foreground\">?</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"space-x-4 text-center\">\r\n            {gameState === \"result\" && (\r\n              <Button\r\n                className=\"bg-secondary px-8 py-2 text-secondary-foreground hover:bg-secondary/90\"\r\n                onClick={resetGame}\r\n              >\r\n                Play Again\r\n              </Button>\r\n            )}\r\n\r\n            <Link href=\"/games\">\r\n              <Button\r\n                className=\"bg-muted px-8 py-2 text-muted-foreground hover:bg-muted/90\"\r\n                variant=\"outline\"\r\n              >\r\n                Back to Games\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\games\\rock-paper-scissor\\index.tsx"
    },
    {
      "path": "components\\games\\showdown\\index.tsx",
      "content": "\"use client\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useGameStats } from \"@/hooks/use-game-stats\";\r\n\r\ntype GameState =\r\n  | \"waiting\"\r\n  | \"ready\"\r\n  | \"countdown\"\r\n  | \"fire\"\r\n  | \"result\"\r\n  | \"staking\"\r\n  | \"contract_ready\";\r\ntype Winner = \"player\" | \"ai\" | \"none\";\r\ntype GameStats = { playerWins: number; aiWins: number };\r\n\r\nexport default function QuickDrawGame() {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [gameState, setGameState] = useState<GameState>(\"waiting\");\r\n  const [winner, setWinner] = useState<Winner>(\"none\");\r\n  const [message, setMessage] = useState(\"Connect wallet to start staking!\");\r\n  const [stats, setStats] = useState<GameStats>({ playerWins: 0, aiWins: 0 });\r\n  const [playerShot, setPlayerShot] = useState(false);\r\n  const [aiShot, setAiShot] = useState(false);\r\n  const [playerFell, setPlayerFell] = useState(false);\r\n  const [aiFell, setAiFell] = useState(false);\r\n  const [showInstructions, setShowInstructions] = useState(true);\r\n  const [showResultDialog, setShowResultDialog] = useState(false);\r\n  const [showReadyIndicator, setShowReadyIndicator] = useState(false);\r\n  const [showStakeDialog, setShowStakeDialog] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showPostClaimDialog, setShowPostClaimDialog] = useState(false);\r\n  const { updateStats } = useGameStats(\"showdown\");\r\n  const statsTrackedRef = useRef(false);\r\n\r\n  const gameTimerRef = useRef<number | undefined>(undefined);\r\n  const aiReactionRef = useRef<number | undefined>(undefined);\r\n  const animationRef = useRef<number | undefined>(undefined);\r\n\r\n  const STAKE_AMOUNT = 2;\r\n  const BOT_COUNT = 1;\r\n  const REWARD = BOT_COUNT * STAKE_AMOUNT + STAKE_AMOUNT;\r\n\r\n  // Drawing functions\r\n  const drawCactus = (\r\n    ctx: CanvasRenderingContext2D,\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number\r\n  ) => {\r\n    ctx.fillStyle = \"#16a34a\";\r\n    ctx.shadowColor = \"rgba(0, 0, 0, 0.3)\";\r\n    ctx.shadowBlur = 10;\r\n    ctx.shadowOffsetX = 5;\r\n    ctx.shadowOffsetY = 5;\r\n    ctx.fillRect(x, y, width, height);\r\n    ctx.fillRect(x - 15, y + 20, 15, 30);\r\n    ctx.fillRect(x + width, y + 30, 15, 25);\r\n    ctx.shadowBlur = 0;\r\n  };\r\n\r\n  const drawCowboy = (\r\n    ctx: CanvasRenderingContext2D,\r\n    x: number,\r\n    y: number,\r\n    facing: \"left\" | \"right\",\r\n    shot: boolean,\r\n    fell: boolean,\r\n    isPlayer: boolean\r\n  ) => {\r\n    ctx.save();\r\n    ctx.translate(x, y);\r\n    if (facing === \"right\") ctx.scale(-1, 1);\r\n\r\n    ctx.shadowColor = \"rgba(0, 0, 0, 0.4)\";\r\n    ctx.shadowBlur = 8;\r\n    ctx.shadowOffsetY = 4;\r\n\r\n    // Hat\r\n    ctx.fillStyle = \"#8b4513\";\r\n    ctx.fillRect(-15, -40, 30, 8);\r\n    ctx.fillRect(-20, -48, 40, 8);\r\n\r\n    // Head\r\n    ctx.fillStyle = isPlayer ? \"#fbbf24\" : \"#dc2626\";\r\n    ctx.fillRect(-10, -32, 20, 20);\r\n\r\n    // Body\r\n    ctx.fillStyle = \"#1f2937\";\r\n    if (fell) {\r\n      ctx.fillRect(-30, -5, 40, 15);\r\n      ctx.fillStyle = \"#92400e\";\r\n      ctx.fillRect(-35, -10, 15, 8);\r\n      ctx.fillRect(20, -10, 15, 8);\r\n    } else {\r\n      ctx.fillRect(-12, -12, 24, 30);\r\n      ctx.fillStyle = \"#92400e\";\r\n      if (shot) {\r\n        ctx.fillRect(12, -8, 20, 6);\r\n        ctx.fillStyle = \"#374151\";\r\n        ctx.fillRect(32, -6, 8, 3);\r\n      } else {\r\n        ctx.fillRect(-18, -8, 8, 20);\r\n        ctx.fillRect(10, -8, 8, 20);\r\n      }\r\n      ctx.fillStyle = \"#1e40af\";\r\n      ctx.fillRect(-10, 18, 8, 20);\r\n      ctx.fillRect(2, 18, 8, 20);\r\n    }\r\n\r\n    ctx.restore();\r\n  };\r\n\r\n  const drawMuzzleFlash = (\r\n    ctx: CanvasRenderingContext2D,\r\n    x: number,\r\n    y: number\r\n  ) => {\r\n    // const time = Date.now() * 0.01;\r\n    ctx.save();\r\n    ctx.globalAlpha = 0.8;\r\n\r\n    // Outer glow\r\n    const gradient = ctx.createRadialGradient(x, y, 0, x, y, 20);\r\n    gradient.addColorStop(0, \"#fef3c7\");\r\n    gradient.addColorStop(0.3, \"#fbbf24\");\r\n    gradient.addColorStop(0.7, \"#f59e0b\");\r\n    gradient.addColorStop(1, \"rgba(245, 158, 11, 0)\");\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, 20, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Core flash\r\n    ctx.fillStyle = \"#fef3c7\";\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, 8, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n  };\r\n\r\n  const drawReadyIndicator = (\r\n    ctx: CanvasRenderingContext2D,\r\n    x: number,\r\n    y: number\r\n  ) => {\r\n    const time = Date.now() * 0.005;\r\n    const alpha = (Math.sin(time) + 1) * 0.5;\r\n    ctx.save();\r\n    ctx.globalAlpha = alpha;\r\n\r\n    // Glow effect\r\n    ctx.shadowColor = \"#fbbf24\";\r\n    ctx.shadowBlur = 30;\r\n\r\n    ctx.fillStyle = \"#fbbf24\";\r\n    ctx.font = \"bold 64px 'Courier New', monospace\";\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillText(\"READY\", x, y);\r\n    ctx.restore();\r\n  };\r\n\r\n  const drawFireText = (\r\n    ctx: CanvasRenderingContext2D,\r\n    x: number,\r\n    y: number\r\n  ) => {\r\n    ctx.save();\r\n\r\n    // Red glow\r\n    ctx.shadowColor = \"#ef4444\";\r\n    ctx.shadowBlur = 40;\r\n\r\n    ctx.fillStyle = \"#ef4444\";\r\n    ctx.font = \"bold 96px 'Courier New', monospace\";\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillText(\"FIRE!\", x, y);\r\n\r\n    // White outline\r\n    ctx.strokeStyle = \"#ffffff\";\r\n    ctx.lineWidth = 3;\r\n    ctx.strokeText(\"FIRE!\", x, y);\r\n\r\n    ctx.restore();\r\n  };\r\n\r\n  const drawScene = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n\r\n    // Animated sky gradient\r\n    const time = Date.now() * 0.0001;\r\n    const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n    skyGradient.addColorStop(0, `hsl(${40 + Math.sin(time) * 5}, 95%, 70%)`);\r\n    skyGradient.addColorStop(0.4, \"#fbbf24\");\r\n    skyGradient.addColorStop(0.7, \"#f59e0b\");\r\n    skyGradient.addColorStop(1, \"#d97706\");\r\n    ctx.fillStyle = skyGradient;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Animated sun\r\n    ctx.save();\r\n    ctx.fillStyle = \"#fef3c7\";\r\n    ctx.shadowColor = \"#fef3c7\";\r\n    ctx.shadowBlur = 40;\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      canvas.width - 100,\r\n      80 + Math.sin(time * 2) * 5,\r\n      45,\r\n      0,\r\n      Math.PI * 2\r\n    );\r\n    ctx.fill();\r\n    ctx.restore();\r\n\r\n    // Ground with texture\r\n    const groundGradient = ctx.createLinearGradient(\r\n      0,\r\n      canvas.height - 100,\r\n      0,\r\n      canvas.height\r\n    );\r\n    groundGradient.addColorStop(0, \"#92400e\");\r\n    groundGradient.addColorStop(1, \"#78350f\");\r\n    ctx.fillStyle = groundGradient;\r\n    ctx.fillRect(0, canvas.height - 100, canvas.width, 100);\r\n\r\n    // Cacti\r\n    drawCactus(ctx, 100, canvas.height - 150, 30, 80);\r\n    drawCactus(ctx, canvas.width - 150, canvas.height - 130, 25, 70);\r\n\r\n    // Cowboys\r\n    const playerY = playerFell ? canvas.height - 50 : canvas.height - 120;\r\n    drawCowboy(ctx, 150, playerY, \"left\", playerShot, playerFell, true);\r\n\r\n    const aiY = aiFell ? canvas.height - 50 : canvas.height - 120;\r\n    drawCowboy(ctx, canvas.width - 150, aiY, \"right\", aiShot, aiFell, false);\r\n\r\n    // Muzzle flashes\r\n    if (playerShot && !playerFell)\r\n      drawMuzzleFlash(ctx, 180, canvas.height - 100);\r\n    if (aiShot && !aiFell)\r\n      drawMuzzleFlash(ctx, canvas.width - 180, canvas.height - 100);\r\n\r\n    // UI overlays\r\n    if (showReadyIndicator && gameState === \"ready\") {\r\n      drawReadyIndicator(ctx, canvas.width / 2, canvas.height / 2 - 50);\r\n    }\r\n    if (gameState === \"fire\") {\r\n      drawFireText(ctx, canvas.width / 2, canvas.height / 2 - 50);\r\n    }\r\n  }, [playerShot, aiShot, playerFell, aiFell, showReadyIndicator, gameState]);\r\n\r\n  const endGame = useCallback((gameWinner: Winner, customMessage?: string) => {\r\n    setGameState(\"result\");\r\n    setWinner(gameWinner);\r\n    if (customMessage) {\r\n      setMessage(customMessage);\r\n    } else if (gameWinner === \"player\") {\r\n      setMessage(\"You won the duel!\");\r\n      setAiFell(true);\r\n      setStats((prev) => ({ ...prev, playerWins: prev.playerWins + 1 }));\r\n    } else if (gameWinner === \"ai\") {\r\n      setMessage(\"The AI outgunned you!\");\r\n      setPlayerFell(true);\r\n      setStats((prev) => ({ ...prev, aiWins: prev.aiWins + 1 }));\r\n    }\r\n    setTimeout(() => setShowResultDialog(true), 1000);\r\n    if (gameTimerRef.current) clearTimeout(gameTimerRef.current);\r\n    if (aiReactionRef.current) clearTimeout(aiReactionRef.current);\r\n  }, []);\r\n\r\n  const playerShoot = useCallback(() => {\r\n    if (gameState === \"fire\" && !playerShot) {\r\n      setPlayerShot(true);\r\n      if (!aiShot) endGame(\"player\");\r\n    } else if (gameState === \"ready\" || gameState === \"countdown\") {\r\n      setPlayerShot(true);\r\n      endGame(\"ai\", \"You shot too early!\");\r\n    }\r\n  }, [gameState, playerShot, aiShot, endGame]);\r\n\r\n  const resetGame = useCallback(() => {\r\n    setGameState(\"staking\");\r\n    setMessage(\"Stake 2 GEM to play against 1 AI bot!\");\r\n    setWinner(\"none\");\r\n    setPlayerShot(false);\r\n    setAiShot(false);\r\n    setPlayerFell(false);\r\n    setAiFell(false);\r\n    setShowReadyIndicator(false);\r\n    setShowResultDialog(false);\r\n    setShowInstructions(false);\r\n    statsTrackedRef.current = false;\r\n    if (gameTimerRef.current) clearTimeout(gameTimerRef.current);\r\n    if (aiReactionRef.current) clearTimeout(aiReactionRef.current);\r\n  }, []);\r\n\r\n  // Track stats when game ends\r\n  useEffect(() => {\r\n    if (gameState === \"result\" && winner !== \"none\" && !statsTrackedRef.current) {\r\n      statsTrackedRef.current = true;\r\n\r\n      const playerWon = winner === \"player\";\r\n      updateStats({ playerWon, tie: false });\r\n    }\r\n  }, [gameState, winner, updateStats]);\r\n\r\n  const stakeForGame = () => {\r\n    setIsLoading(true);\r\n    setTimeout(() => {\r\n      setGameState(\"ready\");\r\n      setMessage(\"Get ready...\");\r\n      setShowReadyIndicator(true);\r\n      gameTimerRef.current = window.setTimeout(() => {\r\n        setShowReadyIndicator(false);\r\n        setGameState(\"countdown\");\r\n        setMessage(\"Wait for it...\");\r\n        const delay = Math.random() * 2000 + 1000;\r\n        gameTimerRef.current = window.setTimeout(() => {\r\n          setGameState(\"fire\");\r\n          setMessage(\"FIRE!\");\r\n          const aiReactionTime = Math.random() * 800 + 200;\r\n          aiReactionRef.current = window.setTimeout(() => {\r\n            if (!playerShot) {\r\n              setAiShot(true);\r\n              endGame(\"ai\");\r\n            }\r\n          }, aiReactionTime);\r\n        }, delay);\r\n      }, 2000);\r\n      setShowStakeDialog(false);\r\n      setIsLoading(false);\r\n    }, 1000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyPress = (e: KeyboardEvent) => {\r\n      if (e.code === \"KeyA\") {\r\n        e.preventDefault();\r\n        playerShoot();\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", handleKeyPress);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyPress);\r\n  }, [playerShoot]);\r\n\r\n  useEffect(() => {\r\n    const animate = () => {\r\n      drawScene();\r\n      animationRef.current = requestAnimationFrame(animate);\r\n    };\r\n    animate();\r\n    return () => {\r\n      if (animationRef.current) cancelAnimationFrame(animationRef.current);\r\n    };\r\n  }, [drawScene]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (gameTimerRef.current) clearTimeout(gameTimerRef.current);\r\n      if (aiReactionRef.current) clearTimeout(aiReactionRef.current);\r\n      if (animationRef.current) cancelAnimationFrame(animationRef.current);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full bg-linear-to-b from-amber-900 via-orange-800 to-amber-950 overflow-hidden\">\r\n      {/* Instruction Dialog */}\r\n      {showInstructions && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-2xl mx-4 p-8 bg-linear-to-br from-amber-900 via-orange-900 to-red-950 rounded-2xl border-4 border-amber-600 shadow-2xl\">\r\n            <div className=\"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-amber-600 px-8 py-2 rounded-full border-4 border-amber-400 shadow-lg\">\r\n              <h2 className=\"text-3xl font-bold text-white tracking-wider\">\r\n                ðŸ¤  QUICK DRAW ðŸ¤ \r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"mt-8 space-y-6 text-amber-100\">\r\n              <div className=\"bg-black/30 rounded-lg p-6 border-2 border-amber-700\">\r\n                <h3 className=\"text-xl font-bold text-amber-300 mb-4\">\r\n                  HOW TO PLAY:\r\n                </h3>\r\n                <ul className=\"space-y-3 text-lg\">\r\n                  <li className=\"flex items-center gap-3\">\r\n                    <span className=\"text-2xl\">ðŸ’°</span>\r\n                    <span>Stake 2 GEM to challenge 1 AI bot</span>\r\n                  </li>\r\n                  <li className=\"flex items-center gap-3\">\r\n                    <span className=\"text-2xl\">ðŸŽ¯</span>\r\n                    <span>Click START to begin the duel</span>\r\n                  </li>\r\n                  <li className=\"flex items-center gap-3\">\r\n                    <span className=\"text-2xl\">â°</span>\r\n                    <span>Wait for the &quot;FIRE!&quot; command</span>\r\n                  </li>\r\n                  <li className=\"flex items-center gap-3\">\r\n                    <span className=\"text-2xl\">ðŸ”«</span>\r\n                    <span>\r\n                      Press{\" \"}\r\n                      <kbd className=\"px-3 py-1 bg-amber-700 rounded font-mono font-bold\">\r\n                        A\r\n                      </kbd>{\" \"}\r\n                      to shoot\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div className=\"flex justify-around text-center bg-linear-to-r from-amber-700 via-yellow-600 to-amber-700 p-4 rounded-lg border-2 border-amber-400\">\r\n                <div>\r\n                  <div className=\"text-sm text-amber-200\">Your Stake</div>\r\n                  <div className=\"text-2xl font-bold text-white\">2 GEM</div>\r\n                </div>\r\n                <div className=\"border-l-2 border-amber-400\"></div>\r\n                <div>\r\n                  <div className=\"text-sm text-amber-200\">Prize Pool</div>\r\n                  <div className=\"text-2xl font-bold text-white\">\r\n                    {REWARD} GEM\r\n                  </div>\r\n                </div>\r\n                <div className=\"border-l-2 border-amber-400\"></div>\r\n                <div>\r\n                  <div className=\"text-sm text-amber-200\">AI Bots</div>\r\n                  <div className=\"text-2xl font-bold text-white\">1</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-8 flex gap-4\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowInstructions(false);\r\n                  setShowStakeDialog(true);\r\n                }}\r\n                className=\"flex-1 bg-linear-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-4 px-8 rounded-xl text-xl transition-all transform hover:scale-105 shadow-lg border-2 border-green-400\"\r\n              >\r\n                ðŸŽ® START DUEL\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Staking Dialog */}\r\n      {showStakeDialog && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-xl mx-4 p-8 bg-linear-to-br from-amber-900 via-orange-900 to-red-950 rounded-2xl border-4 border-amber-600 shadow-2xl\">\r\n            <div className=\"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-amber-600 px-8 py-2 rounded-full border-4 border-amber-400 shadow-lg\">\r\n              <h2 className=\"text-2xl font-bold text-white\">\r\n                ðŸ’° STAKE TO PLAY ðŸ’°\r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"mt-8 space-y-6\">\r\n              <div className=\"bg-black/40 rounded-lg p-6 border-2 border-amber-700 space-y-3 text-amber-100 text-lg\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Your Stake:</span>\r\n                  <span className=\"font-bold text-yellow-400\">2 GEM</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>AI Bot Stake:</span>\r\n                  <span className=\"font-bold text-red-400\">2 GEM (1 bot)</span>\r\n                </div>\r\n                <div className=\"border-t-2 border-amber-700 pt-3 flex justify-between\">\r\n                  <span className=\"font-bold\">Total Prize:</span>\r\n                  <span className=\"font-bold text-2xl text-green-400\">\r\n                    {REWARD} GEM\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-center text-amber-300 text-sm pt-2\">\r\n                  âš¡ Winner Takes All! âš¡\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={stakeForGame}\r\n                disabled={isLoading}\r\n                className=\"w-full bg-linear-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold py-4 px-8 rounded-xl text-xl transition-all transform hover:scale-105 shadow-lg border-2 border-green-400 disabled:border-gray-500\"\r\n              >\r\n                {isLoading ? \"â³ STAKING...\" : \"ðŸŽ¯ STAKE 2 GEM & PLAY\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Result Dialog */}\r\n      {showResultDialog && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-xl mx-4 p-8 bg-linear-to-br from-amber-900 via-orange-900 to-red-950 rounded-2xl border-4 border-amber-600 shadow-2xl\">\r\n            <div\r\n              className={`absolute -top-6 left-1/2 transform -translate-x-1/2 px-8 py-2 rounded-full border-4 shadow-lg ${\r\n                winner === \"player\"\r\n                  ? \"bg-green-600 border-green-400\"\r\n                  : \"bg-red-600 border-red-400\"\r\n              }`}\r\n            >\r\n              <h2 className=\"text-2xl font-bold text-white\">\r\n                {winner === \"player\" ? \"ðŸŽ‰ VICTORY! ðŸŽ‰\" : \"ðŸ’€ DEFEAT ðŸ’€\"}\r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"mt-8 space-y-6\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold text-amber-100\">{message}</p>\r\n              </div>\r\n\r\n              {winner === \"player\" && (\r\n                <div className=\"bg-green-900/40 border-2 border-green-600 rounded-lg p-6 text-center space-y-4\">\r\n                  <p className=\"text-xl text-green-300\">You won the duel! ðŸ†</p>\r\n                  <p className=\"text-lg text-amber-100\">\r\n                    Claim your reward of{\" \"}\r\n                    <span className=\"text-2xl font-bold text-yellow-400\">\r\n                      {REWARD} GEM\r\n                    </span>\r\n                  </p>\r\n                  <p className=\"text-sm text-green-400\">\r\n                    (2 GEM stake + 2 GEM from AI bot)\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {winner === \"ai\" && (\r\n                <div className=\"bg-red-900/40 border-2 border-red-600 rounded-lg p-6 text-center space-y-4\">\r\n                  <p className=\"text-xl text-red-300\">\r\n                    The AI outgunned you! ðŸ’€\r\n                  </p>\r\n                  <p className=\"text-lg text-amber-100\">\r\n                    Better luck next time, partner!\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <button\r\n                onClick={() => {\r\n                  setShowResultDialog(false);\r\n                  setShowPostClaimDialog(true);\r\n                }}\r\n                disabled={isLoading}\r\n                className={`w-full font-bold py-4 px-8 rounded-xl text-xl transition-all transform hover:scale-105 shadow-lg border-2 ${\r\n                  winner === \"player\"\r\n                    ? \"bg-linear-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 border-green-400\"\r\n                    : \"bg-linear-to-r from-orange-600 to-red-700 hover:from-orange-500 hover:to-red-600 border-orange-400\"\r\n                } text-white disabled:from-gray-600 disabled:to-gray-700 disabled:border-gray-500`}\r\n              >\r\n                {isLoading\r\n                  ? \"â³ PROCESSING...\"\r\n                  : winner === \"player\"\r\n                  ? `ðŸ’° CLAIM ${REWARD} GEM`\r\n                  : \"ðŸ”„ END GAME & PLAY AGAIN\"}\r\n              </button>\r\n\r\n              <div className=\"flex justify-center gap-8 text-lg text-amber-200\">\r\n                <div>\r\n                  Your Wins:{\" \"}\r\n                  <span className=\"font-bold text-green-400\">\r\n                    {stats.playerWins}\r\n                  </span>\r\n                </div>\r\n                <div>\r\n                  AI Wins:{\" \"}\r\n                  <span className=\"font-bold text-red-400\">{stats.aiWins}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Post-Claim Dialog */}\r\n      {showPostClaimDialog && (\r\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\">\r\n          <div className=\"relative w-full max-w-xl mx-4 p-8 bg-linear-to-br from-amber-900 via-orange-900 to-red-950 rounded-2xl border-4 border-amber-600 shadow-2xl\">\r\n            <div className=\"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-purple-600 px-8 py-2 rounded-full border-4 border-purple-400 shadow-lg\">\r\n              <h2 className=\"text-2xl font-bold text-white\">\r\n                ðŸŽ‰ GAME COMPLETE! ðŸŽ‰\r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"mt-8 space-y-6\">\r\n              <p className=\"text-xl text-center text-amber-100\">\r\n                What would you like to do next?\r\n              </p>\r\n\r\n              <div className=\"space-y-4\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowPostClaimDialog(false);\r\n                    resetGame();\r\n                    setShowStakeDialog(true);\r\n                  }}\r\n                  className=\"w-full bg-linear-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-4 px-8 rounded-xl text-xl transition-all transform hover:scale-105 shadow-lg border-2 border-green-400\"\r\n                >\r\n                  ðŸŽ® STAKE AGAIN & PLAY\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => (window.location.href = \"/\")}\r\n                  className=\"w-full bg-linear-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white font-bold py-4 px-8 rounded-xl text-xl transition-all transform hover:scale-105 shadow-lg border-2 border-blue-400\"\r\n                >\r\n                  ðŸ  GO TO HOME\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Game Canvas */}\r\n      <div className=\"relative w-full h-full flex flex-col\">\r\n        {/* Scoreboard */}\r\n        <div className=\"absolute top-0 left-0 right-0 z-10 flex justify-between items-center px-8 py-6 bg-linear-to-b from-black/60 to-transparent\">\r\n          <div className=\"bg-linear-to-r from-blue-600 to-blue-800 px-6 py-3 rounded-xl border-2 border-blue-400 shadow-lg\">\r\n            <div className=\"text-xs text-blue-200 uppercase tracking-wider\">\r\n              You\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-white\">\r\n              {stats.playerWins}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-black/60 backdrop-blur-sm px-8 py-3 rounded-xl border-2 border-amber-600 shadow-lg\">\r\n            <div className=\"text-center text-amber-400 text-sm font-semibold\">\r\n              POOL\r\n            </div>\r\n            <div className=\"text-2xl font-bold text-white text-center\">\r\n              80 $\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-linear-to-r from-red-600 to-red-800 px-6 py-3 rounded-xl border-2 border-red-400 shadow-lg\">\r\n            <div className=\"text-xs text-red-200 uppercase tracking-wider text-right\">\r\n              AI\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-white text-right\">\r\n              {stats.aiWins}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Canvas */}\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={1200}\r\n          height={600}\r\n          className=\"w-full h-full\"\r\n          onClick={playerShoot}\r\n        />\r\n\r\n        {/* Message Bar */}\r\n        <div className=\"absolute bottom-0 left-0 right-0 z-10 bg-linear-to-t from-black/80 to-transparent py-8\">\r\n          <div className=\"text-center\">\r\n            <div className=\"inline-block bg-black/60 backdrop-blur-sm px-12 py-4 rounded-xl border-2 border-amber-600 shadow-2xl\">\r\n              <p className=\"text-2xl font-bold text-amber-300 tracking-wider\">\r\n                {message}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\games\\showdown\\index.tsx"
    },
    {
      "path": "components\\layout\\app-sidebar.tsx",
      "content": "\"use client\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  Gamepad2,\r\n  Store,\r\n  Clock,\r\n  Sparkles,\r\n  Home,\r\n  TrendingUp,\r\n  Zap,\r\n  MessageCirclePlus,\r\n  ChessKing,\r\n} from \"lucide-react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\nimport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarGroup,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarMenu,\r\n  SidebarMenuItem,\r\n  SidebarMenuButton,\r\n  SidebarSeparator,\r\n  SidebarHeader,\r\n} from \"@/components/ui/sidebar\";\r\n\r\n// Navigation blocks\r\nconst navigationItems = [\r\n  {\r\n    title: \"Home\",\r\n    url: \"/\",\r\n    icon: Home,\r\n    gradient: \"from-blue-500 to-cyan-500\",\r\n  },\r\n  {\r\n    title: \"Games\",\r\n    url: \"/games\",\r\n    icon: Gamepad2,\r\n    gradient: \"from-purple-500 to-pink-500\",\r\n  },\r\n  {\r\n    title: \"AI\",\r\n    url: \"/ai\",\r\n    icon: MessageCirclePlus,\r\n    gradient: \"from-orange-500 to-red-500\",\r\n  },\r\n  {\r\n    title: \"Arcade\",\r\n    url: \"/arcade\",\r\n    icon: Store,\r\n    gradient: \"from-yellow-500 to-orange-500\",\r\n  },\r\n  {\r\n    title: \"Leaderboard\",\r\n    url: \"/leaderboard\",\r\n    icon: ChessKing,\r\n    gradient: \"from-pink-500 to-red-500\",\r\n  },\r\n];\r\n\r\n// Available games from components\r\nconst gameComponents = [\r\n  {\r\n    name: \"Head Soccer\",\r\n    path: \"/games/head-soccer\",\r\n    emoji: \"âš½\",\r\n    color: \"text-green-500\",\r\n  },\r\n  {\r\n    name: \"Quick Draw\",\r\n    path: \"/games/showdown\",\r\n    emoji: \"ðŸ”«\",\r\n    color: \"text-orange-500\",\r\n  },\r\n  {\r\n    name: \"Rock Paper Scissor\",\r\n    path: \"/games/rock-paper-scissor\",\r\n    emoji: \"âœŠ\",\r\n    color: \"text-blue-500\",\r\n  },\r\n  {\r\n    name: \"Paaji\",\r\n    path: \"/games/paaji\",\r\n    emoji: \"ðŸŽ®\",\r\n    color: \"text-purple-500\",\r\n  },\r\n];\r\n\r\n// Game icon emojis based on common game types/keywords\r\nconst getGameIcon = (title: string): string => {\r\n  const lowerTitle = title.toLowerCase();\r\n  if (\r\n    lowerTitle.includes(\"space\") ||\r\n    lowerTitle.includes(\"rocket\") ||\r\n    lowerTitle.includes(\"astro\")\r\n  )\r\n    return \"ðŸš€\";\r\n  if (\r\n    lowerTitle.includes(\"puzzle\") ||\r\n    lowerTitle.includes(\"brain\") ||\r\n    lowerTitle.includes(\"logic\")\r\n  )\r\n    return \"ðŸ§©\";\r\n  if (\r\n    lowerTitle.includes(\"race\") ||\r\n    lowerTitle.includes(\"racing\") ||\r\n    lowerTitle.includes(\"car\")\r\n  )\r\n    return \"ðŸŽï¸\";\r\n  if (\r\n    lowerTitle.includes(\"shoot\") ||\r\n    lowerTitle.includes(\"gun\") ||\r\n    lowerTitle.includes(\"blast\")\r\n  )\r\n    return \"ðŸ”«\";\r\n  if (lowerTitle.includes(\"jump\") || lowerTitle.includes(\"platform\"))\r\n    return \"ðŸ¦˜\";\r\n  if (lowerTitle.includes(\"adventure\") || lowerTitle.includes(\"quest\"))\r\n    return \"âš”ï¸\";\r\n  if (lowerTitle.includes(\"snake\")) return \"ðŸ\";\r\n  if (lowerTitle.includes(\"ball\") || lowerTitle.includes(\"bounce\")) return \"âš½\";\r\n  if (lowerTitle.includes(\"bird\") || lowerTitle.includes(\"fly\")) return \"ðŸ¦\";\r\n  if (lowerTitle.includes(\"alien\") || lowerTitle.includes(\"invader\"))\r\n    return \"ðŸ‘¾\";\r\n  if (lowerTitle.includes(\"maze\") || lowerTitle.includes(\"labyrinth\"))\r\n    return \"ðŸŒ€\";\r\n  if (lowerTitle.includes(\"tower\") || lowerTitle.includes(\"defense\"))\r\n    return \"ðŸ°\";\r\n  if (lowerTitle.includes(\"card\") || lowerTitle.includes(\"memory\")) return \"ðŸƒ\";\r\n  if (lowerTitle.includes(\"candy\") || lowerTitle.includes(\"match\")) return \"ðŸ¬\";\r\n  if (lowerTitle.includes(\"zombie\") || lowerTitle.includes(\"monster\"))\r\n    return \"ðŸ§Ÿ\";\r\n  if (lowerTitle.includes(\"ninja\") || lowerTitle.includes(\"warrior\"))\r\n    return \"ðŸ¥·\";\r\n  if (\r\n    lowerTitle.includes(\"fish\") ||\r\n    lowerTitle.includes(\"ocean\") ||\r\n    lowerTitle.includes(\"sea\")\r\n  )\r\n    return \"ðŸŸ\";\r\n  if (lowerTitle.includes(\"dragon\")) return \"ðŸ‰\";\r\n  if (lowerTitle.includes(\"pixel\") || lowerTitle.includes(\"retro\")) return \"ðŸ‘¾\";\r\n  if (lowerTitle.includes(\"avoid\") || lowerTitle.includes(\"dodge\")) return \"ðŸ’¨\";\r\n  return \"ðŸŽ®\"; // default game icon\r\n};\r\n\r\nexport function AppSidebar() {\r\n  const pathname = usePathname();\r\n\r\n  // Fetch user's recent AI game generations\r\n  const { data: recentGamesData } = useQuery({\r\n    queryKey: [\"recentAIGames\"],\r\n    queryFn: async () => {\r\n      try {\r\n        return await client.ai.recentGames({ limit: 4 });\r\n      } catch (error) {\r\n        // Return empty array if not authenticated or error occurs\r\n        console.error(\"Error fetching recent AI games:\", error);\r\n        return { games: [] };\r\n      }\r\n    },\r\n    refetchOnWindowFocus: false,\r\n    staleTime: 30000, // 30 seconds\r\n  });\r\n\r\n  const recentGenerations = (recentGamesData?.games || []).map((game) => ({\r\n    id: game.id,\r\n    name: game.title,\r\n    createdAt: formatDistanceToNow(new Date(game.createdAt), {\r\n      addSuffix: true,\r\n    }),\r\n    icon: getGameIcon(game.title),\r\n  }));\r\n\r\n  return (\r\n    <Sidebar>\r\n      <SidebarHeader className=\"bg-background border-b border-sidebar-border\">\r\n        <Link href={\"/\"} className=\"flex items-center gap-2 px-2 py-2\">\r\n          <Gamepad2 className=\"h-8 w-8 text-gradient-to-br from-amber-500 to-orange-600\" />\r\n          <span className=\"text-lg font-bold\">Algo Games</span>\r\n        </Link>\r\n      </SidebarHeader>\r\n\r\n      <SidebarContent className=\"bg-linear-to-b from-background to-background/95 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\">\r\n        {/* Section 1: Navigation Blocks */}\r\n        <SidebarGroup>\r\n          <SidebarGroupLabel className=\"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider\">\r\n            <TrendingUp className=\"h-3 w-3\" />\r\n            <span>Explore</span>\r\n          </SidebarGroupLabel>\r\n          <SidebarGroupContent>\r\n            <SidebarMenu>\r\n              {navigationItems.map((item) => {\r\n                const isActive = pathname === item.url;\r\n                return (\r\n                  <SidebarMenuItem key={item.title}>\r\n                    <SidebarMenuButton asChild>\r\n                      <Link\r\n                        href={item.url}\r\n                        className={`group relative overflow-hidden transition-all ${\r\n                          isActive\r\n                            ? \"bg-accent/70 shadow-lg shadow-primary/20 py-3\"\r\n                            : \"hover:bg-accent/50\"\r\n                        }`}\r\n                      >\r\n                        {isActive && (\r\n                          <div className=\"absolute inset-0 bg-linear-to-r from-primary/20 via-primary/10 to-transparent animate-pulse\" />\r\n                        )}\r\n                        <div className=\"absolute inset-0 -translate-x-full transition-transform duration-500 group-hover:translate-x-full\" />\r\n                        <div\r\n                          className={`relative rounded-md bg-linear-to-br ${\r\n                            item.gradient\r\n                          } p-1.5 ${\r\n                            isActive\r\n                              ? \"shadow-md shadow-primary/30 scale-110\"\r\n                              : \"\"\r\n                          } transition-transform`}\r\n                        >\r\n                          <item.icon className=\"h-4 w-4 text-white\" />\r\n                        </div>\r\n                        <span\r\n                          className={`relative font-medium ${\r\n                            isActive ? \"text-primary font-semibold\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {item.title}\r\n                        </span>\r\n                        {isActive && (\r\n                          <div className=\"absolute right-2 h-2 w-2 rounded-full bg-primary animate-pulse shadow-lg shadow-primary/50\" />\r\n                        )}\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </SidebarMenuItem>\r\n                );\r\n              })}\r\n            </SidebarMenu>\r\n          </SidebarGroupContent>\r\n        </SidebarGroup>\r\n\r\n        <SidebarSeparator className=\"bg-linear-to-r from-transparent via-border to-transparent\" />\r\n\r\n        {/* Section 2: Popular Games */}\r\n        <SidebarGroup>\r\n          <SidebarGroupLabel className=\"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider\">\r\n            <Zap className=\"h-3 w-3 text-yellow-500\" />\r\n            <span>Popular Games</span>\r\n          </SidebarGroupLabel>\r\n          <SidebarGroupContent>\r\n            <SidebarMenu className=\"space-y-2\">\r\n              {gameComponents.map((game) => {\r\n                const isActive = pathname === game.path;\r\n                return (\r\n                  <SidebarMenuItem key={game.path}>\r\n                    <SidebarMenuButton asChild>\r\n                      <Link\r\n                        href={game.path}\r\n                        className={`group relative overflow-hidden transition-all py-3 ${\r\n                          isActive\r\n                            ? \"bg-accent/70 shadow-lg shadow-primary/20\"\r\n                            : \"hover:bg-accent/50\"\r\n                        }`}\r\n                      >\r\n                        {isActive && (\r\n                          <div className=\"absolute inset-0 bg-linear-to-r from-primary/20 via-primary/10 to-transparent animate-pulse\" />\r\n                        )}\r\n                        <div className=\"absolute inset-0 -translate-x-full transition-transform duration-500 group-hover:translate-x-full\" />\r\n                        <div\r\n                          className={`relative flex h-8 w-8 items-center justify-center rounded-lg bg-accent text-lg transition-transform ${\r\n                            isActive\r\n                              ? \"scale-110 shadow-md shadow-primary/30 ring-2 ring-primary/50\"\r\n                              : \"group-hover:scale-110\"\r\n                          }`}\r\n                        >\r\n                          {game.emoji}\r\n                        </div>\r\n                        <div className=\"relative flex flex-col\">\r\n                          <span\r\n                            className={`text-sm font-medium ${\r\n                              isActive ? \"text-primary font-semibold\" : \"\"\r\n                            }`}\r\n                          >\r\n                            {/* show maximum 20 characters */}\r\n                            {game.name.length > 20\r\n                              ? `${game.name.slice(0, 20)}...`\r\n                              : game.name}\r\n                          </span>\r\n                          <span className=\"text-xs text-muted-foreground\">\r\n                            {isActive ? \"Now playing\" : \"Play now\"}\r\n                          </span>\r\n                        </div>\r\n                        {isActive && (\r\n                          <div className=\"absolute right-2 h-2 w-2 rounded-full bg-primary animate-pulse shadow-lg shadow-primary/50\" />\r\n                        )}\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </SidebarMenuItem>\r\n                );\r\n              })}\r\n            </SidebarMenu>\r\n          </SidebarGroupContent>\r\n        </SidebarGroup>\r\n\r\n        <SidebarSeparator className=\"bg-linear-to-r from-transparent via-border to-transparent\" />\r\n\r\n        {/* Section 3: Recent Generations */}\r\n        <SidebarGroup>\r\n          <SidebarGroupLabel className=\"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider\">\r\n            <Sparkles className=\"h-3 w-3 text-purple-500\" />\r\n            <span>Your Arcades</span>\r\n          </SidebarGroupLabel>\r\n          <SidebarGroupContent>\r\n            <SidebarMenu>\r\n              {recentGenerations.map((gen) => (\r\n                <SidebarMenuItem key={gen.id}>\r\n                  <SidebarMenuButton asChild>\r\n                    <Link\r\n                      href={`/ai/${gen.id}`}\r\n                      className=\"group relative overflow-hidden transition-all hover:bg-accent/50\"\r\n                    >\r\n                      <div className=\"absolute inset-0 bg-linear-to-r from-transparent via-purple-500/5 to-transparent -translate-x-full transition-transform duration-500 group-hover:translate-x-full\" />\r\n                      <div className=\"relative flex h-8 w-8 items-center justify-center rounded-lg bg-purple-500/10 text-lg transition-transform group-hover:scale-110 group-hover:bg-purple-500/20\">\r\n                        {gen.icon}\r\n                      </div>\r\n                      <div className=\"relative flex flex-col gap-0.5\">\r\n                        <span className=\"text-sm font-medium\">\r\n                          {gen.name.length > 20\r\n                            ? `${gen.name.slice(0, 20)}...`\r\n                            : gen.name}\r\n                        </span>\r\n                        <span className=\"flex items-center gap-1 text-xs text-muted-foreground\">\r\n                          <Clock className=\"h-3 w-3\" />\r\n                          {gen.createdAt}\r\n                        </span>\r\n                      </div>\r\n                    </Link>\r\n                  </SidebarMenuButton>\r\n                </SidebarMenuItem>\r\n              ))}\r\n            </SidebarMenu>\r\n          </SidebarGroupContent>\r\n        </SidebarGroup>\r\n\r\n        {/* Pro Tip Section */}\r\n        <div className=\"mx-4 mb-4 mt-auto rounded-lg border border-primary/20 bg-linear-to-br from-primary/5 via-purple-500/5 to-pink-500/5 p-4\">\r\n          <div className=\"mb-2 flex items-center gap-2\">\r\n            <div className=\"rounded-full bg-primary/10 p-1.5\">\r\n              <Sparkles className=\"h-4 w-4 text-primary\" />\r\n            </div>\r\n            <span className=\"text-sm font-semibold\">Pro Tip</span>\r\n          </div>\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Create your own games using our AI-powered editor!\r\n          </p>\r\n        </div>\r\n      </SidebarContent>\r\n    </Sidebar>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\layout\\app-sidebar.tsx"
    },
    {
      "path": "components\\layout\\index.tsx",
      "content": "export { LayoutWrapper as default } from \"./layout-wrapper\";\r\n",
      "type": "registry:component",
      "target": "components\\layout\\index.tsx"
    },
    {
      "path": "components\\layout\\layout-wrapper.tsx",
      "content": "\"use client\";\r\n\r\nimport { Navbar } from \"./navbar\";\r\nimport { AppSidebar } from \"./app-sidebar\";\r\nimport { SidebarProvider, SidebarInset } from \"@/components/ui/sidebar\";\r\nimport { useSession } from \"@/lib/auth-client\";\r\nimport LoadingScreen from \"@/components/layout/loading\";\r\n\r\nexport function LayoutWrapper({ children }: { children: React.ReactNode }) {\r\n  const { data: session, isPending } = useSession();\r\n\r\n  // Show loading screen while session is being fetched\r\n  if (isPending) {\r\n    return <LoadingScreen />;\r\n  }\r\n\r\n  // If user is not authenticated, show layout without sidebar\r\n  if (!session) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <main>{children}</main>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // If user is authenticated, show layout with sidebar\r\n  return (\r\n    <SidebarProvider>\r\n      <AppSidebar />\r\n      <SidebarInset>\r\n        <Navbar />\r\n        <main className=\"flex-1\">{children}</main>\r\n      </SidebarInset>\r\n    </SidebarProvider>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\layout\\layout-wrapper.tsx"
    },
    {
      "path": "components\\layout\\loading.tsx",
      "content": "import { Gamepad2 } from \"lucide-react\";\r\n\r\nexport default function LoadingScreen({ text }: { text?: string }) {\r\n  return (\r\n    <div\r\n      className={`fixed inset-0 z-50 flex items-center justify-center bg-linear-to-br from-background via-background to-amber-950/10`}\r\n    >\r\n      <div className=\"flex flex-col items-center gap-8\">\r\n        {/* Animated Logo */}\r\n        <div className=\"relative\">\r\n          {/* Outer rotating ring */}\r\n          <div className=\"absolute inset-0 -m-4\">\r\n            <div className=\"h-32 w-32 animate-spin rounded-full border-4 border-transparent border-t-amber-500 border-r-orange-500\"></div>\r\n          </div>\r\n\r\n          {/* Middle pulsing ring */}\r\n          <div className=\"absolute inset-0 -m-2\">\r\n            <div className=\"h-28 w-28 animate-pulse rounded-full border-2 border-orange-500/30\"></div>\r\n          </div>\r\n\r\n          {/* Center icon with gradient */}\r\n          <div className=\"relative flex h-24 w-24 items-center justify-center rounded-full bg-linear-to-br from-amber-500 via-orange-500 to-red-500 shadow-2xl shadow-orange-500/50\">\r\n            <Gamepad2 className=\"h-12 w-12 text-white animate-pulse\" />\r\n          </div>\r\n\r\n          {/* Glow effect */}\r\n          <div className=\"absolute inset-0 -z-10 animate-pulse blur-2xl\">\r\n            <div className=\"h-24 w-24 rounded-full bg-linear-to-br from-amber-500 via-orange-500 to-red-500 opacity-60\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Loading text */}\r\n        <div className=\"flex flex-col items-center gap-3\">\r\n          <h2 className=\"text-2xl font-bold bg-linear-to-r from-amber-500 via-orange-500 to-red-500 bg-clip-text text-transparent\">\r\n            Algo Games\r\n          </h2>\r\n\r\n          {/* Loading dots animation */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"h-2 w-2 animate-bounce rounded-full bg-amber-500 [animation-delay:-0.3s]\"></div>\r\n            <div className=\"h-2 w-2 animate-bounce rounded-full bg-orange-500 [animation-delay:-0.15s]\"></div>\r\n            <div className=\"h-2 w-2 animate-bounce rounded-full bg-red-500\"></div>\r\n          </div>\r\n\r\n          <p className=\"text-sm text-muted-foreground animate-pulse\">\r\n            {text || \"Loading your gaming experience...\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\layout\\loading.tsx"
    },
    {
      "path": "components\\layout\\navbar.tsx",
      "content": "\"use client\";\r\n\r\nimport { AnimatedThemeToggler } from \"../theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport { useSession, authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { LogIn, LogOut, LayoutDashboard, Shield, User } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport Link from \"next/link\";\r\n\r\nexport function Navbar() {\r\n  const { data: session } = useSession();\r\n  const router = useRouter();\r\n\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await authClient.signOut();\r\n      toast.success(\"Signed out successfully\");\r\n      router.push(\"/\");\r\n      router.refresh();\r\n    } catch (error) {\r\n      toast.error(\"Failed to sign out\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const getInitials = (name: string | null | undefined) => {\r\n    if (!name) return \"U\";\r\n    return name\r\n      .split(\" \")\r\n      .map((n) => n[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const isAdmin =\r\n    session?.user?.role === \"admin\" || session?.user?.role === \"super-admin\";\r\n\r\n  return (\r\n    <nav className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60\">\r\n      <div className=\"container flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4 lg:px-6\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {session && <SidebarTrigger />}\r\n          {!session && (\r\n            <Link href=\"/\">\r\n              <h1 className=\"text-base sm:text-lg font-bold\">Algo Games</h1>\r\n            </Link>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 sm:gap-3 lg:gap-4\">\r\n          <AnimatedThemeToggler />\r\n\r\n          {session ? (\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  className=\"relative h-8 w-8 rounded-full\"\r\n                >\r\n                  <Avatar className=\"h-8 w-8\">\r\n                    <AvatarImage\r\n                      src={session.user?.image || undefined}\r\n                      alt={session.user?.name || \"User\"}\r\n                    />\r\n                    <AvatarFallback>\r\n                      {getInitials(session.user?.name)}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent className=\"w-56\" align=\"end\" forceMount>\r\n                <DropdownMenuLabel className=\"font-normal\">\r\n                  <div className=\"flex flex-col space-y-1\">\r\n                    <p className=\"text-sm font-medium leading-none\">\r\n                      {session.user?.name || \"User\"}\r\n                    </p>\r\n                    <p className=\"text-xs leading-none text-muted-foreground\">\r\n                      {session.user?.email}\r\n                    </p>\r\n                    {session.user?.role && (\r\n                      <p className=\"text-xs leading-none text-muted-foreground\">\r\n                        Role: {session.user.role}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </DropdownMenuLabel>\r\n                <DropdownMenuSeparator />\r\n                <DropdownMenuItem\r\n                  className=\"cursor-pointer\"\r\n                  onClick={() => router.push(\"/profile\")}\r\n                >\r\n                  <User className=\"mr-2 h-4 w-4\" />\r\n                  <span>Profile</span>\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem\r\n                  className=\"cursor-pointer\"\r\n                  onClick={() => router.push(\"/dashboard\")}\r\n                >\r\n                  <LayoutDashboard className=\"mr-2 h-4 w-4\" />\r\n                  <span>Dashboard</span>\r\n                </DropdownMenuItem>\r\n                {isAdmin && (\r\n                  <DropdownMenuItem\r\n                    className=\"cursor-pointer\"\r\n                    onClick={() => router.push(\"/admin\")}\r\n                  >\r\n                    <Shield className=\"mr-2 h-4 w-4\" />\r\n                    <span>Admin Panel</span>\r\n                  </DropdownMenuItem>\r\n                )}\r\n                <DropdownMenuSeparator />\r\n                <DropdownMenuItem\r\n                  className=\"cursor-pointer\"\r\n                  onClick={handleSignOut}\r\n                >\r\n                  <LogOut className=\"mr-2 h-4 w-4\" />\r\n                  <span>Log out</span>\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          ) : (\r\n            <Button\r\n              variant=\"default\"\r\n              size=\"sm\"\r\n              onClick={() => router.push(\"/sign-in\")}\r\n            >\r\n              <LogIn className=\"mr-2 h-4 w-4\" />\r\n              Sign In\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\layout\\navbar.tsx"
    },
    {
      "path": "components\\profile\\password-change.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"@tanstack/react-form\";\r\nimport { z } from \"zod\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Field,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldGroup,\r\n  FieldLabel,\r\n} from \"@/components/ui/field\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Loader2, Lock, Eye, EyeOff } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\n\r\nconst passwordSchema = z\r\n  .object({\r\n    currentPassword: z.string().min(1, \"Current password is required\"),\r\n    newPassword: z\r\n      .string()\r\n      .min(8, \"Password must be at least 8 characters\")\r\n      .regex(\r\n        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/,\r\n        \"Password must contain at least one uppercase letter, one lowercase letter, and one number\"\r\n      ),\r\n    confirmPassword: z.string().min(1, \"Please confirm your password\"),\r\n  })\r\n  .refine((data) => data.newPassword === data.confirmPassword, {\r\n    message: \"Passwords don't match\",\r\n    path: [\"confirmPassword\"],\r\n  });\r\n\r\nexport function PasswordChange() {\r\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false);\r\n  const [showNewPassword, setShowNewPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n\r\n  const form = useForm({\r\n    defaultValues: {\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      confirmPassword: \"\",\r\n    },\r\n    validators: {\r\n      onSubmit: passwordSchema,\r\n    },\r\n    onSubmit: async ({ value }) => {\r\n      try {\r\n        await authClient.changePassword({\r\n          currentPassword: value.currentPassword,\r\n          newPassword: value.newPassword,\r\n          revokeOtherSessions: true,\r\n        });\r\n\r\n        toast.success(\"Password changed successfully\");\r\n        form.reset();\r\n      } catch (error) {\r\n        console.error(\"Password change error:\", error);\r\n        toast.error(\r\n          error instanceof Error ? error.message : \"Failed to change password\"\r\n        );\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Lock className=\"h-5 w-5 text-amber-500\" />\r\n          <div>\r\n            <CardTitle>Change Password</CardTitle>\r\n            <CardDescription>\r\n              Update your password to keep your account secure\r\n            </CardDescription>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            form.handleSubmit();\r\n          }}\r\n        >\r\n          <FieldGroup>\r\n            <form.Field name=\"currentPassword\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"password-change-current\">Current Password</FieldLabel>\r\n                    <div className=\"relative\">\r\n                      <Input\r\n                        id=\"password-change-current\"\r\n                        type={showCurrentPassword ? \"text\" : \"password\"}\r\n                        name={field.name}\r\n                        value={field.state.value}\r\n                        onBlur={field.handleBlur}\r\n                        onChange={(e) => field.handleChange(e.target.value)}\r\n                        aria-invalid={isInvalid}\r\n                        placeholder=\"Enter your current password\"\r\n                        disabled={form.state.isSubmitting}\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                        onClick={() => setShowCurrentPassword(!showCurrentPassword)}\r\n                        disabled={form.state.isSubmitting}\r\n                      >\r\n                        {showCurrentPassword ? (\r\n                          <EyeOff className=\"h-4 w-4\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n\r\n            <form.Field name=\"newPassword\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"password-change-new\">New Password</FieldLabel>\r\n                    <div className=\"relative\">\r\n                      <Input\r\n                        id=\"password-change-new\"\r\n                        type={showNewPassword ? \"text\" : \"password\"}\r\n                        name={field.name}\r\n                        value={field.state.value}\r\n                        onBlur={field.handleBlur}\r\n                        onChange={(e) => field.handleChange(e.target.value)}\r\n                        aria-invalid={isInvalid}\r\n                        placeholder=\"Enter your new password\"\r\n                        disabled={form.state.isSubmitting}\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                        onClick={() => setShowNewPassword(!showNewPassword)}\r\n                        disabled={form.state.isSubmitting}\r\n                      >\r\n                        {showNewPassword ? (\r\n                          <EyeOff className=\"h-4 w-4\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                    <FieldDescription>\r\n                      Must be at least 8 characters with uppercase, lowercase, and numbers\r\n                    </FieldDescription>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n\r\n            <form.Field name=\"confirmPassword\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"password-change-confirm\">Confirm New Password</FieldLabel>\r\n                    <div className=\"relative\">\r\n                      <Input\r\n                        id=\"password-change-confirm\"\r\n                        type={showConfirmPassword ? \"text\" : \"password\"}\r\n                        name={field.name}\r\n                        value={field.state.value}\r\n                        onBlur={field.handleBlur}\r\n                        onChange={(e) => field.handleChange(e.target.value)}\r\n                        aria-invalid={isInvalid}\r\n                        placeholder=\"Confirm your new password\"\r\n                        disabled={form.state.isSubmitting}\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                        onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                        disabled={form.state.isSubmitting}\r\n                      >\r\n                        {showConfirmPassword ? (\r\n                          <EyeOff className=\"h-4 w-4\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n          </FieldGroup>\r\n\r\n          <div className=\"flex gap-3 pt-6\">\r\n            <Button type=\"submit\" disabled={form.state.isSubmitting}>\r\n              {form.state.isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Changing Password...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Lock className=\"mr-2 h-4 w-4\" />\r\n                  Change Password\r\n                </>\r\n              )}\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => form.reset()}\r\n              disabled={form.state.isSubmitting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\profile\\password-change.tsx"
    },
    {
      "path": "components\\profile\\profile-edit.tsx",
      "content": "\"use client\";\r\n\r\nimport { useForm } from \"@tanstack/react-form\";\r\nimport { z } from \"zod\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Field,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldGroup,\r\n  FieldLabel,\r\n} from \"@/components/ui/field\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Loader2, Save, User } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst profileSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\").max(100, \"Name must be at most 100 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  image: z.string(),\r\n});\r\n\r\ninterface ProfileEditProps {\r\n  user: {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    image?: string | null;\r\n  };\r\n}\r\n\r\nexport function ProfileEdit({ user }: ProfileEditProps) {\r\n  const router = useRouter();\r\n\r\n  const form = useForm({\r\n    defaultValues: {\r\n      name: user.name,\r\n      email: user.email,\r\n      image: user.image || \"\",\r\n    },\r\n    validators: {\r\n      onSubmit: profileSchema,\r\n    },\r\n    onSubmit: async ({ value }) => {\r\n      try {\r\n        await authClient.updateUser({\r\n          name: value.name,\r\n          image: value.image || null,\r\n        });\r\n\r\n        toast.success(\"Profile updated successfully\");\r\n        router.refresh();\r\n      } catch (error) {\r\n        console.error(\"Profile update error:\", error);\r\n        toast.error(\r\n          error instanceof Error ? error.message : \"Failed to update profile\"\r\n        );\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <div className=\"flex items-center gap-2\">\r\n          <User className=\"h-5 w-5 text-amber-500\" />\r\n          <div>\r\n            <CardTitle>Edit Profile</CardTitle>\r\n            <CardDescription>\r\n              Update your personal information and profile picture\r\n            </CardDescription>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            form.handleSubmit();\r\n          }}\r\n        >\r\n          <FieldGroup>\r\n            <form.Field name=\"name\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"profile-edit-name\">Full Name</FieldLabel>\r\n                    <Input\r\n                      id=\"profile-edit-name\"\r\n                      name={field.name}\r\n                      value={field.state.value}\r\n                      onBlur={field.handleBlur}\r\n                      onChange={(e) => field.handleChange(e.target.value)}\r\n                      aria-invalid={isInvalid}\r\n                      placeholder=\"Enter your full name\"\r\n                      disabled={form.state.isSubmitting}\r\n                    />\r\n                    <FieldDescription>\r\n                      This is your public display name\r\n                    </FieldDescription>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n\r\n            <form.Field name=\"email\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"profile-edit-email\">Email Address</FieldLabel>\r\n                    <Input\r\n                      id=\"profile-edit-email\"\r\n                      type=\"email\"\r\n                      name={field.name}\r\n                      value={field.state.value}\r\n                      aria-invalid={isInvalid}\r\n                      placeholder=\"your.email@example.com\"\r\n                      disabled={true}\r\n                    />\r\n                    <FieldDescription>\r\n                      Email cannot be changed. Contact support if you need to update it.\r\n                    </FieldDescription>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n\r\n            <form.Field name=\"image\">\r\n              {(field) => {\r\n                const isInvalid =\r\n                  field.state.meta.isTouched && !field.state.meta.isValid;\r\n                return (\r\n                  <Field data-invalid={isInvalid}>\r\n                    <FieldLabel htmlFor=\"profile-edit-image\">Profile Picture URL</FieldLabel>\r\n                    <Input\r\n                      id=\"profile-edit-image\"\r\n                      type=\"url\"\r\n                      name={field.name}\r\n                      value={field.state.value}\r\n                      onBlur={field.handleBlur}\r\n                      onChange={(e) => field.handleChange(e.target.value)}\r\n                      aria-invalid={isInvalid}\r\n                      placeholder=\"https://example.com/avatar.jpg\"\r\n                      disabled={form.state.isSubmitting}\r\n                    />\r\n                    <FieldDescription>\r\n                      Enter a URL to your profile picture\r\n                    </FieldDescription>\r\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                  </Field>\r\n                );\r\n              }}\r\n            </form.Field>\r\n          </FieldGroup>\r\n\r\n          <div className=\"flex gap-3 pt-6\">\r\n            <Button type=\"submit\" disabled={form.state.isSubmitting}>\r\n              {form.state.isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"mr-2 h-4 w-4\" />\r\n                  Save Changes\r\n                </>\r\n              )}\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => form.reset()}\r\n              disabled={form.state.isSubmitting}\r\n            >\r\n              Reset\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\profile\\profile-edit.tsx"
    },
    {
      "path": "components\\profile\\profile-view.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n  User,\r\n  Settings,\r\n  Shield,\r\n  Mail,\r\n  Calendar,\r\n  Edit,\r\n  Camera,\r\n  LogOut,\r\n} from \"lucide-react\";\r\nimport { ProfileEdit } from \"./profile-edit\";\r\nimport { SecuritySettings } from \"./security-settings\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface ProfileViewProps {\r\n  user: {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    image?: string | null;\r\n    role?: string;\r\n    emailVerified?: boolean;\r\n    createdAt?: Date;\r\n    banned?: boolean;\r\n  };\r\n}\r\n\r\nexport function ProfileView({ user }: ProfileViewProps) {\r\n  const router = useRouter();\r\n  const [activeTab, setActiveTab] = useState(\"overview\");\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\r\n\r\n  const handleSignOut = async () => {\r\n    setIsLoggingOut(true);\r\n    try {\r\n      await authClient.signOut();\r\n      toast.success(\"Signed out successfully\");\r\n      router.push(\"/sign-in\");\r\n    } catch (error) {\r\n      console.error(\"Sign out error:\", error);\r\n      toast.error(\"Failed to sign out\");\r\n      setIsLoggingOut(false);\r\n    }\r\n  };\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(\" \")\r\n      .map((n) => n[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const getRoleBadgeVariant = (role?: string) => {\r\n    switch (role) {\r\n      case \"super-admin\":\r\n        return \"destructive\";\r\n      case \"admin\":\r\n        return \"default\";\r\n      default:\r\n        return \"secondary\";\r\n    }\r\n  };\r\n\r\n  const formatDate = (date?: Date) => {\r\n    if (!date) return \"N/A\";\r\n    return new Date(date).toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8 px-4 max-w-6xl\">\r\n      {/* Profile Header */}\r\n      <div className=\"mb-8\">\r\n        <Card className=\"border-none shadow-lg bg-linear-to-br from-amber-500/10 via-orange-500/10 to-red-500/10\">\r\n          <CardContent className=\"pt-8 pb-6\">\r\n            <div className=\"flex flex-col md:flex-row items-center md:items-start gap-6\">\r\n              {/* Avatar Section */}\r\n              <div className=\"relative group\">\r\n                <Avatar className=\"h-32 w-32 border-4 border-background shadow-xl\">\r\n                  <AvatarImage src={user.image || undefined} alt={user.name} />\r\n                  <AvatarFallback className=\"text-3xl font-bold bg-linear-to-br from-amber-500 to-orange-600 text-white\">\r\n                    {getInitials(user.name)}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <Button\r\n                  size=\"icon\"\r\n                  variant=\"secondary\"\r\n                  className=\"absolute bottom-0 right-0 rounded-full h-10 w-10 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                >\r\n                  <Camera className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n\r\n              {/* User Info */}\r\n              <div className=\"flex-1 text-center md:text-left\">\r\n                <div className=\"flex flex-col md:flex-row items-center md:items-start gap-3 mb-2\">\r\n                  <h1 className=\"text-3xl font-bold\">{user.name}</h1>\r\n                  <Badge\r\n                    variant={getRoleBadgeVariant(user.role)}\r\n                    className=\"capitalize\"\r\n                  >\r\n                    {user.role || \"user\"}\r\n                  </Badge>\r\n                  {user.emailVerified && (\r\n                    <Badge\r\n                      variant=\"outline\"\r\n                      className=\"border-green-500 text-green-600 dark:text-green-400\"\r\n                    >\r\n                      âœ“ Verified\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-muted-foreground flex items-center justify-center md:justify-start gap-2 mb-4\">\r\n                  <Mail className=\"h-4 w-4\" />\r\n                  {user.email}\r\n                </p>\r\n                <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground justify-center md:justify-start\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Calendar className=\"h-4 w-4\" />\r\n                    <span>Joined {formatDate(user.createdAt)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <User className=\"h-4 w-4\" />\r\n                    <span>ID: {user.id.slice(0, 8)}...</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveTab(\"edit\")}\r\n                >\r\n                  <Edit className=\"h-4 w-4 mr-2\" />\r\n                  Edit Profile\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleSignOut}\r\n                  disabled={isLoggingOut}\r\n                >\r\n                  <LogOut className=\"h-4 w-4 mr-2\" />\r\n                  {isLoggingOut ? \"Signing out...\" : \"Sign Out\"}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Tabs Section */}\r\n      <Tabs\r\n        value={activeTab}\r\n        onValueChange={setActiveTab}\r\n        className=\"space-y-6\"\r\n      >\r\n        <TabsList className=\"grid w-full grid-cols-4 lg:w-auto lg:inline-grid\">\r\n          <TabsTrigger value=\"overview\" className=\"gap-2\">\r\n            <User className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Overview</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"edit\" className=\"gap-2\">\r\n            <Edit className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Edit Profile</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"security\" className=\"gap-2\">\r\n            <Shield className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Security</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"settings\" className=\"gap-2\">\r\n            <Settings className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Settings</span>\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Overview Tab */}\r\n        <TabsContent value=\"overview\" className=\"space-y-6\">\r\n          <div className=\"grid gap-6 md:grid-cols-2\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg\">Account Information</CardTitle>\r\n                <CardDescription>Your personal details</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Full Name\r\n                  </label>\r\n                  <p className=\"text-lg font-medium\">{user.name}</p>\r\n                </div>\r\n                <Separator />\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Email Address\r\n                  </label>\r\n                  <p className=\"text-lg font-medium\">{user.email}</p>\r\n                </div>\r\n                <Separator />\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Account Status\r\n                  </label>\r\n                  <p className=\"text-lg font-medium\">\r\n                    {user.banned ? (\r\n                      <Badge variant=\"destructive\">Banned</Badge>\r\n                    ) : (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"border-green-500 text-green-600\"\r\n                      >\r\n                        Active\r\n                      </Badge>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg\">Account Activity</CardTitle>\r\n                <CardDescription>Your recent activity overview</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Member Since\r\n                  </label>\r\n                  <p className=\"text-lg font-medium\">\r\n                    {formatDate(user.createdAt)}\r\n                  </p>\r\n                </div>\r\n                <Separator />\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Email Verification\r\n                  </label>\r\n                  <p className=\"text-lg font-medium\">\r\n                    {user.emailVerified ? (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"border-green-500 text-green-600\"\r\n                      >\r\n                        Verified\r\n                      </Badge>\r\n                    ) : (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"border-amber-500 text-amber-600\"\r\n                      >\r\n                        Not Verified\r\n                      </Badge>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n                <Separator />\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">\r\n                    Role\r\n                  </label>\r\n                  <p className=\"text-lg font-medium capitalize\">\r\n                    {user.role || \"user\"}\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </TabsContent>\r\n\r\n        {/* Edit Profile Tab */}\r\n        <TabsContent value=\"edit\">\r\n          <ProfileEdit user={user} />\r\n        </TabsContent>\r\n\r\n        {/* Security Tab */}\r\n        <TabsContent value=\"security\" className=\"space-y-6\">\r\n          <SecuritySettings userId={user.id} />\r\n        </TabsContent>\r\n\r\n        {/* Settings Tab */}\r\n        <TabsContent value=\"settings\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Account Settings</CardTitle>\r\n              <CardDescription>\r\n                Manage your account preferences and settings\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"font-medium\">Email Notifications</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Receive email notifications about your account activity\r\n                  </p>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                  Configure\r\n                </Button>\r\n              </div>\r\n              <Separator />\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"font-medium\">Two-Factor Authentication</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Add an extra layer of security to your account\r\n                  </p>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                  Enable\r\n                </Button>\r\n              </div>\r\n              <Separator />\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"font-medium text-destructive\">\r\n                    Delete Account\r\n                  </h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Permanently delete your account and all data\r\n                  </p>\r\n                </div>\r\n                <Button variant=\"destructive\" size=\"sm\">\r\n                  Delete\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\profile\\profile-view.tsx"
    },
    {
      "path": "components\\profile\\security-settings.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n  Shield,\r\n  Monitor,\r\n  Smartphone,\r\n  MapPin,\r\n  Clock,\r\n  Trash2,\r\n  AlertTriangle,\r\n  Loader2,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\ninterface SecuritySettingsProps {\r\n  userId: string;\r\n}\r\n\r\nexport function SecuritySettings({ userId }: SecuritySettingsProps) {\r\n  const [isRevokingAll, setIsRevokingAll] = useState(false);\r\n\r\n  const {\r\n    data: sessions = [],\r\n    isLoading,\r\n    refetch,\r\n  } = useQuery({\r\n    queryKey: [\"sessions\", userId],\r\n    queryFn: async () => {\r\n      const response = await authClient.listSessions();\r\n      return response.data || [];\r\n    },\r\n  });\r\n\r\n  const handleRevokeSession = async (sessionId: string) => {\r\n    try {\r\n      await authClient.revokeSession({\r\n        token: sessionId,\r\n      });\r\n      toast.success(\"Session revoked successfully\");\r\n      refetch();\r\n    } catch (error) {\r\n      console.error(\"Revoke session error:\", error);\r\n      toast.error(\"Failed to revoke session\");\r\n    }\r\n  };\r\n\r\n  const handleRevokeAll = async () => {\r\n    setIsRevokingAll(true);\r\n    try {\r\n      await authClient.revokeOtherSessions();\r\n      toast.success(\"All other sessions revoked successfully\");\r\n      refetch();\r\n    } catch (error) {\r\n      console.error(\"Revoke all sessions error:\", error);\r\n      toast.error(\"Failed to revoke sessions\");\r\n    } finally {\r\n      setIsRevokingAll(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (date: Date | string) => {\r\n    return new Date(date).toLocaleString(\"en-US\", {\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      year: \"numeric\",\r\n      hour: \"numeric\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  const getDeviceIcon = (userAgent?: string) => {\r\n    if (!userAgent) return Monitor;\r\n    if (\r\n      userAgent.includes(\"Mobile\") ||\r\n      userAgent.includes(\"Android\") ||\r\n      userAgent.includes(\"iPhone\")\r\n    ) {\r\n      return Smartphone;\r\n    }\r\n    return Monitor;\r\n  };\r\n\r\n  const getDeviceType = (userAgent?: string) => {\r\n    if (!userAgent) return \"Unknown Device\";\r\n    if (userAgent.includes(\"Mobile\")) return \"Mobile\";\r\n    if (userAgent.includes(\"Android\")) return \"Android\";\r\n    if (userAgent.includes(\"iPhone\")) return \"iPhone\";\r\n    if (userAgent.includes(\"iPad\")) return \"iPad\";\r\n    if (userAgent.includes(\"Windows\")) return \"Windows\";\r\n    if (userAgent.includes(\"Mac\")) return \"Mac\";\r\n    if (userAgent.includes(\"Linux\")) return \"Linux\";\r\n    return \"Unknown Device\";\r\n  };\r\n\r\n  const getBrowser = (userAgent?: string) => {\r\n    if (!userAgent) return \"Unknown Browser\";\r\n    if (userAgent.includes(\"Chrome\")) return \"Chrome\";\r\n    if (userAgent.includes(\"Firefox\")) return \"Firefox\";\r\n    if (userAgent.includes(\"Safari\")) return \"Safari\";\r\n    if (userAgent.includes(\"Edge\")) return \"Edge\";\r\n    return \"Unknown Browser\";\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Shield className=\"h-5 w-5 text-amber-500\" />\r\n            <div>\r\n              <CardTitle>Security & Sessions</CardTitle>\r\n              <CardDescription>\r\n                Manage your active sessions and security settings\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n          {sessions.length > 1 && (\r\n            <AlertDialog>\r\n              <AlertDialogTrigger asChild>\r\n                <Button\r\n                  variant=\"destructive\"\r\n                  size=\"sm\"\r\n                  disabled={isRevokingAll}\r\n                >\r\n                  {isRevokingAll ? (\r\n                    <>\r\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                      Revoking...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                      Revoke All Sessions\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </AlertDialogTrigger>\r\n              <AlertDialogContent>\r\n                <AlertDialogHeader>\r\n                  <AlertDialogTitle>Are you sure?</AlertDialogTitle>\r\n                  <AlertDialogDescription>\r\n                    This will sign you out of all devices except this one. You\r\n                    will need to sign in again on those devices.\r\n                  </AlertDialogDescription>\r\n                </AlertDialogHeader>\r\n                <AlertDialogFooter>\r\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                  <AlertDialogAction onClick={handleRevokeAll}>\r\n                    Revoke All Sessions\r\n                  </AlertDialogAction>\r\n                </AlertDialogFooter>\r\n              </AlertDialogContent>\r\n            </AlertDialog>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {isLoading ? (\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n          </div>\r\n        ) : sessions.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            No active sessions found\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n              <AlertTriangle className=\"h-4 w-4 text-amber-500\" />\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                You have {sessions.length} active{\" \"}\r\n                {sessions.length === 1 ? \"session\" : \"sessions\"}\r\n              </p>\r\n            </div>\r\n\r\n            {sessions.map((session, index) => {\r\n              const DeviceIcon = getDeviceIcon(session.userAgent ?? undefined);\r\n              const isCurrentSession = index === 0; // Assuming first session is current\r\n\r\n              return (\r\n                <div key={session.id}>\r\n                  <div className=\"flex items-start gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors\">\r\n                    <div className=\"mt-1\">\r\n                      <DeviceIcon className=\"h-5 w-5 text-muted-foreground\" />\r\n                    </div>\r\n                    <div className=\"flex-1 space-y-2\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <h4 className=\"font-medium\">\r\n                          {getDeviceType(session.userAgent ?? undefined)} Â·{\" \"}\r\n                          {getBrowser(session.userAgent ?? undefined)}\r\n                        </h4>\r\n                        {isCurrentSession && (\r\n                          <Badge\r\n                            variant=\"outline\"\r\n                            className=\"border-green-500 text-green-600\"\r\n                          >\r\n                            Current Session\r\n                          </Badge>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"grid gap-1 text-sm text-muted-foreground\">\r\n                        {session.ipAddress && (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <MapPin className=\"h-3 w-3\" />\r\n                            <span>{session.ipAddress}</span>\r\n                          </div>\r\n                        )}\r\n                        {session.createdAt && (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Clock className=\"h-3 w-3\" />\r\n                            <span>\r\n                              Active since {formatDate(session.createdAt)}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    {!isCurrentSession && (\r\n                      <AlertDialog>\r\n                        <AlertDialogTrigger asChild>\r\n                          <Button variant=\"ghost\" size=\"sm\">\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent>\r\n                          <AlertDialogHeader>\r\n                            <AlertDialogTitle>\r\n                              Revoke this session?\r\n                            </AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                              This will sign out this device. You will need to\r\n                              sign in again to access your account from that\r\n                              device.\r\n                            </AlertDialogDescription>\r\n                          </AlertDialogHeader>\r\n                          <AlertDialogFooter>\r\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                            <AlertDialogAction\r\n                              onClick={() => handleRevokeSession(session.id)}\r\n                            >\r\n                              Revoke Session\r\n                            </AlertDialogAction>\r\n                          </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                      </AlertDialog>\r\n                    )}\r\n                  </div>\r\n                  {index < sessions.length - 1 && (\r\n                    <Separator className=\"my-4\" />\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        <Separator />\r\n\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-medium\">Security Recommendations</h3>\r\n          <div className=\"space-y-3 text-sm text-muted-foreground\">\r\n            <div className=\"flex gap-2\">\r\n              <Shield className=\"h-4 w-4 mt-0.5 shrink-0\" />\r\n              <p>Use a strong, unique password for your account</p>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <Shield className=\"h-4 w-4 mt-0.5 shrink-0\" />\r\n              <p>Enable two-factor authentication for extra security</p>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <Shield className=\"h-4 w-4 mt-0.5 shrink-0\" />\r\n              <p>Review active sessions regularly and revoke unknown devices</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\profile\\security-settings.tsx"
    },
    {
      "path": "components\\providers.tsx",
      "content": "\"use client\";\r\n\r\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { ThemeProvider } from \"@/components/theme-provider\";\r\nimport { NuqsAdapter } from \"nuqs/adapters/next/app\";\r\nconst queryClient = new QueryClient();\r\n\r\nexport function Providers({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <ThemeProvider attribute=\"class\" defaultTheme=\"dark\">\r\n      <QueryClientProvider client={queryClient}>\r\n        <NuqsAdapter>{children}</NuqsAdapter>\r\n      </QueryClientProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\providers.tsx"
    },
    {
      "path": "components\\theme-provider.tsx",
      "content": "\"use client\";\r\n\r\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\";\r\nimport type * as React from \"react\";\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof NextThemesProvider>) {\r\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\theme-provider.tsx"
    },
    {
      "path": "components\\theme-toggle.tsx",
      "content": "\"use client\";\r\n\r\nimport { Moon, Sun } from \"lucide-react\";\r\nimport { useTheme } from \"next-themes\";\r\nimport { useCallback, useRef } from \"react\";\r\nimport { flushSync } from \"react-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype Props = {\r\n  className?: string;\r\n};\r\n\r\nexport const AnimatedThemeToggler = ({ className }: Props) => {\r\n  const { theme, setTheme } = useTheme();\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  const toggleTheme = useCallback(async () => {\r\n    if (!buttonRef.current) {\r\n      return;\r\n    }\r\n\r\n    const newTheme = theme === \"dark\" ? \"light\" : \"dark\";\r\n\r\n    // Check if View Transitions API is supported\r\n    if (!document.startViewTransition) {\r\n      setTheme(newTheme);\r\n      return;\r\n    }\r\n\r\n    await document.startViewTransition(() => {\r\n      flushSync(() => {\r\n        setTheme(newTheme);\r\n      });\r\n    }).ready;\r\n\r\n    const { top, left, width, height } =\r\n      buttonRef.current.getBoundingClientRect();\r\n    const x = left + width / 2;\r\n    const y = top + height / 2;\r\n    const maxRadius = Math.hypot(\r\n      Math.max(left, window.innerWidth - left),\r\n      Math.max(top, window.innerHeight - top)\r\n    );\r\n\r\n    document.documentElement.animate(\r\n      {\r\n        clipPath: [\r\n          `circle(0px at ${x}px ${y}px)`,\r\n          `circle(${maxRadius}px at ${x}px ${y}px)`,\r\n        ],\r\n      },\r\n      {\r\n        duration: 700,\r\n        easing: \"ease-in-out\",\r\n        pseudoElement: \"::view-transition-new(root)\",\r\n      }\r\n    );\r\n  }, [theme, setTheme]);\r\n\r\n  return (\r\n    <Button\r\n      aria-label=\"Toggle theme\"\r\n      className={cn(\"h-9 w-9 p-0\", className)}\r\n      onClick={toggleTheme}\r\n      ref={buttonRef}\r\n      size=\"sm\"\r\n      variant=\"ghost\"\r\n    >\r\n      {theme === \"dark\" ? (\r\n        <Sun className=\"h-4 w-4 transition-all\" />\r\n      ) : (\r\n        <Moon className=\"h-4 w-4 transition-all\" />\r\n      )}\r\n    </Button>\r\n  );\r\n};\r\n",
      "type": "registry:component",
      "target": "components\\theme-toggle.tsx"
    },
    {
      "path": "components\\ui\\button-group.tsx",
      "content": "import { Slot as SlotPrimitive } from \"radix-ui\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\n\r\nconst buttonGroupVariants = cva(\r\n  \"flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2\",\r\n  {\r\n    variants: {\r\n      orientation: {\r\n        horizontal:\r\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\r\n        vertical:\r\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      orientation: \"horizontal\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction ButtonGroup({\r\n  className,\r\n  orientation,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\r\n  return (\r\n    <div\r\n      role=\"group\"\r\n      data-slot=\"button-group\"\r\n      data-orientation={orientation}\r\n      className={cn(buttonGroupVariants({ orientation }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ButtonGroupText({\r\n  className,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  asChild?: boolean\r\n}) {\r\n  const Comp = asChild ? SlotPrimitive.Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      className={cn(\r\n        \"bg-muted flex items-center gap-2 rounded-md border px-4 text-sm font-medium shadow-xs [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ButtonGroupSeparator({\r\n  className,\r\n  orientation = \"vertical\",\r\n  ...props\r\n}: React.ComponentProps<typeof Separator>) {\r\n  return (\r\n    <Separator\r\n      data-slot=\"button-group-separator\"\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  ButtonGroup,\r\n  ButtonGroupSeparator,\r\n  ButtonGroupText,\r\n  buttonGroupVariants,\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\ui\\button-group.tsx"
    },
    {
      "path": "components\\ui\\empty.tsx",
      "content": "import { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty\"\r\n      className={cn(\r\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 rounded-lg border-dashed p-6 text-center text-balance md:p-12\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty-header\"\r\n      className={cn(\r\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst emptyMediaVariants = cva(\r\n  \"flex shrink-0 items-center justify-center mb-2 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction EmptyMedia({\r\n  className,\r\n  variant = \"default\",\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty-icon\"\r\n      data-variant={variant}\r\n      className={cn(emptyMediaVariants({ variant, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty-title\"\r\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty-description\"\r\n      className={cn(\r\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"empty-content\"\r\n      className={cn(\r\n        \"flex w-full max-w-sm min-w-0 flex-col items-center gap-4 text-sm text-balance\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Empty,\r\n  EmptyHeader,\r\n  EmptyTitle,\r\n  EmptyDescription,\r\n  EmptyContent,\r\n  EmptyMedia,\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\ui\\empty.tsx"
    },
    {
      "path": "components\\ui\\field.tsx",
      "content": "\"use client\"\r\n\r\nimport { useMemo } from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\n\r\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\r\n  return (\r\n    <fieldset\r\n      data-slot=\"field-set\"\r\n      className={cn(\r\n        \"flex flex-col gap-6\",\r\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldLegend({\r\n  className,\r\n  variant = \"legend\",\r\n  ...props\r\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\r\n  return (\r\n    <legend\r\n      data-slot=\"field-legend\"\r\n      data-variant={variant}\r\n      className={cn(\r\n        \"mb-3 font-medium\",\r\n        \"data-[variant=legend]:text-base\",\r\n        \"data-[variant=label]:text-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"field-group\"\r\n      className={cn(\r\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst fieldVariants = cva(\r\n  \"group/field flex w-full gap-3 data-[invalid=true]:text-destructive\",\r\n  {\r\n    variants: {\r\n      orientation: {\r\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\r\n        horizontal: [\r\n          \"flex-row items-center\",\r\n          \"[&>[data-slot=field-label]]:flex-auto\",\r\n          \"has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\r\n        ],\r\n        responsive: [\r\n          \"flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto\",\r\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\r\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\r\n        ],\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      orientation: \"vertical\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Field({\r\n  className,\r\n  orientation = \"vertical\",\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\r\n  return (\r\n    <div\r\n      role=\"group\"\r\n      data-slot=\"field\"\r\n      data-orientation={orientation}\r\n      className={cn(fieldVariants({ orientation }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"field-content\"\r\n      className={cn(\r\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Label>) {\r\n  return (\r\n    <Label\r\n      data-slot=\"field-label\"\r\n      className={cn(\r\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\r\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4\",\r\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"field-label\"\r\n      className={cn(\r\n        \"flex w-fit items-center gap-2 text-sm leading-snug font-medium group-data-[disabled=true]/field:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  return (\r\n    <p\r\n      data-slot=\"field-description\"\r\n      className={cn(\r\n        \"text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\r\n        \"last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5\",\r\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FieldSeparator({\r\n  children,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  children?: React.ReactNode\r\n}) {\r\n  return (\r\n    <div\r\n      data-slot=\"field-separator\"\r\n      data-content={!!children}\r\n      className={cn(\r\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <Separator className=\"absolute inset-0 top-1/2\" />\r\n      {children && (\r\n        <span\r\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\r\n          data-slot=\"field-separator-content\"\r\n        >\r\n          {children}\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FieldError({\r\n  className,\r\n  children,\r\n  errors,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  errors?: Array<{ message?: string } | undefined>\r\n}) {\r\n  const content = useMemo(() => {\r\n    if (children) {\r\n      return children\r\n    }\r\n\r\n    if (!errors?.length) {\r\n      return null\r\n    }\r\n\r\n    const uniqueErrors = [\r\n      ...new Map(errors.map((error) => [error?.message, error])).values(),\r\n    ]\r\n\r\n    if (uniqueErrors?.length == 1) {\r\n      return uniqueErrors[0]?.message\r\n    }\r\n\r\n    return (\r\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\r\n        {uniqueErrors.map(\r\n          (error, index) =>\r\n            error?.message && <li key={index}>{error.message}</li>\r\n        )}\r\n      </ul>\r\n    )\r\n  }, [children, errors])\r\n\r\n  if (!content) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div\r\n      role=\"alert\"\r\n      data-slot=\"field-error\"\r\n      className={cn(\"text-destructive text-sm font-normal\", className)}\r\n      {...props}\r\n    >\r\n      {content}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport {\r\n  Field,\r\n  FieldLabel,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldGroup,\r\n  FieldLegend,\r\n  FieldSeparator,\r\n  FieldSet,\r\n  FieldContent,\r\n  FieldTitle,\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\ui\\field.tsx"
    },
    {
      "path": "components\\ui\\input-group.tsx",
      "content": "\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\n\r\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"input-group\"\r\n      role=\"group\"\r\n      className={cn(\r\n        \"group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none\",\r\n        \"h-9 min-w-0 has-[>textarea]:h-auto\",\r\n\r\n        // Variants based on alignment.\r\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\r\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\r\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\r\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\r\n\r\n        // Focus state.\r\n        \"has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]\",\r\n\r\n        // Error state.\r\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\r\n\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst inputGroupAddonVariants = cva(\r\n  \"text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50\",\r\n  {\r\n    variants: {\r\n      align: {\r\n        \"inline-start\":\r\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\r\n        \"inline-end\":\r\n          \"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]\",\r\n        \"block-start\":\r\n          \"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5\",\r\n        \"block-end\":\r\n          \"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      align: \"inline-start\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction InputGroupAddon({\r\n  className,\r\n  align = \"inline-start\",\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\r\n  return (\r\n    <div\r\n      role=\"group\"\r\n      data-slot=\"input-group-addon\"\r\n      data-align={align}\r\n      className={cn(inputGroupAddonVariants({ align }), className)}\r\n      onClick={(e) => {\r\n        if ((e.target as HTMLElement).closest(\"button\")) {\r\n          return\r\n        }\r\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst inputGroupButtonVariants = cva(\r\n  \"text-sm shadow-none flex gap-2 items-center\",\r\n  {\r\n    variants: {\r\n      size: {\r\n        xs: \"h-6 gap-1 px-2 rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-3.5 has-[>svg]:px-2\",\r\n        sm: \"h-8 px-2.5 gap-1.5 rounded-md has-[>svg]:px-2.5\",\r\n        \"icon-xs\":\r\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\r\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      size: \"xs\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction InputGroupButton({\r\n  className,\r\n  type = \"button\",\r\n  variant = \"ghost\",\r\n  size = \"xs\",\r\n  ...props\r\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\r\n  VariantProps<typeof inputGroupButtonVariants>) {\r\n  return (\r\n    <Button\r\n      type={type}\r\n      data-size={size}\r\n      variant={variant}\r\n      className={cn(inputGroupButtonVariants({ size }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction InputGroupInput({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <Input\r\n      data-slot=\"input-group-control\"\r\n      className={cn(\r\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction InputGroupTextarea({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"textarea\">) {\r\n  return (\r\n    <Textarea\r\n      data-slot=\"input-group-control\"\r\n      className={cn(\r\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupButton,\r\n  InputGroupText,\r\n  InputGroupInput,\r\n  InputGroupTextarea,\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\ui\\input-group.tsx"
    },
    {
      "path": "components\\ui\\item.tsx",
      "content": "import * as React from \"react\"\r\nimport { Slot as SlotPrimitive } from \"radix-ui\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\n\r\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      role=\"list\"\r\n      data-slot=\"item-group\"\r\n      className={cn(\"group/item-group flex flex-col\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Separator>) {\r\n  return (\r\n    <Separator\r\n      data-slot=\"item-separator\"\r\n      orientation=\"horizontal\"\r\n      className={cn(\"my-0\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst itemVariants = cva(\r\n  \"group/item flex items-center border border-transparent text-sm rounded-md transition-colors [a]:hover:bg-accent/50 [a]:transition-colors duration-100 flex-wrap outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline: \"border-border\",\r\n        muted: \"bg-muted/50\",\r\n      },\r\n      size: {\r\n        default: \"p-4 gap-4 \",\r\n        sm: \"py-3 px-4 gap-2.5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Item({\r\n  className,\r\n  variant = \"default\",\r\n  size = \"default\",\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> &\r\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\r\n  const Comp = asChild ? SlotPrimitive.Slot : \"div\"\r\n  return (\r\n    <Comp\r\n      data-slot=\"item\"\r\n      data-variant={variant}\r\n      data-size={size}\r\n      className={cn(itemVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst itemMediaVariants = cva(\r\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none group-has-[[data-slot=item-description]]/item:translate-y-0.5\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        icon: \"size-8 border rounded-sm bg-muted [&_svg:not([class*='size-'])]:size-4\",\r\n        image:\r\n          \"size-10 rounded-sm overflow-hidden [&_img]:size-full [&_img]:object-cover\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction ItemMedia({\r\n  className,\r\n  variant = \"default\",\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-media\"\r\n      data-variant={variant}\r\n      className={cn(itemMediaVariants({ variant, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-content\"\r\n      className={cn(\r\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-title\"\r\n      className={cn(\r\n        \"flex w-fit items-center gap-2 text-sm leading-snug font-medium\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  return (\r\n    <p\r\n      data-slot=\"item-description\"\r\n      className={cn(\r\n        \"text-muted-foreground line-clamp-2 text-sm leading-normal font-normal text-balance\",\r\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-actions\"\r\n      className={cn(\"flex items-center gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-header\"\r\n      className={cn(\r\n        \"flex basis-full items-center justify-between gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"item-footer\"\r\n      className={cn(\r\n        \"flex basis-full items-center justify-between gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Item,\r\n  ItemMedia,\r\n  ItemContent,\r\n  ItemActions,\r\n  ItemGroup,\r\n  ItemSeparator,\r\n  ItemTitle,\r\n  ItemDescription,\r\n  ItemHeader,\r\n  ItemFooter,\r\n}\r\n",
      "type": "registry:component",
      "target": "components\\ui\\item.tsx"
    },
    {
      "path": "components\\ui\\kbd.tsx",
      "content": "import { cn } from \"@/lib/utils\"\r\n\r\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\r\n  return (\r\n    <kbd\r\n      data-slot=\"kbd\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium select-none\",\r\n        \"[&_svg:not([class*='size-'])]:size-3\",\r\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <kbd\r\n      data-slot=\"kbd-group\"\r\n      className={cn(\"inline-flex items-center gap-1\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Kbd, KbdGroup }\r\n",
      "type": "registry:component",
      "target": "components\\ui\\kbd.tsx"
    },
    {
      "path": "components\\ui\\spinner.tsx",
      "content": "import { Loader2Icon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\r\n  return (\r\n    <Loader2Icon\r\n      role=\"status\"\r\n      aria-label=\"Loading\"\r\n      className={cn(\"size-4 animate-spin\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Spinner }\r\n",
      "type": "registry:component",
      "target": "components\\ui\\spinner.tsx"
    },
    {
      "path": "config\\data-table.ts",
      "content": "export type DataTableConfig = typeof dataTableConfig;\r\n\r\nexport const dataTableConfig = {\r\n  textOperators: [\r\n    { label: \"Contains\", value: \"iLike\" as const },\r\n    { label: \"Does not contain\", value: \"notILike\" as const },\r\n    { label: \"Is\", value: \"eq\" as const },\r\n    { label: \"Is not\", value: \"ne\" as const },\r\n    { label: \"Is empty\", value: \"isEmpty\" as const },\r\n    { label: \"Is not empty\", value: \"isNotEmpty\" as const },\r\n  ],\r\n  numericOperators: [\r\n    { label: \"Is\", value: \"eq\" as const },\r\n    { label: \"Is not\", value: \"ne\" as const },\r\n    { label: \"Is less than\", value: \"lt\" as const },\r\n    { label: \"Is less than or equal to\", value: \"lte\" as const },\r\n    { label: \"Is greater than\", value: \"gt\" as const },\r\n    { label: \"Is greater than or equal to\", value: \"gte\" as const },\r\n    { label: \"Is between\", value: \"isBetween\" as const },\r\n    { label: \"Is empty\", value: \"isEmpty\" as const },\r\n    { label: \"Is not empty\", value: \"isNotEmpty\" as const },\r\n  ],\r\n  dateOperators: [\r\n    { label: \"Is\", value: \"eq\" as const },\r\n    { label: \"Is not\", value: \"ne\" as const },\r\n    { label: \"Is before\", value: \"lt\" as const },\r\n    { label: \"Is after\", value: \"gt\" as const },\r\n    { label: \"Is on or before\", value: \"lte\" as const },\r\n    { label: \"Is on or after\", value: \"gte\" as const },\r\n    { label: \"Is between\", value: \"isBetween\" as const },\r\n    { label: \"Is relative to today\", value: \"isRelativeToToday\" as const },\r\n    { label: \"Is empty\", value: \"isEmpty\" as const },\r\n    { label: \"Is not empty\", value: \"isNotEmpty\" as const },\r\n  ],\r\n  selectOperators: [\r\n    { label: \"Is\", value: \"eq\" as const },\r\n    { label: \"Is not\", value: \"ne\" as const },\r\n    { label: \"Is empty\", value: \"isEmpty\" as const },\r\n    { label: \"Is not empty\", value: \"isNotEmpty\" as const },\r\n  ],\r\n  multiSelectOperators: [\r\n    { label: \"Has any of\", value: \"inArray\" as const },\r\n    { label: \"Has none of\", value: \"notInArray\" as const },\r\n    { label: \"Is empty\", value: \"isEmpty\" as const },\r\n    { label: \"Is not empty\", value: \"isNotEmpty\" as const },\r\n  ],\r\n  booleanOperators: [\r\n    { label: \"Is\", value: \"eq\" as const },\r\n    { label: \"Is not\", value: \"ne\" as const },\r\n  ],\r\n  sortOrders: [\r\n    { label: \"Asc\", value: \"asc\" as const },\r\n    { label: \"Desc\", value: \"desc\" as const },\r\n  ],\r\n  filterVariants: [\r\n    \"text\",\r\n    \"number\",\r\n    \"range\",\r\n    \"date\",\r\n    \"dateRange\",\r\n    \"boolean\",\r\n    \"select\",\r\n    \"multiSelect\",\r\n  ] as const,\r\n  operators: [\r\n    \"iLike\",\r\n    \"notILike\",\r\n    \"eq\",\r\n    \"ne\",\r\n    \"inArray\",\r\n    \"notInArray\",\r\n    \"isEmpty\",\r\n    \"isNotEmpty\",\r\n    \"lt\",\r\n    \"lte\",\r\n    \"gt\",\r\n    \"gte\",\r\n    \"isBetween\",\r\n    \"isRelativeToToday\",\r\n  ] as const,\r\n  joinOperators: [\"and\", \"or\"] as const,\r\n};\r\n",
      "type": "registry:lib",
      "target": "config\\data-table.ts"
    },
    {
      "path": "env.ts",
      "content": "import { createEnv } from \"@t3-oss/env-nextjs\";\r\nimport { z } from \"zod\";\r\n\r\nexport const env = createEnv({\r\n  server: {\r\n    MONGODB_URI: z.string().min(1).max(2000),\r\n    NODE_ENV: z.enum([\"development\", \"production\"]).default(\"production\"),\r\n    BETTER_AUTH_SECRET: z.string().min(32),\r\n    BETTER_AUTH_URL: z.string().url().default(\"http://localhost:3000\"),\r\n    MONGODB_DB_NAME: z.string().min(1).max(100).default(\"game-aggregator\"),\r\n    GOOGLE_CLIENT_ID: z.string().min(1),\r\n    GOOGLE_CLIENT_SECRET: z.string().min(1),\r\n    // SMTP Configuration for Nodemailer\r\n    SMTP_HOST: z.string().min(1),\r\n    SMTP_PORT: z.coerce.number().int().positive().default(587),\r\n    SMTP_SECURE: z.coerce.boolean().default(false),\r\n    SMTP_USER: z.string().min(1),\r\n    SMTP_PASSWORD: z.string().min(1),\r\n    SMTP_FROM_EMAIL: z.string().email(),\r\n    SMTP_FROM_NAME: z.string().default(\"Game Aggregator\"),\r\n    PINATA_JWT: z.string().min(1),\r\n  },\r\n  client: {\r\n    // NEXT_PUBLIC_ variables are exposed to the client\r\n  },\r\n  // If you're using Next.js < 13.4.4, you'll need to specify the runtimeEnv manually\r\n  runtimeEnv: {\r\n    MONGODB_URI: process.env.MONGODB_URI,\r\n    NODE_ENV: process.env.NODE_ENV,\r\n    BETTER_AUTH_SECRET: process.env.BETTER_AUTH_SECRET,\r\n    BETTER_AUTH_URL: process.env.BETTER_AUTH_URL,\r\n    MONGODB_DB_NAME: process.env.MONGODB_DB_NAME,\r\n    GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\r\n    GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\r\n    SMTP_HOST: process.env.SMTP_HOST,\r\n    SMTP_PORT: process.env.SMTP_PORT,\r\n    SMTP_SECURE: process.env.SMTP_SECURE,\r\n    SMTP_USER: process.env.SMTP_USER,\r\n    SMTP_PASSWORD: process.env.SMTP_PASSWORD,\r\n    SMTP_FROM_EMAIL: process.env.SMTP_FROM_EMAIL,\r\n    SMTP_FROM_NAME: process.env.SMTP_FROM_NAME,\r\n    PINATA_JWT: process.env.PINATA_JWT,\r\n  },\r\n  // For Next.js >= 13.4.4, you only need to destructure client variables:\r\n  // experimental__runtimeEnv: {\r\n  //   NEXT_PUBLIC_PUBLISHABLE_KEY: process.env.NEXT_PUBLIC_PUBLISHABLE_KEY,\r\n  // }\r\n});\r\n",
      "type": "registry:component",
      "target": "env.ts"
    },
    {
      "path": "hooks\\use-callback-ref.ts",
      "content": "import * as React from \"react\";\r\n\r\n/**\r\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/use-callback-ref/src/useCallbackRef.tsx\r\n */\r\n\r\n/**\r\n * A custom hook that converts a callback to a ref to avoid triggering re-renders when passed as a\r\n * prop or avoid re-executing effects when passed as a dependency\r\n */\r\nfunction useCallbackRef<T extends (...args: never[]) => unknown>(\r\n  callback: T | undefined,\r\n): T {\r\n  const callbackRef = React.useRef(callback);\r\n\r\n  React.useEffect(() => {\r\n    callbackRef.current = callback;\r\n  });\r\n\r\n  // https://github.com/facebook/react/issues/19240\r\n  return React.useMemo(\r\n    () => ((...args) => callbackRef.current?.(...args)) as T,\r\n    [],\r\n  );\r\n}\r\n\r\nexport { useCallbackRef };\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-callback-ref.ts"
    },
    {
      "path": "hooks\\use-data-table.ts",
      "content": "\"use client\";\r\n\r\nimport {\r\n  type ColumnFiltersState,\r\n  getCoreRowModel,\r\n  getFacetedMinMaxValues,\r\n  getFacetedRowModel,\r\n  getFacetedUniqueValues,\r\n  getFilteredRowModel,\r\n  getPaginationRowModel,\r\n  getSortedRowModel,\r\n  type PaginationState,\r\n  type RowSelectionState,\r\n  type SortingState,\r\n  type TableOptions,\r\n  type TableState,\r\n  type Updater,\r\n  useReactTable,\r\n  type VisibilityState,\r\n} from \"@tanstack/react-table\";\r\nimport {\r\n  parseAsArrayOf,\r\n  parseAsInteger,\r\n  parseAsString,\r\n  type SingleParser,\r\n  type UseQueryStateOptions,\r\n  useQueryState,\r\n  useQueryStates,\r\n} from \"nuqs\";\r\nimport * as React from \"react\";\r\n\r\nimport { useDebouncedCallback } from \"@/hooks/use-debounced-callback\";\r\nimport { getSortingStateParser } from \"@/lib/parsers\";\r\nimport type { ExtendedColumnSort, QueryKeys } from \"@/types/data-table\";\r\n\r\nconst PAGE_KEY = \"page\";\r\nconst PER_PAGE_KEY = \"perPage\";\r\nconst SORT_KEY = \"sort\";\r\nconst FILTERS_KEY = \"filters\";\r\nconst JOIN_OPERATOR_KEY = \"joinOperator\";\r\nconst ARRAY_SEPARATOR = \",\";\r\nconst DEBOUNCE_MS = 300;\r\nconst THROTTLE_MS = 50;\r\n\r\ninterface UseDataTableProps<TData>\r\n  extends Omit<\r\n      TableOptions<TData>,\r\n      | \"state\"\r\n      | \"pageCount\"\r\n      | \"getCoreRowModel\"\r\n      | \"manualFiltering\"\r\n      | \"manualPagination\"\r\n      | \"manualSorting\"\r\n    >,\r\n    Required<Pick<TableOptions<TData>, \"pageCount\">> {\r\n  initialState?: Omit<Partial<TableState>, \"sorting\"> & {\r\n    sorting?: ExtendedColumnSort<TData>[];\r\n  };\r\n  queryKeys?: Partial<QueryKeys>;\r\n  history?: \"push\" | \"replace\";\r\n  debounceMs?: number;\r\n  throttleMs?: number;\r\n  clearOnDefault?: boolean;\r\n  enableAdvancedFilter?: boolean;\r\n  scroll?: boolean;\r\n  shallow?: boolean;\r\n  startTransition?: React.TransitionStartFunction;\r\n}\r\n\r\nexport function useDataTable<TData>(props: UseDataTableProps<TData>) {\r\n  const {\r\n    columns,\r\n    pageCount = -1,\r\n    initialState,\r\n    queryKeys,\r\n    history = \"replace\",\r\n    debounceMs = DEBOUNCE_MS,\r\n    throttleMs = THROTTLE_MS,\r\n    clearOnDefault = false,\r\n    enableAdvancedFilter = false,\r\n    scroll = false,\r\n    shallow = true,\r\n    startTransition,\r\n    ...tableProps\r\n  } = props;\r\n  const pageKey = queryKeys?.page ?? PAGE_KEY;\r\n  const perPageKey = queryKeys?.perPage ?? PER_PAGE_KEY;\r\n  const sortKey = queryKeys?.sort ?? SORT_KEY;\r\n  const filtersKey = queryKeys?.filters ?? FILTERS_KEY;\r\n  const joinOperatorKey = queryKeys?.joinOperator ?? JOIN_OPERATOR_KEY;\r\n\r\n  const queryStateOptions = React.useMemo<\r\n    Omit<UseQueryStateOptions<string>, \"parse\">\r\n  >(\r\n    () => ({\r\n      history,\r\n      scroll,\r\n      shallow,\r\n      throttleMs,\r\n      debounceMs,\r\n      clearOnDefault,\r\n      startTransition,\r\n    }),\r\n    [\r\n      history,\r\n      scroll,\r\n      shallow,\r\n      throttleMs,\r\n      debounceMs,\r\n      clearOnDefault,\r\n      startTransition,\r\n    ]\r\n  );\r\n\r\n  const [rowSelection, setRowSelection] = React.useState<RowSelectionState>(\r\n    initialState?.rowSelection ?? {}\r\n  );\r\n  const [columnVisibility, setColumnVisibility] =\r\n    React.useState<VisibilityState>(initialState?.columnVisibility ?? {});\r\n\r\n  const [page, setPage] = useQueryState(\r\n    pageKey,\r\n    parseAsInteger.withOptions(queryStateOptions).withDefault(1)\r\n  );\r\n  const [perPage, setPerPage] = useQueryState(\r\n    perPageKey,\r\n    parseAsInteger\r\n      .withOptions(queryStateOptions)\r\n      .withDefault(initialState?.pagination?.pageSize ?? 10)\r\n  );\r\n\r\n  const pagination: PaginationState = React.useMemo(() => {\r\n    return {\r\n      pageIndex: page - 1, // zero-based index -> one-based index\r\n      pageSize: perPage,\r\n    };\r\n  }, [page, perPage]);\r\n\r\n  const onPaginationChange = React.useCallback(\r\n    (updaterOrValue: Updater<PaginationState>) => {\r\n      if (typeof updaterOrValue === \"function\") {\r\n        const newPagination = updaterOrValue(pagination);\r\n        void setPage(newPagination.pageIndex + 1);\r\n        void setPerPage(newPagination.pageSize);\r\n      } else {\r\n        void setPage(updaterOrValue.pageIndex + 1);\r\n        void setPerPage(updaterOrValue.pageSize);\r\n      }\r\n    },\r\n    [pagination, setPage, setPerPage]\r\n  );\r\n\r\n  const columnIds = React.useMemo(() => {\r\n    return new Set(\r\n      columns.map((column) => column.id).filter(Boolean) as string[]\r\n    );\r\n  }, [columns]);\r\n\r\n  const [sorting, setSorting] = useQueryState(\r\n    sortKey,\r\n    getSortingStateParser<TData>(columnIds)\r\n      .withOptions(queryStateOptions)\r\n      .withDefault(initialState?.sorting ?? [])\r\n  );\r\n\r\n  const onSortingChange = React.useCallback(\r\n    (updaterOrValue: Updater<SortingState>) => {\r\n      if (typeof updaterOrValue === \"function\") {\r\n        const newSorting = updaterOrValue(sorting);\r\n        setSorting(newSorting as ExtendedColumnSort<TData>[]);\r\n      } else {\r\n        setSorting(updaterOrValue as ExtendedColumnSort<TData>[]);\r\n      }\r\n    },\r\n    [sorting, setSorting]\r\n  );\r\n\r\n  const filterableColumns = React.useMemo(() => {\r\n    if (enableAdvancedFilter) return [];\r\n\r\n    return columns.filter((column) => column.enableColumnFilter);\r\n  }, [columns, enableAdvancedFilter]);\r\n\r\n  const filterParsers = React.useMemo(() => {\r\n    if (enableAdvancedFilter) return {};\r\n\r\n    return filterableColumns.reduce<\r\n      Record<string, SingleParser<string> | SingleParser<string[]>>\r\n    >((acc, column) => {\r\n      if (column.meta?.options) {\r\n        acc[column.id ?? \"\"] = parseAsArrayOf(\r\n          parseAsString,\r\n          ARRAY_SEPARATOR\r\n        ).withOptions(queryStateOptions);\r\n      } else {\r\n        acc[column.id ?? \"\"] = parseAsString.withOptions(queryStateOptions);\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filterableColumns, queryStateOptions, enableAdvancedFilter]);\r\n\r\n  const [filterValues, setFilterValues] = useQueryStates(filterParsers);\r\n\r\n  const debouncedSetFilterValues = useDebouncedCallback(\r\n    (values: typeof filterValues) => {\r\n      void setPage(1);\r\n      void setFilterValues(values);\r\n    },\r\n    debounceMs\r\n  );\r\n\r\n  const initialColumnFilters: ColumnFiltersState = React.useMemo(() => {\r\n    if (enableAdvancedFilter) return [];\r\n\r\n    return Object.entries(filterValues).reduce<ColumnFiltersState>(\r\n      (filters, [key, value]) => {\r\n        if (value !== null) {\r\n          const processedValue = Array.isArray(value)\r\n            ? value\r\n            : typeof value === \"string\" && /[^a-zA-Z0-9]/.test(value)\r\n            ? value.split(/[^a-zA-Z0-9]+/).filter(Boolean)\r\n            : [value];\r\n\r\n          filters.push({\r\n            id: key,\r\n            value: processedValue,\r\n          });\r\n        }\r\n        return filters;\r\n      },\r\n      []\r\n    );\r\n  }, [filterValues, enableAdvancedFilter]);\r\n\r\n  const [columnFilters, setColumnFilters] =\r\n    React.useState<ColumnFiltersState>(initialColumnFilters);\r\n\r\n  const onColumnFiltersChange = React.useCallback(\r\n    (updaterOrValue: Updater<ColumnFiltersState>) => {\r\n      if (enableAdvancedFilter) return;\r\n\r\n      setColumnFilters((prev) => {\r\n        const next =\r\n          typeof updaterOrValue === \"function\"\r\n            ? updaterOrValue(prev)\r\n            : updaterOrValue;\r\n\r\n        const filterUpdates = next.reduce<\r\n          Record<string, string | string[] | null>\r\n        >((acc, filter) => {\r\n          if (filterableColumns.find((column) => column.id === filter.id)) {\r\n            acc[filter.id] = filter.value as string | string[];\r\n          }\r\n          return acc;\r\n        }, {});\r\n\r\n        for (const prevFilter of prev) {\r\n          if (!next.some((filter) => filter.id === prevFilter.id)) {\r\n            filterUpdates[prevFilter.id] = null;\r\n          }\r\n        }\r\n\r\n        debouncedSetFilterValues(filterUpdates);\r\n        return next;\r\n      });\r\n    },\r\n    [debouncedSetFilterValues, filterableColumns, enableAdvancedFilter]\r\n  );\r\n\r\n  const table = useReactTable({\r\n    ...tableProps,\r\n    columns,\r\n    initialState,\r\n    pageCount,\r\n    state: {\r\n      pagination,\r\n      sorting,\r\n      columnVisibility,\r\n      rowSelection,\r\n      columnFilters,\r\n    },\r\n    defaultColumn: {\r\n      ...tableProps.defaultColumn,\r\n      enableColumnFilter: false,\r\n    },\r\n    enableRowSelection: true,\r\n    onRowSelectionChange: setRowSelection,\r\n    onPaginationChange,\r\n    onSortingChange,\r\n    onColumnFiltersChange,\r\n    onColumnVisibilityChange: setColumnVisibility,\r\n    getCoreRowModel: getCoreRowModel(),\r\n    getFilteredRowModel: getFilteredRowModel(),\r\n    getPaginationRowModel: getPaginationRowModel(),\r\n    getSortedRowModel: getSortedRowModel(),\r\n    getFacetedRowModel: getFacetedRowModel(),\r\n    getFacetedUniqueValues: getFacetedUniqueValues(),\r\n    getFacetedMinMaxValues: getFacetedMinMaxValues(),\r\n    manualPagination: true,\r\n    manualSorting: true,\r\n    manualFiltering: true,\r\n    meta: {\r\n      ...tableProps.meta,\r\n      queryKeys: {\r\n        page: pageKey,\r\n        perPage: perPageKey,\r\n        sort: sortKey,\r\n        filters: filtersKey,\r\n        joinOperator: joinOperatorKey,\r\n      },\r\n    },\r\n  });\r\n\r\n  return { table, shallow, debounceMs, throttleMs };\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-data-table.ts"
    },
    {
      "path": "hooks\\use-debounced-callback.ts",
      "content": "import * as React from \"react\";\r\n\r\nimport { useCallbackRef } from \"@/hooks/use-callback-ref\";\r\n\r\nexport function useDebouncedCallback<T extends (...args: never[]) => unknown>(\r\n  callback: T,\r\n  delay: number,\r\n) {\r\n  const handleCallback = useCallbackRef(callback);\r\n  const debounceTimerRef = React.useRef(0);\r\n  React.useEffect(\r\n    () => () => window.clearTimeout(debounceTimerRef.current),\r\n    [],\r\n  );\r\n\r\n  const setValue = React.useCallback(\r\n    (...args: Parameters<T>) => {\r\n      window.clearTimeout(debounceTimerRef.current);\r\n      debounceTimerRef.current = window.setTimeout(\r\n        () => handleCallback(...args),\r\n        delay,\r\n      );\r\n    },\r\n    [handleCallback, delay],\r\n  );\r\n\r\n  return setValue;\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-debounced-callback.ts"
    },
    {
      "path": "hooks\\use-game-stats.ts",
      "content": "\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { client } from \"@/lib/orpc\";\r\nimport { toast } from \"sonner\";\r\n\r\ntype GameType = \"head-soccer\" | \"rock-paper-scissor\" | \"showdown\";\r\n\r\nexport function useGameStats(gameType: GameType) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const updateStats = useMutation({\r\n    mutationFn: async ({\r\n      playerWon,\r\n      tie = false,\r\n    }: {\r\n      playerWon: boolean;\r\n      tie?: boolean;\r\n    }) => {\r\n      return client.gameStats.update({\r\n        gameType,\r\n        playerWon,\r\n        tie,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate leaderboard queries\r\n      queryClient.invalidateQueries({ queryKey: [\"leaderboard\", gameType] });\r\n      queryClient.invalidateQueries({ queryKey: [\"gameStats\", gameType] });\r\n    },\r\n    onError: (error) => {\r\n      // Only show error if user is logged in (otherwise it's expected)\r\n      if (!error.message.includes(\"Unauthorized\")) {\r\n        toast.error(\"Failed to update stats\", {\r\n          description: error.message,\r\n        });\r\n      }\r\n    },\r\n  });\r\n\r\n  return {\r\n    updateStats: updateStats.mutate,\r\n    isUpdating: updateStats.isPending,\r\n  };\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-game-stats.ts"
    },
    {
      "path": "hooks\\use-mobile.ts",
      "content": "import * as React from \"react\"\r\n\r\nconst MOBILE_BREAKPOINT = 768\r\n\r\nexport function useIsMobile() {\r\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\r\n\r\n  React.useEffect(() => {\r\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\r\n    const onChange = () => {\r\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n    }\r\n    mql.addEventListener(\"change\", onChange)\r\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n    return () => mql.removeEventListener(\"change\", onChange)\r\n  }, [])\r\n\r\n  return !!isMobile\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-mobile.ts"
    },
    {
      "path": "hooks\\use-sound.example.tsx",
      "content": "/**\r\n * Examples of using the useSound hook\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useSound, useSoundManager } from \"@/hooks/use-sound\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useState } from \"react\";\r\n\r\n// Example 1: Simple sound usage\r\nexport function SimpleSoundExample() {\r\n  const [playClick] = useSound(\"/sounds/click.mp3\");\r\n\r\n  return <Button onClick={playClick}>Click Me</Button>;\r\n}\r\n\r\n// Example 2: Sound with options\r\nexport function SoundWithOptionsExample() {\r\n  const [playWin] = useSound(\"/sounds/win.mp3\", {\r\n    volume: 0.5,\r\n    playbackRate: 1.2,\r\n    interrupt: true, // Stop current playback if already playing\r\n  });\r\n\r\n  return <Button onClick={playWin}>Win Sound</Button>;\r\n}\r\n\r\n// Example 3: Sound with controls\r\nexport function SoundWithControlsExample() {\r\n  const [play, { pause, stop, setVolume }] = useSound(\"/sounds/music.mp3\", {\r\n    loop: true,\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex gap-2\">\r\n      <Button onClick={play}>Play</Button>\r\n      <Button onClick={pause}>Pause</Button>\r\n      <Button onClick={stop}>Stop</Button>\r\n      <Button onClick={() => setVolume(0.3)}>Low Volume</Button>\r\n      <Button onClick={() => setVolume(1.0)}>Full Volume</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Example 4: Multiple sounds (like in paagi game)\r\nexport function GameSoundsExample() {\r\n  const [playWin] = useSound(\"/sounds/PaajiWin.mp3\");\r\n  const [playBet] = useSound(\"/sounds/Bet.mp3\");\r\n  const [playLose] = useSound(\"/sounds/PaajiLose.mp3\");\r\n  const [playCashout] = useSound(\"/sounds/PaajiCashOut.mp3\");\r\n\r\n  const handleWin = () => {\r\n    playWin();\r\n    // ... win logic\r\n  };\r\n\r\n  const handleBet = () => {\r\n    playBet();\r\n    // ... bet logic\r\n  };\r\n\r\n  const handleLose = () => {\r\n    playLose();\r\n    // ... lose logic\r\n  };\r\n\r\n  const handleCashout = () => {\r\n    playCashout();\r\n    // ... cashout logic\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex gap-2\">\r\n      <Button onClick={handleBet}>Place Bet</Button>\r\n      <Button onClick={handleWin}>Win</Button>\r\n      <Button onClick={handleLose}>Lose</Button>\r\n      <Button onClick={handleCashout}>Cash Out</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Example 5: Using Sound Manager (alternative approach)\r\nexport function SoundManagerExample() {\r\n  const soundManager = useSoundManager({\r\n    click: \"/sounds/click.mp3\",\r\n    win: \"/sounds/win.mp3\",\r\n    lose: \"/sounds/lose.mp3\",\r\n    cashout: \"/sounds/cashout.mp3\",\r\n  });\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex gap-2\">\r\n        <Button onClick={() => soundManager.play(\"click\")}>Click</Button>\r\n        <Button onClick={() => soundManager.play(\"win\")}>Win</Button>\r\n        <Button onClick={() => soundManager.play(\"lose\")}>Lose</Button>\r\n        <Button onClick={() => soundManager.play(\"cashout\")}>Cash Out</Button>\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <Button onClick={() => soundManager.setGlobalVolume(0.3)}>\r\n          Low Volume\r\n        </Button>\r\n        <Button onClick={() => soundManager.setGlobalVolume(1.0)}>\r\n          Full Volume\r\n        </Button>\r\n        <Button onClick={soundManager.stopAll}>Stop All</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Example 6: Sound with callback\r\nexport function SoundWithCallbackExample() {\r\n  const [playSound] = useSound(\"/sounds/countdown.mp3\", {\r\n    onEnd: () => {\r\n      console.log(\"Sound finished playing!\");\r\n      // Do something after sound ends\r\n    },\r\n  });\r\n\r\n  return <Button onClick={playSound}>Start Countdown</Button>;\r\n}\r\n\r\n// Example 7: Conditional sound (with settings)\r\nexport function ConditionalSoundExample() {\r\n  const [soundEnabled, setSoundEnabled] = useState(true);\r\n  const [playClick] = useSound(\"/sounds/click.mp3\", {\r\n    soundEnabled, // Only play if soundEnabled is true\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex gap-2\">\r\n      <Button onClick={playClick}>Click (with sound)</Button>\r\n      <Button onClick={() => setSoundEnabled(!soundEnabled)}>\r\n        {soundEnabled ? \"Disable\" : \"Enable\"} Sound\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-sound.example.tsx"
    },
    {
      "path": "hooks\\use-sound.ts",
      "content": "\"use client\";\r\n\r\nimport { useRef, useCallback, useEffect, useState } from \"react\";\r\n\r\nexport interface UseSoundOptions {\r\n  volume?: number;\r\n  playbackRate?: number;\r\n  loop?: boolean;\r\n  soundEnabled?: boolean;\r\n  interrupt?: boolean;\r\n  onEnd?: () => void;\r\n}\r\n\r\nexport interface SoundControls {\r\n  play: () => void;\r\n  pause: () => void;\r\n  stop: () => void;\r\n  setVolume: (volume: number) => void;\r\n  setPlaybackRate: (rate: number) => void;\r\n  isPlaying: boolean;\r\n}\r\n\r\n/**\r\n * Custom hook for playing sounds in the application\r\n *\r\n * @param src - The path to the sound file (e.g., \"/sounds/click.mp3\")\r\n * @param options - Optional configuration for the sound\r\n * @returns A tuple with [play function, sound controls object]\r\n *\r\n * @example\r\n * ```tsx\r\n * const [playClick] = useSound(\"/sounds/click.mp3\");\r\n * const [playWin, { pause, stop }] = useSound(\"/sounds/win.mp3\", { volume: 0.5 });\r\n *\r\n * // Simple usage\r\n * <button onClick={playClick}>Click me</button>\r\n *\r\n * // With controls\r\n * <button onClick={playWin}>Play</button>\r\n * <button onClick={pause}>Pause</button>\r\n * <button onClick={stop}>Stop</button>\r\n * ```\r\n */\r\nexport function useSound(\r\n  src: string,\r\n  options: UseSoundOptions = {}\r\n): [() => void, SoundControls] {\r\n  const {\r\n    volume = 1.0,\r\n    playbackRate = 1.0,\r\n    loop = false,\r\n    soundEnabled = true,\r\n    interrupt = false,\r\n    onEnd,\r\n  } = options;\r\n\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  // Initialize audio element\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    const audio = new Audio(src);\r\n    audio.volume = volume;\r\n    audio.playbackRate = playbackRate;\r\n    audio.loop = loop;\r\n\r\n    if (onEnd) {\r\n      audio.addEventListener(\"ended\", onEnd);\r\n    }\r\n\r\n    audioRef.current = audio;\r\n\r\n    return () => {\r\n      if (audioRef.current) {\r\n        audioRef.current.pause();\r\n        audioRef.current.currentTime = 0;\r\n        if (onEnd) {\r\n          audioRef.current.removeEventListener(\"ended\", onEnd);\r\n        }\r\n        audioRef.current = null;\r\n      }\r\n    };\r\n  }, [src, volume, playbackRate, loop, onEnd]);\r\n\r\n  const play = useCallback(() => {\r\n    if (!soundEnabled || !audioRef.current) return;\r\n\r\n    const audio = audioRef.current;\r\n\r\n    // If interrupt is true, stop current playback and restart\r\n    if (interrupt && isPlaying) {\r\n      audio.pause();\r\n      audio.currentTime = 0;\r\n    }\r\n\r\n    // Play the sound\r\n    audio.play().catch((error) => {\r\n      // Handle autoplay policy errors gracefully\r\n      console.warn(\"Error playing sound:\", error);\r\n    });\r\n\r\n    setIsPlaying(true);\r\n\r\n    // Update isPlaying when sound ends\r\n    const handleEnded = () => {\r\n      setIsPlaying(false);\r\n    };\r\n\r\n    audio.addEventListener(\"ended\", handleEnded, { once: true });\r\n  }, [soundEnabled, interrupt, isPlaying]);\r\n\r\n  const pause = useCallback(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n    }\r\n  }, []);\r\n\r\n  const stop = useCallback(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.pause();\r\n      audioRef.current.currentTime = 0;\r\n      setIsPlaying(false);\r\n    }\r\n  }, []);\r\n\r\n  const setVolume = useCallback((newVolume: number) => {\r\n    if (audioRef.current) {\r\n      audioRef.current.volume = Math.max(0, Math.min(1, newVolume));\r\n    }\r\n  }, []);\r\n\r\n  const setPlaybackRate = useCallback((rate: number) => {\r\n    if (audioRef.current) {\r\n      audioRef.current.playbackRate = Math.max(0.5, Math.min(4, rate));\r\n    }\r\n  }, []);\r\n\r\n  const controls: SoundControls = {\r\n    play,\r\n    pause,\r\n    stop,\r\n    setVolume,\r\n    setPlaybackRate,\r\n    isPlaying,\r\n  };\r\n\r\n  return [play, controls];\r\n}\r\n\r\n/**\r\n * Hook for managing multiple sounds with global volume control\r\n *\r\n * @example\r\n * ```tsx\r\n * const soundManager = useSoundManager({\r\n *   click: \"/sounds/click.mp3\",\r\n *   win: \"/sounds/win.mp3\",\r\n *   lose: \"/sounds/lose.mp3\",\r\n * });\r\n *\r\n * soundManager.play(\"click\");\r\n * soundManager.setGlobalVolume(0.5);\r\n * soundManager.stopAll();\r\n * ```\r\n */\r\nexport function useSoundManager<T extends Record<string, string>>(\r\n  sounds: T,\r\n  defaultVolume = 1.0\r\n) {\r\n  const soundsRef = useRef<Record<string, HTMLAudioElement>>({});\r\n  const volumeRef = useRef(defaultVolume);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    // Initialize all sounds\r\n    Object.entries(sounds).forEach(([key, src]) => {\r\n      const audio = new Audio(src);\r\n      audio.volume = volumeRef.current;\r\n      soundsRef.current[key] = audio;\r\n    });\r\n\r\n    return () => {\r\n      // Cleanup all sounds\r\n      Object.values(soundsRef.current).forEach((audio) => {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      });\r\n      soundsRef.current = {};\r\n    };\r\n  }, [sounds]);\r\n\r\n  const play = useCallback((name: keyof T) => {\r\n    const audio = soundsRef.current[name as string];\r\n    if (audio) {\r\n      audio.currentTime = 0;\r\n      audio.play().catch((error) => {\r\n        console.warn(`Error playing sound \"${String(name)}\":`, error);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const stop = useCallback((name: keyof T) => {\r\n    const audio = soundsRef.current[name as string];\r\n    if (audio) {\r\n      audio.pause();\r\n      audio.currentTime = 0;\r\n    }\r\n  }, []);\r\n\r\n  const stopAll = useCallback(() => {\r\n    Object.values(soundsRef.current).forEach((audio) => {\r\n      audio.pause();\r\n      audio.currentTime = 0;\r\n    });\r\n  }, []);\r\n\r\n  const setGlobalVolume = useCallback((volume: number) => {\r\n    const clampedVolume = Math.max(0, Math.min(1, volume));\r\n    volumeRef.current = clampedVolume;\r\n    Object.values(soundsRef.current).forEach((audio) => {\r\n      audio.volume = clampedVolume;\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    play,\r\n    stop,\r\n    stopAll,\r\n    setGlobalVolume,\r\n  };\r\n}\r\n",
      "type": "registry:lib",
      "target": "hooks\\use-sound.ts"
    },
    {
      "path": "lib\\auth-client.ts",
      "content": "import { createAuthClient } from \"better-auth/react\";\r\nimport { adminClient, emailOTPClient } from \"better-auth/client/plugins\";\r\n\r\nexport const authClient = createAuthClient({\r\n  baseURL: typeof window !== \"undefined\" ? window.location.origin : \"\",\r\n  plugins: [adminClient(), emailOTPClient()],\r\n});\r\n\r\nexport const { signIn, signOut, signUp, useSession } = authClient;\r\n",
      "type": "registry:lib",
      "target": "lib\\auth-client.ts"
    },
    {
      "path": "lib\\auth.ts",
      "content": "import { betterAuth } from \"better-auth\";\r\nimport { admin, emailOTP } from \"better-auth/plugins\";\r\nimport { nextCookies } from \"better-auth/next-js\";\r\nimport { mongodbAdapter } from \"better-auth/adapters/mongodb\";\r\nimport client from \"@/lib/mongodb\";\r\nimport { env } from \"@/env\";\r\nimport { sendEmail } from \"@/lib/email/mailer\";\r\nimport { emailTemplates } from \"@/lib/email/templates\";\r\n\r\nconst db = client.db(env.MONGODB_DB_NAME);\r\n\r\nexport const auth = betterAuth({\r\n  database: mongodbAdapter(db),\r\n  socialProviders: {\r\n    google: {\r\n      clientId: env.GOOGLE_CLIENT_ID,\r\n      clientSecret: env.GOOGLE_CLIENT_SECRET,\r\n      accessType: \"offline\", // Always get refresh token\r\n      prompt: \"select_account consent\", // Always ask to select account\r\n    },\r\n  },\r\n  secret: env.BETTER_AUTH_SECRET,\r\n  baseURL: env.BETTER_AUTH_URL,\r\n  plugins: [\r\n    admin({\r\n      defaultRole: \"user\",\r\n      adminRoles: [\"admin\", \"super-admin\"],\r\n      impersonationSessionDuration: 3600, // 1 hour\r\n      defaultBanReason: \"Violated terms of service\",\r\n      bannedUserMessage:\r\n        \"Your account has been suspended. Please contact support.\",\r\n    }),\r\n    emailOTP({\r\n      async sendVerificationOTP({ email, otp, type }) {\r\n        // In development, log to console for easy testing\r\n        if (env.NODE_ENV === \"development\") {\r\n          console.log(`[Email OTP] Sending ${type} OTP to ${email}: ${otp}`);\r\n        }\r\n\r\n        // Generate email content based on type\r\n        let subject: string;\r\n        let html: string;\r\n\r\n        switch (type) {\r\n          case \"sign-in\":\r\n            subject = \"ðŸ” Sign In to Game Aggregator\";\r\n            html = emailTemplates.signInOTP(otp, 5);\r\n            break;\r\n          case \"email-verification\":\r\n            subject = \"âœ‰ï¸ Verify Your Email - Game Aggregator\";\r\n            html = emailTemplates.emailVerification(otp, 5);\r\n            break;\r\n          case \"forget-password\":\r\n            subject = \"ðŸ”‘ Reset Your Password - Game Aggregator\";\r\n            html = emailTemplates.passwordReset(otp, 5);\r\n            break;\r\n          default:\r\n            subject = \"Verification Code - Game Aggregator\";\r\n            html = emailTemplates.signInOTP(otp, 5);\r\n        }\r\n\r\n        // Send email using nodemailer\r\n        try {\r\n          await sendEmail({\r\n            to: email,\r\n            subject,\r\n            html,\r\n          });\r\n          console.log(`âœ… ${type} OTP sent to ${email}`);\r\n        } catch (error) {\r\n          console.error(`âŒ Failed to send ${type} OTP to ${email}:`, error);\r\n          throw error;\r\n        }\r\n      },\r\n      otpLength: 6,\r\n      expiresIn: 300, // 5 minutes\r\n      sendVerificationOnSignUp: true,\r\n      allowedAttempts: 3,\r\n    }),\r\n    nextCookies(), // Must be last plugin\r\n  ],\r\n});\r\n\r\nexport type Session = typeof auth.$Infer.Session;\r\n",
      "type": "registry:lib",
      "target": "lib\\auth.ts"
    },
    {
      "path": "lib\\data-table.ts",
      "content": "import type { Column } from \"@tanstack/react-table\";\r\nimport { dataTableConfig } from \"@/config/data-table\";\r\nimport type {\r\n  ExtendedColumnFilter,\r\n  FilterOperator,\r\n  FilterVariant,\r\n} from \"@/types/data-table\";\r\n\r\nexport function getCommonPinningStyles<TData>({\r\n  column,\r\n  withBorder = false,\r\n}: {\r\n  column: Column<TData>;\r\n  withBorder?: boolean;\r\n}): React.CSSProperties {\r\n  const isPinned = column.getIsPinned();\r\n  const isLastLeftPinnedColumn =\r\n    isPinned === \"left\" && column.getIsLastColumn(\"left\");\r\n  const isFirstRightPinnedColumn =\r\n    isPinned === \"right\" && column.getIsFirstColumn(\"right\");\r\n\r\n  return {\r\n    boxShadow: withBorder\r\n      ? isLastLeftPinnedColumn\r\n        ? \"-4px 0 4px -4px var(--border) inset\"\r\n        : isFirstRightPinnedColumn\r\n        ? \"4px 0 4px -4px var(--border) inset\"\r\n        : undefined\r\n      : undefined,\r\n    left: isPinned === \"left\" ? `${column.getStart(\"left\")}px` : undefined,\r\n    right: isPinned === \"right\" ? `${column.getAfter(\"right\")}px` : undefined,\r\n    opacity: isPinned ? 0.97 : 1,\r\n    position: isPinned ? \"sticky\" : \"relative\",\r\n    background: isPinned ? \"var(--background)\" : \"var(--background)\",\r\n    width: column.getSize(),\r\n    zIndex: isPinned ? 1 : undefined,\r\n  };\r\n}\r\n\r\nexport function getFilterOperators(filterVariant: FilterVariant) {\r\n  const operatorMap: Record<\r\n    FilterVariant,\r\n    { label: string; value: FilterOperator }[]\r\n  > = {\r\n    text: dataTableConfig.textOperators,\r\n    number: dataTableConfig.numericOperators,\r\n    range: dataTableConfig.numericOperators,\r\n    date: dataTableConfig.dateOperators,\r\n    dateRange: dataTableConfig.dateOperators,\r\n    boolean: dataTableConfig.booleanOperators,\r\n    select: dataTableConfig.selectOperators,\r\n    multiSelect: dataTableConfig.multiSelectOperators,\r\n  };\r\n\r\n  return operatorMap[filterVariant] ?? dataTableConfig.textOperators;\r\n}\r\n\r\nexport function getDefaultFilterOperator(filterVariant: FilterVariant) {\r\n  const operators = getFilterOperators(filterVariant);\r\n\r\n  return operators[0]?.value ?? (filterVariant === \"text\" ? \"iLike\" : \"eq\");\r\n}\r\n\r\nexport function getValidFilters<TData>(\r\n  filters: ExtendedColumnFilter<TData>[]\r\n): ExtendedColumnFilter<TData>[] {\r\n  return filters.filter(\r\n    (filter) =>\r\n      filter.operator === \"isEmpty\" ||\r\n      filter.operator === \"isNotEmpty\" ||\r\n      (Array.isArray(filter.value)\r\n        ? filter.value.length > 0\r\n        : filter.value !== \"\" &&\r\n          filter.value !== null &&\r\n          filter.value !== undefined)\r\n  );\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib\\data-table.ts"
    },
    {
      "path": "lib\\email\\mailer.ts",
      "content": "import nodemailer from \"nodemailer\";\r\nimport { env } from \"@/env\";\r\n\r\n// Create reusable transporter\r\nexport const transporter = nodemailer.createTransport({\r\n  host: env.SMTP_HOST,\r\n  port: env.SMTP_PORT,\r\n  secure: env.SMTP_SECURE, // true for 465, false for other ports\r\n  auth: {\r\n    user: env.SMTP_USER,\r\n    pass: env.SMTP_PASSWORD,\r\n  },\r\n});\r\n\r\n// Verify connection configuration\r\nexport async function verifyEmailConnection() {\r\n  try {\r\n    await transporter.verify();\r\n    console.log(\"âœ… Email server connection verified\");\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"âŒ Email server connection failed:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Send email function\r\nexport async function sendEmail({\r\n  to,\r\n  subject,\r\n  html,\r\n  text,\r\n}: {\r\n  to: string;\r\n  subject: string;\r\n  html: string;\r\n  text?: string;\r\n}) {\r\n  try {\r\n    const info = await transporter.sendMail({\r\n      from: `\"${env.SMTP_FROM_NAME}\" <${env.SMTP_FROM_EMAIL}>`,\r\n      to,\r\n      subject,\r\n      html,\r\n      text: text || html.replace(/<[^>]*>/g, \"\"), // Strip HTML tags for text version\r\n    });\r\n\r\n    console.log(`âœ… Email sent: ${info.messageId}`);\r\n    return { success: true, messageId: info.messageId };\r\n  } catch (error) {\r\n    console.error(\"âŒ Email sending failed:\", error);\r\n    return { success: false, error };\r\n  }\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib\\email\\mailer.ts"
    },
    {
      "path": "lib\\email\\templates.ts",
      "content": "import { env } from \"@/env\";\r\n\r\n// Base email template wrapper\r\nfunction emailWrapper(content: string, preheader?: string) {\r\n  return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <meta name=\"color-scheme\" content=\"light dark\">\r\n  <meta name=\"supported-color-schemes\" content=\"light dark\">\r\n  ${preheader ? `<meta name=\"description\" content=\"${preheader}\">` : \"\"}\r\n  <title>Game Aggregator</title>\r\n  <style>\r\n    body {\r\n      margin: 0;\r\n      padding: 0;\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\r\n      background-color: #0a0a0a;\r\n      color: #ffffff;\r\n    }\r\n    .container {\r\n      max-width: 600px;\r\n      margin: 0 auto;\r\n      padding: 20px;\r\n    }\r\n    .header {\r\n      text-align: center;\r\n      padding: 40px 0 20px;\r\n    }\r\n    .logo {\r\n      font-size: 28px;\r\n      font-weight: bold;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n      background-clip: text;\r\n    }\r\n    .content {\r\n      background-color: #18181b;\r\n      border-radius: 12px;\r\n      padding: 40px;\r\n      margin: 20px 0;\r\n    }\r\n    .otp-code {\r\n      font-size: 42px;\r\n      font-weight: bold;\r\n      text-align: center;\r\n      letter-spacing: 8px;\r\n      padding: 30px;\r\n      margin: 30px 0;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      border-radius: 8px;\r\n      color: #ffffff;\r\n    }\r\n    .button {\r\n      display: inline-block;\r\n      padding: 14px 32px;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: #ffffff;\r\n      text-decoration: none;\r\n      border-radius: 8px;\r\n      font-weight: 600;\r\n      margin: 20px 0;\r\n    }\r\n    .footer {\r\n      text-align: center;\r\n      padding: 20px;\r\n      color: #71717a;\r\n      font-size: 14px;\r\n    }\r\n    .warning {\r\n      background-color: #27272a;\r\n      border-left: 4px solid #f59e0b;\r\n      padding: 16px;\r\n      margin: 20px 0;\r\n      border-radius: 4px;\r\n    }\r\n    h1 {\r\n      font-size: 24px;\r\n      margin: 0 0 16px;\r\n      color: #ffffff;\r\n    }\r\n    p {\r\n      font-size: 16px;\r\n      line-height: 1.6;\r\n      color: #a1a1aa;\r\n      margin: 12px 0;\r\n    }\r\n    .highlight {\r\n      color: #ffffff;\r\n      font-weight: 600;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <div class=\"logo\">ðŸŽ® Game Aggregator</div>\r\n    </div>\r\n    ${content}\r\n    <div class=\"footer\">\r\n      <p>This email was sent from Game Aggregator</p>\r\n      <p>If you didn't request this, please ignore this email.</p>\r\n      <p>&copy; ${new Date().getFullYear()} Game Aggregator. All rights reserved.</p>\r\n    </div>\r\n  </div>\r\n</body>\r\n</html>\r\n  `.trim();\r\n}\r\n\r\n// OTP Sign-In Email\r\nexport function signInOTPTemplate(otp: string, expiresInMinutes: number = 5) {\r\n  const content = `\r\n    <div class=\"content\">\r\n      <h1>ðŸ” Sign In to Your Account</h1>\r\n      <p>Hello!</p>\r\n      <p>You requested a one-time password to sign in to your Game Aggregator account.</p>\r\n      <p class=\"highlight\">Your verification code is:</p>\r\n      <div class=\"otp-code\">${otp}</div>\r\n      <div class=\"warning\">\r\n        <p><strong>â° This code expires in ${expiresInMinutes} minutes.</strong></p>\r\n        <p>For security reasons, do not share this code with anyone.</p>\r\n      </div>\r\n      <p>If you didn't request this code, you can safely ignore this email.</p>\r\n    </div>\r\n  `;\r\n\r\n  return emailWrapper(content, `Your sign-in code: ${otp}`);\r\n}\r\n\r\n// Email Verification Email\r\nexport function emailVerificationTemplate(otp: string, expiresInMinutes: number = 5) {\r\n  const content = `\r\n    <div class=\"content\">\r\n      <h1>âœ‰ï¸ Verify Your Email Address</h1>\r\n      <p>Welcome to Game Aggregator!</p>\r\n      <p>To complete your registration and start playing, please verify your email address.</p>\r\n      <p class=\"highlight\">Your verification code is:</p>\r\n      <div class=\"otp-code\">${otp}</div>\r\n      <div class=\"warning\">\r\n        <p><strong>â° This code expires in ${expiresInMinutes} minutes.</strong></p>\r\n        <p>Enter this code in the verification page to activate your account.</p>\r\n      </div>\r\n      <p>If you didn't create an account, you can safely ignore this email.</p>\r\n    </div>\r\n  `;\r\n\r\n  return emailWrapper(content, `Verify your email: ${otp}`);\r\n}\r\n\r\n// Password Reset Email\r\nexport function passwordResetTemplate(otp: string, expiresInMinutes: number = 5) {\r\n  const content = `\r\n    <div class=\"content\">\r\n      <h1>ðŸ”‘ Reset Your Password</h1>\r\n      <p>Hello!</p>\r\n      <p>You requested to reset your password for your Game Aggregator account.</p>\r\n      <p class=\"highlight\">Your password reset code is:</p>\r\n      <div class=\"otp-code\">${otp}</div>\r\n      <div class=\"warning\">\r\n        <p><strong>â° This code expires in ${expiresInMinutes} minutes.</strong></p>\r\n        <p>If you didn't request a password reset, please ignore this email or contact support if you have concerns.</p>\r\n      </div>\r\n      <p>After entering this code, you'll be able to set a new password for your account.</p>\r\n    </div>\r\n  `;\r\n\r\n  return emailWrapper(content, `Reset your password: ${otp}`);\r\n}\r\n\r\n// Welcome Email (after successful signup)\r\nexport function welcomeEmailTemplate(name: string) {\r\n  const content = `\r\n    <div class=\"content\">\r\n      <h1>ðŸŽ‰ Welcome to Game Aggregator!</h1>\r\n      <p>Hi ${name},</p>\r\n      <p>Thank you for joining Game Aggregator! We're excited to have you as part of our gaming community.</p>\r\n      <p class=\"highlight\">Here's what you can do now:</p>\r\n      <ul style=\"color: #a1a1aa; line-height: 1.8;\">\r\n        <li>Play <strong>Rock Paper Scissors</strong> and test your luck</li>\r\n        <li>Challenge the <strong>Quick Draw Showdown</strong> with Algorand staking</li>\r\n        <li>Manage your profile in the dashboard</li>\r\n        <li>Compete with other players</li>\r\n      </ul>\r\n      <div style=\"text-align: center;\">\r\n        <a href=\"${env.BETTER_AUTH_URL}/dashboard\" class=\"button\">Go to Dashboard</a>\r\n      </div>\r\n      <p>If you have any questions, feel free to reach out to our support team.</p>\r\n      <p>Happy gaming! ðŸŽ®</p>\r\n    </div>\r\n  `;\r\n\r\n  return emailWrapper(content, \"Welcome to Game Aggregator!\");\r\n}\r\n\r\n// Account Security Alert\r\nexport function securityAlertTemplate(action: string, ipAddress?: string, userAgent?: string) {\r\n  const content = `\r\n    <div class=\"content\">\r\n      <h1>ðŸ›¡ï¸ Security Alert</h1>\r\n      <p>We detected a security-related action on your Game Aggregator account:</p>\r\n      <div class=\"warning\">\r\n        <p><strong>Action:</strong> ${action}</p>\r\n        ${ipAddress ? `<p><strong>IP Address:</strong> ${ipAddress}</p>` : \"\"}\r\n        ${userAgent ? `<p><strong>Device:</strong> ${userAgent}</p>` : \"\"}\r\n        <p><strong>Time:</strong> ${new Date().toLocaleString()}</p>\r\n      </div>\r\n      <p>If this was you, no action is needed. If you don't recognize this activity, please:</p>\r\n      <ol style=\"color: #a1a1aa; line-height: 1.8;\">\r\n        <li>Change your password immediately</li>\r\n        <li>Review your recent account activity</li>\r\n        <li>Contact our support team</li>\r\n      </ol>\r\n      <div style=\"text-align: center;\">\r\n        <a href=\"${env.BETTER_AUTH_URL}/dashboard\" class=\"button\">Review Account</a>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  return emailWrapper(content, `Security alert: ${action}`);\r\n}\r\n\r\n// Export all templates\r\nexport const emailTemplates = {\r\n  signInOTP: signInOTPTemplate,\r\n  emailVerification: emailVerificationTemplate,\r\n  passwordReset: passwordResetTemplate,\r\n  welcome: welcomeEmailTemplate,\r\n  securityAlert: securityAlertTemplate,\r\n};\r\n",
      "type": "registry:lib",
      "target": "lib\\email\\templates.ts"
    },
    {
      "path": "lib\\format.ts",
      "content": "export function formatDate(\r\n  date: Date | string | number | undefined,\r\n  opts: Intl.DateTimeFormatOptions = {},\r\n) {\r\n  if (!date) return \"\";\r\n\r\n  try {\r\n    return new Intl.DateTimeFormat(\"en-US\", {\r\n      month: opts.month ?? \"long\",\r\n      day: opts.day ?? \"numeric\",\r\n      year: opts.year ?? \"numeric\",\r\n      ...opts,\r\n    }).format(new Date(date));\r\n  } catch (_err) {\r\n    return \"\";\r\n  }\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib\\format.ts"
    },
    {
      "path": "lib\\mongodb.ts",
      "content": "// This approach is taken from https://github.com/vercel/next.js/tree/canary/examples/with-mongodb\r\nimport { MongoClient, ServerApiVersion } from \"mongodb\";\r\nimport { env } from \"@/env\";\r\n\r\nconst uri = env.MONGODB_URI;\r\nconst options = {\r\n  serverApi: {\r\n    version: ServerApiVersion.v1,\r\n    strict: true,\r\n    deprecationErrors: true,\r\n  },\r\n};\r\n\r\nlet client: MongoClient;\r\n\r\nif (env.NODE_ENV === \"development\") {\r\n  // In development mode, use a global variable so that the value\r\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\r\n  const globalWithMongo = global as typeof globalThis & {\r\n    _mongoClient?: MongoClient;\r\n  };\r\n\r\n  if (!globalWithMongo._mongoClient) {\r\n    globalWithMongo._mongoClient = new MongoClient(uri, options);\r\n  }\r\n  client = globalWithMongo._mongoClient;\r\n} else {\r\n  // In production mode, it's best to not use a global variable.\r\n  client = new MongoClient(uri, options);\r\n}\r\n\r\n// Export a module-scoped MongoClient. By doing this in a\r\n// separate module, the client can be shared across functions.\r\nexport default client;\r\n",
      "type": "registry:lib",
      "target": "lib\\mongodb.ts"
    },
    {
      "path": "lib\\orpc.server.ts",
      "content": "import \"server-only\";\r\n\r\nimport { headers } from \"next/headers\";\r\nimport { createRouterClient } from \"@orpc/server\";\r\nimport { router } from \"@/lib/router\";\r\n\r\nglobalThis.$client = createRouterClient(router, {\r\n  /**\r\n   * Provide initial context if needed.\r\n   *\r\n   * Because this client instance is shared across all requests,\r\n   * only include context that's safe to reuse globally.\r\n   * For per-request context, use middleware context or pass a function as the initial context.\r\n   */\r\n  context: async () => ({\r\n    headers: await headers(), // provide headers if initial context required\r\n  }),\r\n});\r\n",
      "type": "registry:lib",
      "target": "lib\\orpc.server.ts"
    },
    {
      "path": "lib\\orpc.ts",
      "content": "import type { RouterClient } from \"@orpc/server\";\r\nimport { RPCLink } from \"@orpc/client/fetch\";\r\nimport { createORPCClient } from \"@orpc/client\";\r\nimport type { Router } from \"@/lib/router\";\r\n\r\ndeclare global {\r\n  var $client: RouterClient<Router> | undefined;\r\n}\r\n\r\nconst link = new RPCLink({\r\n  url: () => {\r\n    if (typeof window === \"undefined\") {\r\n      throw new Error(\"RPCLink is not allowed on the server side.\");\r\n    }\r\n\r\n    return `${window.location.origin}/rpc`;\r\n  },\r\n});\r\n\r\n/**\r\n * Fallback to client-side client if server-side client is not available.\r\n */\r\nexport const client: RouterClient<Router> =\r\n  globalThis.$client ?? createORPCClient(link);\r\n",
      "type": "registry:lib",
      "target": "lib\\orpc.ts"
    },
    {
      "path": "lib\\parsers.ts",
      "content": "import { createParser } from \"nuqs/server\";\r\nimport { z } from \"zod\";\r\n\r\nimport { dataTableConfig } from \"@/config/data-table\";\r\n\r\nimport type {\r\n  ExtendedColumnFilter,\r\n  ExtendedColumnSort,\r\n} from \"@/types/data-table\";\r\n\r\nconst sortingItemSchema = z.object({\r\n  id: z.string(),\r\n  desc: z.boolean(),\r\n});\r\n\r\nexport const getSortingStateParser = <TData>(\r\n  columnIds?: string[] | Set<string>\r\n) => {\r\n  const validKeys = columnIds\r\n    ? columnIds instanceof Set\r\n      ? columnIds\r\n      : new Set(columnIds)\r\n    : null;\r\n\r\n  return createParser({\r\n    parse: (value) => {\r\n      try {\r\n        const parsed = JSON.parse(value);\r\n        const result = z.array(sortingItemSchema).safeParse(parsed);\r\n\r\n        if (!result.success) return null;\r\n\r\n        if (validKeys && result.data.some((item) => !validKeys.has(item.id))) {\r\n          return null;\r\n        }\r\n\r\n        return result.data as ExtendedColumnSort<TData>[];\r\n      } catch {\r\n        return null;\r\n      }\r\n    },\r\n    serialize: (value) => JSON.stringify(value),\r\n    eq: (a, b) =>\r\n      a.length === b.length &&\r\n      a.every(\r\n        (item, index) =>\r\n          item.id === b[index]?.id && item.desc === b[index]?.desc\r\n      ),\r\n  });\r\n};\r\n\r\nconst filterItemSchema = z.object({\r\n  id: z.string(),\r\n  value: z.union([z.string(), z.array(z.string())]),\r\n  variant: z.enum(dataTableConfig.filterVariants),\r\n  operator: z.enum(dataTableConfig.operators),\r\n  filterId: z.string(),\r\n});\r\n\r\nexport type FilterItemSchema = z.infer<typeof filterItemSchema>;\r\n\r\nexport const getFiltersStateParser = <TData>(\r\n  columnIds?: string[] | Set<string>\r\n) => {\r\n  const validKeys = columnIds\r\n    ? columnIds instanceof Set\r\n      ? columnIds\r\n      : new Set(columnIds)\r\n    : null;\r\n\r\n  return createParser({\r\n    parse: (value) => {\r\n      try {\r\n        const parsed = JSON.parse(value);\r\n        const result = z.array(filterItemSchema).safeParse(parsed);\r\n\r\n        if (!result.success) return null;\r\n\r\n        if (validKeys && result.data.some((item) => !validKeys.has(item.id))) {\r\n          return null;\r\n        }\r\n\r\n        return result.data as ExtendedColumnFilter<TData>[];\r\n      } catch {\r\n        return null;\r\n      }\r\n    },\r\n    serialize: (value) => JSON.stringify(value),\r\n    eq: (a, b) =>\r\n      a.length === b.length &&\r\n      a.every(\r\n        (filter, index) =>\r\n          filter.id === b[index]?.id &&\r\n          filter.value === b[index]?.value &&\r\n          filter.variant === b[index]?.variant &&\r\n          filter.operator === b[index]?.operator\r\n      ),\r\n  });\r\n};\r\n",
      "type": "registry:lib",
      "target": "lib\\parsers.ts"
    },
    {
      "path": "lib\\router.ts",
      "content": "import { os } from \"@orpc/server\";\r\nimport { z } from \"zod\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { headers } from \"next/headers\";\r\nimport clientPromise from \"@/lib/mongodb\";\r\nimport { env } from \"@/env\";\r\nimport { generateObject } from \"ai\";\r\nimport { aiModel } from \"@/ai/config\";\r\n\r\n// Example procedure - replace with your actual procedures\r\nconst hello = os\r\n  .input(\r\n    z.object({\r\n      name: z.string(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      message: z.string(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/hello\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    return {\r\n      message: `Hello, ${input.name}!`,\r\n    };\r\n  });\r\n\r\n// Admin: Get all users with filtering, sorting, and pagination\r\nconst getUsers = os\r\n  .input(\r\n    z.object({\r\n      page: z.number().int().positive().optional().default(1),\r\n      perPage: z.number().int().positive().optional().default(10),\r\n      sort: z.string().optional(),\r\n      name: z.string().optional(),\r\n      email: z.string().optional(),\r\n      role: z.string().optional(),\r\n      banned: z.union([z.string(), z.array(z.string())]).optional(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      users: z.array(\r\n        z.object({\r\n          id: z.string(),\r\n          name: z.string().nullable(),\r\n          email: z.string(),\r\n          role: z.string(),\r\n          banned: z.boolean(),\r\n          banReason: z.string().nullable().optional(),\r\n          banExpires: z.coerce.date().nullable().optional(),\r\n          createdAt: z.coerce.date().nullable().optional(),\r\n        })\r\n      ),\r\n      total: z.number(),\r\n      pageCount: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/admin/users\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    // Check if user is authenticated and is an admin\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    const isAdmin =\r\n      session.user.role === \"admin\" || session.user.role === \"super-admin\";\r\n    if (!isAdmin) {\r\n      throw new Error(\"Forbidden: Admin access required\");\r\n    }\r\n\r\n    // Fetch users from MongoDB with filters\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const usersCollection = db.collection(\"user\");\r\n\r\n    // Build MongoDB filter\r\n    const filter: Record<string, unknown> = {};\r\n\r\n    if (input.name) {\r\n      filter.name = { $regex: input.name, $options: \"i\" };\r\n    }\r\n\r\n    if (input.email) {\r\n      filter.email = { $regex: input.email, $options: \"i\" };\r\n    }\r\n\r\n    if (input.role) {\r\n      filter.role = input.role;\r\n    }\r\n\r\n    if (input.banned) {\r\n      // Handle both string and array values\r\n      const bannedValues = Array.isArray(input.banned)\r\n        ? input.banned\r\n        : [input.banned];\r\n      if (bannedValues.length === 1) {\r\n        // Single value - exact match\r\n        filter.banned = bannedValues[0] === \"true\";\r\n      } else if (bannedValues.length > 1) {\r\n        // Multiple values - match any\r\n        filter.banned = {\r\n          $in: bannedValues.map((v) => v === \"true\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    // Build sort\r\n    const sort: Record<string, 1 | -1> = {};\r\n    if (input.sort) {\r\n      // Format: \"createdAt.desc\" or \"name.asc\"\r\n      const [field, direction] = input.sort.split(\".\");\r\n      if (field) {\r\n        sort[field] = direction === \"asc\" ? 1 : -1;\r\n      }\r\n    } else {\r\n      sort.createdAt = -1; // Default sort\r\n    }\r\n\r\n    // Get total count for pagination\r\n    const total = await usersCollection.countDocuments(filter);\r\n\r\n    // Calculate pagination\r\n    const skip = (input.page - 1) * input.perPage;\r\n    const pageCount = Math.ceil(total / input.perPage);\r\n\r\n    // Fetch users\r\n    const users = await usersCollection\r\n      .find(filter)\r\n      .sort(sort)\r\n      .skip(skip)\r\n      .limit(input.perPage)\r\n      .toArray();\r\n\r\n    return {\r\n      users: users.map((user) => ({\r\n        id: user.id || user._id?.toString() || \"\",\r\n        name: user.name ?? null,\r\n        email: user.email ?? \"\",\r\n        role: user.role ?? \"user\",\r\n        banned: user.banned ?? false,\r\n        banReason: user.banReason ?? null,\r\n        banExpires: user.banExpires ?? null,\r\n        createdAt: user.createdAt ?? null,\r\n      })),\r\n      total,\r\n      pageCount,\r\n    };\r\n  });\r\n\r\n// Game Stats: Update or create user game stats\r\nconst updateGameStats = os\r\n  .input(\r\n    z.object({\r\n      gameType: z.enum([\"head-soccer\", \"rock-paper-scissor\", \"showdown\"]),\r\n      playerWon: z.boolean(),\r\n      tie: z.boolean().optional(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      success: z.boolean(),\r\n      stats: z.object({\r\n        playerWins: z.number(),\r\n        aiWins: z.number(),\r\n        ties: z.number(),\r\n        totalPlays: z.number(),\r\n      }),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"POST\",\r\n    path: \"/game-stats/update\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized: Must be logged in to track stats\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const statsCollection = db.collection(\"gameStats\");\r\n\r\n    const now = new Date();\r\n    const userId = session.user.id;\r\n\r\n    // Find existing stats\r\n    const existingStats = await statsCollection.findOne({\r\n      userId,\r\n      gameType: input.gameType,\r\n    });\r\n\r\n    let updatedStats;\r\n\r\n    if (existingStats) {\r\n      // Update existing stats\r\n      const update = {\r\n        $inc: {\r\n          totalPlays: 1,\r\n          ...(input.playerWon ? { playerWins: 1 } : {}),\r\n          ...(!input.playerWon && !input.tie ? { aiWins: 1 } : {}),\r\n          ...(input.tie ? { ties: 1 } : {}),\r\n        },\r\n        $set: {\r\n          lastPlayedAt: now,\r\n          updatedAt: now,\r\n        },\r\n      };\r\n\r\n      await statsCollection.updateOne(\r\n        { userId, gameType: input.gameType },\r\n        update\r\n      );\r\n\r\n      updatedStats = {\r\n        playerWins: existingStats.playerWins + (input.playerWon ? 1 : 0),\r\n        aiWins: existingStats.aiWins + (!input.playerWon && !input.tie ? 1 : 0),\r\n        ties: (existingStats.ties || 0) + (input.tie ? 1 : 0),\r\n        totalPlays: existingStats.totalPlays + 1,\r\n      };\r\n    } else {\r\n      // Create new stats\r\n      const newStats = {\r\n        userId,\r\n        gameType: input.gameType,\r\n        playerWins: input.playerWon ? 1 : 0,\r\n        aiWins: !input.playerWon && !input.tie ? 1 : 0,\r\n        ties: input.tie ? 1 : 0,\r\n        totalPlays: 1,\r\n        lastPlayedAt: now,\r\n        createdAt: now,\r\n        updatedAt: now,\r\n      };\r\n\r\n      await statsCollection.insertOne(newStats);\r\n      updatedStats = {\r\n        playerWins: newStats.playerWins,\r\n        aiWins: newStats.aiWins,\r\n        ties: newStats.ties,\r\n        totalPlays: newStats.totalPlays,\r\n      };\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      stats: updatedStats,\r\n    };\r\n  });\r\n\r\n// Game Stats: Get user's stats for a specific game\r\nconst getUserGameStats = os\r\n  .input(\r\n    z.object({\r\n      gameType: z.enum([\"head-soccer\", \"rock-paper-scissor\", \"showdown\"]),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      playerWins: z.number(),\r\n      aiWins: z.number(),\r\n      ties: z.number(),\r\n      totalPlays: z.number(),\r\n      winRate: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/game-stats/user\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      return {\r\n        playerWins: 0,\r\n        aiWins: 0,\r\n        ties: 0,\r\n        totalPlays: 0,\r\n        winRate: 0,\r\n      };\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const statsCollection = db.collection(\"gameStats\");\r\n\r\n    const stats = await statsCollection.findOne({\r\n      userId: session.user.id,\r\n      gameType: input.gameType,\r\n    });\r\n\r\n    if (!stats) {\r\n      return {\r\n        playerWins: 0,\r\n        aiWins: 0,\r\n        ties: 0,\r\n        totalPlays: 0,\r\n        winRate: 0,\r\n      };\r\n    }\r\n\r\n    const winRate =\r\n      stats.totalPlays > 0 ? (stats.playerWins / stats.totalPlays) * 100 : 0;\r\n\r\n    return {\r\n      playerWins: stats.playerWins || 0,\r\n      aiWins: stats.aiWins || 0,\r\n      ties: stats.ties || 0,\r\n      totalPlays: stats.totalPlays || 0,\r\n      winRate: Math.round(winRate * 100) / 100,\r\n    };\r\n  });\r\n\r\n// Leaderboard: Get global leaderboard for a game\r\nconst getLeaderboard = os\r\n  .input(\r\n    z.object({\r\n      gameType: z.enum([\"head-soccer\", \"rock-paper-scissor\", \"showdown\"]),\r\n      limit: z.number().int().positive().optional().default(100),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      leaderboard: z.array(\r\n        z.object({\r\n          userId: z.string(),\r\n          userName: z.string().nullable(),\r\n          playerWins: z.number(),\r\n          aiWins: z.number(),\r\n          ties: z.number(),\r\n          totalPlays: z.number(),\r\n          winRate: z.number(),\r\n          rank: z.number(),\r\n        })\r\n      ),\r\n      userRank: z.number().nullable(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/leaderboard\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const statsCollection = db.collection(\"gameStats\");\r\n\r\n    // Aggregate leaderboard with user names\r\n    const leaderboardData = await statsCollection\r\n      .aggregate([\r\n        {\r\n          $match: {\r\n            gameType: input.gameType,\r\n            totalPlays: { $gt: 0 },\r\n          },\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: \"user\",\r\n            localField: \"userId\",\r\n            foreignField: \"id\",\r\n            as: \"userInfo\",\r\n          },\r\n        },\r\n        {\r\n          $unwind: {\r\n            path: \"$userInfo\",\r\n            preserveNullAndEmptyArrays: true,\r\n          },\r\n        },\r\n        {\r\n          $addFields: {\r\n            winRate: {\r\n              $multiply: [\r\n                {\r\n                  $cond: [\r\n                    { $gt: [\"$totalPlays\", 0] },\r\n                    { $divide: [\"$playerWins\", \"$totalPlays\"] },\r\n                    0,\r\n                  ],\r\n                },\r\n                100,\r\n              ],\r\n            },\r\n          },\r\n        },\r\n        {\r\n          $sort: {\r\n            playerWins: -1,\r\n            winRate: -1,\r\n            totalPlays: -1,\r\n          },\r\n        },\r\n        {\r\n          $limit: input.limit,\r\n        },\r\n        {\r\n          $project: {\r\n            userId: 1,\r\n            userName: \"$userInfo.name\",\r\n            playerWins: 1,\r\n            aiWins: 1,\r\n            ties: { $ifNull: [\"$ties\", 0] },\r\n            totalPlays: 1,\r\n            winRate: { $round: [\"$winRate\", 2] },\r\n          },\r\n        },\r\n      ])\r\n      .toArray();\r\n\r\n    // Add rank to each entry\r\n    const leaderboard = leaderboardData.map((entry, index) => ({\r\n      ...entry,\r\n      rank: index + 1,\r\n      userId: entry.userId || \"\",\r\n      userName: entry.userName || null,\r\n      playerWins: entry.playerWins || 0,\r\n      aiWins: entry.aiWins || 0,\r\n      ties: entry.ties || 0,\r\n      totalPlays: entry.totalPlays || 0,\r\n      winRate: entry.winRate || 0,\r\n    }));\r\n\r\n    // Find user's rank if logged in\r\n    let userRank: number | null = null;\r\n    if (session) {\r\n      const userEntry = leaderboard.find(\r\n        (entry) => entry.userId === session.user.id\r\n      );\r\n      userRank = userEntry ? userEntry.rank : null;\r\n    }\r\n\r\n    return {\r\n      leaderboard,\r\n      userRank,\r\n    };\r\n  });\r\n\r\n// AI Game Generation: Create a new AI-generated game\r\nconst createAIGame = os\r\n  .input(\r\n    z.object({\r\n      description: z\r\n        .string()\r\n        .min(10, \"Description must be at least 10 characters\"),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      id: z.string(),\r\n      title: z.string(),\r\n      code: z.string(),\r\n      description: z.string(),\r\n      createdAt: z.coerce.date(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"POST\",\r\n    path: \"/ai/create\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized: Must be logged in to create AI games\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    // Generate game code using Google Gemini AI with structured output\r\n    const gameId = `game_${Date.now()}_${Math.random()\r\n      .toString(36)\r\n      .substr(2, 9)}`;\r\n\r\n    const systemPrompt = `You are an expert HTML5 Canvas game developer specializing in creating beautiful, polished, and engaging browser games. Your games are known for:\r\n\r\nVISUAL EXCELLENCE:\r\n- Modern, clean UI design with smooth animations\r\n- Beautiful color schemes and gradients\r\n- Professional typography and layouts\r\n- Particle effects and visual feedback\r\n- Smooth transitions and polished interactions\r\n\r\nTECHNICAL QUALITY:\r\n- Optimized game loops with requestAnimationFrame\r\n- Responsive controls (keyboard, mouse, touch)\r\n- Clean, maintainable code structure\r\n- Proper collision detection and physics\r\n- Memory-efficient resource management\r\n\r\nGAME DESIGN:\r\n- Clear visual feedback for all interactions\r\n- Intuitive UI with instructions\r\n- Progressive difficulty curves\r\n- Score systems and achievements\r\n- Game over screens with replay functionality\r\n- Sound effects descriptions (as comments)\r\n\r\nUSER EXPERIENCE:\r\n- Mobile-responsive design\r\n- Loading states and error handling\r\n- Accessibility considerations\r\n- Clear win/lose conditions\r\n- Engaging gameplay mechanics`;\r\n\r\n    const { object: gameData } = await generateObject({\r\n      model: aiModel,\r\n      schema: z.object({\r\n        title: z\r\n          .string()\r\n          .describe(\r\n            \"A catchy, descriptive title for the game (max 50 characters)\"\r\n          ),\r\n        html: z\r\n          .string()\r\n          .describe(\r\n            \"Complete HTML5 game code including all HTML, CSS, and JavaScript in a single file\"\r\n          ),\r\n      }),\r\n      prompt: `${systemPrompt}\r\n\r\nGenerate a COMPLETE, FULLY FUNCTIONAL, and BEAUTIFUL HTML5 canvas game based on this description:\r\n\r\n\"${input.description}\"\r\n\r\nREQUIREMENTS:\r\n1. Create a complete HTML document with <!DOCTYPE html>\r\n2. Include all necessary HTML, CSS, and JavaScript in a single file\r\n3. Use HTML5 Canvas for graphics.\r\n4. Implement smooth game loop with requestAnimationFrame\r\n5. Add responsive keyboard/mouse controls\r\n6. Include HUD elements (score, health, instructions)\r\n7. Use beautiful colors, gradients, and animations\r\n8. Add particle effects where appropriate\r\n9. Implement game over/win screens with restart functionality\r\n10. Center canvas with elegant dark background\r\n11. Add smooth transitions and visual feedback\r\n12. Include a professional UI with clear instructions\r\n13. Make the game feel polished and complete\r\n\r\nGenerate a catchy, descriptive title and the complete game code.`,\r\n      temperature: 0.7,\r\n    });\r\n\r\n    const newGame = {\r\n      id: gameId,\r\n      userId: session.user.id,\r\n      title: gameData.title,\r\n      description: input.description,\r\n      code: gameData.html,\r\n      versions: [],\r\n      currentVersion: 0,\r\n      published: false,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    await gamesCollection.insertOne(newGame);\r\n\r\n    return {\r\n      id: newGame.id,\r\n      title: newGame.title,\r\n      code: newGame.code,\r\n      description: newGame.description,\r\n      createdAt: newGame.createdAt,\r\n    };\r\n  });\r\n\r\n// AI Game: Get a specific game by ID\r\nconst getAIGame = os\r\n  .input(\r\n    z.object({\r\n      id: z.string(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      id: z.string(),\r\n      title: z.string(),\r\n      code: z.string(),\r\n      description: z.string(),\r\n      versions: z.array(\r\n        z.object({\r\n          version: z.number(),\r\n          code: z.string(),\r\n          prompt: z.string(),\r\n          createdAt: z.coerce.date(),\r\n        })\r\n      ),\r\n      currentVersion: z.number(),\r\n      published: z.boolean(),\r\n      userId: z.string(),\r\n      createdAt: z.coerce.date(),\r\n      updatedAt: z.coerce.date(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/ai/game\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const game = await gamesCollection.findOne({ id: input.id });\r\n\r\n    if (!game) {\r\n      throw new Error(\"Game not found\");\r\n    }\r\n\r\n    // Check if user owns this game\r\n    if (game.userId !== session.user.id) {\r\n      throw new Error(\"Forbidden: You don't own this game\");\r\n    }\r\n\r\n    return {\r\n      id: game.id,\r\n      title: game.title,\r\n      code: game.code,\r\n      description: game.description,\r\n      versions: game.versions || [],\r\n      currentVersion: game.currentVersion || 0,\r\n      published: game.published || false,\r\n      userId: game.userId,\r\n      createdAt: game.createdAt,\r\n      updatedAt: game.updatedAt,\r\n    };\r\n  });\r\n\r\n// AI Game: Update game with AI improvements\r\nconst improveAIGame = os\r\n  .input(\r\n    z.object({\r\n      id: z.string(),\r\n      prompt: z.string().min(1, \"Prompt is required\"),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      id: z.string(),\r\n      code: z.string(),\r\n      version: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"POST\",\r\n    path: \"/ai/improve\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const game = await gamesCollection.findOne({ id: input.id });\r\n\r\n    if (!game) {\r\n      throw new Error(\"Game not found\");\r\n    }\r\n\r\n    if (game.userId !== session.user.id) {\r\n      throw new Error(\"Forbidden\");\r\n    }\r\n\r\n    // Use AI SDK to improve the code based on prompt with structured output\r\n    const systemPrompt = `You are an expert HTML5 Canvas game developer specializing in creating beautiful, polished, and engaging browser games. When improving games, you focus on:\r\n\r\nVISUAL IMPROVEMENTS:\r\n- Enhanced animations and smooth transitions\r\n- Better color schemes and gradients\r\n- Improved UI/UX design\r\n- Added particle effects and visual feedback\r\n- Professional polish and attention to detail\r\n\r\nTECHNICAL IMPROVEMENTS:\r\n- Performance optimizations\r\n- Better code structure and maintainability\r\n- Enhanced game mechanics\r\n- Improved collision detection\r\n- Memory efficiency\r\n\r\nGAMEPLAY IMPROVEMENTS:\r\n- Balanced difficulty\r\n- Better feedback systems\r\n- Enhanced controls and responsiveness\r\n- More engaging mechanics\r\n- Quality of life improvements`;\r\n\r\n    const { object: gameImprovement } = await generateObject({\r\n      model: aiModel,\r\n      schema: z.object({\r\n        html: z\r\n          .string()\r\n          .describe(\r\n            \"Complete improved HTML5 game code with all requested changes implemented\"\r\n          ),\r\n      }),\r\n      prompt: `${systemPrompt}\r\n\r\nUSER REQUEST: \"${input.prompt}\"\r\n\r\nCURRENT GAME CODE:\r\n${game.code}\r\n\r\nINSTRUCTIONS:\r\n1. Carefully implement the user's requested improvements\r\n2. Maintain all existing functionality unless explicitly asked to change it\r\n3. Keep the game fully functional and playable\r\n4. Enhance visual polish and user experience\r\n5. Ensure code remains clean and well-structured\r\n6. Add smooth transitions for any new features\r\n7. Test logic carefully to avoid breaking the game\r\n8. Maintain the canvas size and overall structure\r\n\r\nGenerate the complete improved HTML code.`,\r\n      temperature: 0.7,\r\n    });\r\n\r\n    const improvedCode = gameImprovement.html;\r\n\r\n    const newVersion = (game.currentVersion || 0) + 1;\r\n    const versionEntry = {\r\n      version: newVersion,\r\n      code: improvedCode,\r\n      prompt: input.prompt,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    await gamesCollection.updateOne(\r\n      { id: input.id },\r\n      {\r\n        $set: {\r\n          code: improvedCode,\r\n          currentVersion: newVersion,\r\n          updatedAt: new Date(),\r\n        },\r\n        $push: {\r\n          versions: versionEntry,\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        } as any,\r\n      }\r\n    );\r\n\r\n    return {\r\n      id: input.id,\r\n      code: improvedCode,\r\n      version: newVersion,\r\n    };\r\n  });\r\n\r\n// AI Game: Restore a previous version\r\nconst restoreAIGameVersion = os\r\n  .input(\r\n    z.object({\r\n      id: z.string(),\r\n      version: z.number(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      id: z.string(),\r\n      code: z.string(),\r\n      version: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"POST\",\r\n    path: \"/ai/restore-version\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const game = await gamesCollection.findOne({ id: input.id });\r\n\r\n    if (!game) {\r\n      throw new Error(\"Game not found\");\r\n    }\r\n\r\n    if (game.userId !== session.user.id) {\r\n      throw new Error(\"Forbidden\");\r\n    }\r\n\r\n    const versions = game.versions || [];\r\n    const targetVersion = versions.find(\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      (v: any) => v.version === input.version\r\n    );\r\n\r\n    if (!targetVersion) {\r\n      throw new Error(\"Version not found\");\r\n    }\r\n\r\n    await gamesCollection.updateOne(\r\n      { id: input.id },\r\n      {\r\n        $set: {\r\n          code: targetVersion.code,\r\n          currentVersion: input.version,\r\n          updatedAt: new Date(),\r\n        },\r\n      }\r\n    );\r\n\r\n    return {\r\n      id: input.id,\r\n      code: targetVersion.code,\r\n      version: input.version,\r\n    };\r\n  });\r\n\r\n// AI Game: Publish game to arena\r\nconst publishAIGame = os\r\n  .input(\r\n    z.object({\r\n      id: z.string(),\r\n      title: z.string().min(1, \"Title is required\"),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      success: z.boolean(),\r\n      id: z.string(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"POST\",\r\n    path: \"/ai/publish\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const game = await gamesCollection.findOne({ id: input.id });\r\n\r\n    if (!game) {\r\n      throw new Error(\"Game not found\");\r\n    }\r\n\r\n    if (game.userId !== session.user.id) {\r\n      throw new Error(\"Forbidden\");\r\n    }\r\n\r\n    await gamesCollection.updateOne(\r\n      { id: input.id },\r\n      {\r\n        $set: {\r\n          published: true,\r\n          title: input.title,\r\n          publishedAt: new Date(),\r\n          updatedAt: new Date(),\r\n        },\r\n      }\r\n    );\r\n\r\n    return {\r\n      success: true,\r\n      id: input.id,\r\n    };\r\n  });\r\n\r\n// Arena: Get all published games\r\nconst getArenaGames = os\r\n  .input(\r\n    z.object({\r\n      page: z.number().int().positive().optional().default(1),\r\n      perPage: z.number().int().positive().optional().default(12),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      games: z.array(\r\n        z.object({\r\n          id: z.string(),\r\n          title: z.string(),\r\n          description: z.string(),\r\n          html: z.string(),\r\n          userName: z.string().nullable(),\r\n          createdAt: z.coerce.date(),\r\n        })\r\n      ),\r\n      total: z.number(),\r\n      pageCount: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/arena/games\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const filter = { published: true };\r\n\r\n    const total = await gamesCollection.countDocuments(filter);\r\n    const skip = (input.page - 1) * input.perPage;\r\n    const pageCount = Math.ceil(total / input.perPage);\r\n\r\n    const games = await gamesCollection\r\n      .aggregate([\r\n        { $match: filter },\r\n        {\r\n          $lookup: {\r\n            from: \"user\",\r\n            localField: \"userId\",\r\n            foreignField: \"id\",\r\n            as: \"userInfo\",\r\n          },\r\n        },\r\n        {\r\n          $unwind: {\r\n            path: \"$userInfo\",\r\n            preserveNullAndEmptyArrays: true,\r\n          },\r\n        },\r\n        { $sort: { publishedAt: -1 } },\r\n        { $skip: skip },\r\n        { $limit: input.perPage },\r\n        {\r\n          $project: {\r\n            id: 1,\r\n            title: 1,\r\n            description: 1,\r\n            code: 1,\r\n            userName: \"$userInfo.name\",\r\n            createdAt: 1,\r\n          },\r\n        },\r\n      ])\r\n      .toArray();\r\n\r\n    return {\r\n      games: games.map((game) => ({\r\n        id: game.id,\r\n        title: game.title,\r\n        description: game.description,\r\n        html: game.code || \"\",\r\n        userName: game.userName || null,\r\n        createdAt: game.createdAt,\r\n      })),\r\n      total,\r\n      pageCount,\r\n    };\r\n  });\r\n\r\n// Arena: Get a specific published game\r\nconst getArenaGame = os\r\n  .input(\r\n    z.object({\r\n      id: z.string(),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      id: z.string(),\r\n      title: z.string(),\r\n      code: z.string(),\r\n      description: z.string(),\r\n      userName: z.string().nullable(),\r\n      createdAt: z.coerce.date(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/arena/game\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n    const usersCollection = db.collection(\"user\");\r\n\r\n    const game = await gamesCollection.findOne({\r\n      id: input.id,\r\n      published: true,\r\n    });\r\n\r\n    if (!game) {\r\n      throw new Error(\"Game not found or not published\");\r\n    }\r\n\r\n    const user = await usersCollection.findOne({ id: game.userId });\r\n\r\n    return {\r\n      id: game.id,\r\n      title: game.title,\r\n      code: game.code,\r\n      description: game.description,\r\n      userName: user?.name || null,\r\n      createdAt: game.createdAt,\r\n    };\r\n  });\r\n\r\n// AI Game: Get user's recent game generations\r\nconst getUserRecentGames = os\r\n  .input(\r\n    z.object({\r\n      limit: z.number().int().positive().optional().default(5),\r\n    })\r\n  )\r\n  .output(\r\n    z.object({\r\n      games: z.array(\r\n        z.object({\r\n          id: z.string(),\r\n          title: z.string(),\r\n          createdAt: z.coerce.date(),\r\n        })\r\n      ),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/ai/recent\",\r\n  })\r\n  .handler(async ({ input }) => {\r\n    const session = await auth.api.getSession({\r\n      headers: await headers(),\r\n    });\r\n\r\n    if (!session) {\r\n      return { games: [] };\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n    const gamesCollection = db.collection(\"aiGames\");\r\n\r\n    const games = await gamesCollection\r\n      .find({ userId: session.user.id })\r\n      .sort({ createdAt: -1 })\r\n      .limit(input.limit)\r\n      .project({ id: 1, title: 1, createdAt: 1 })\r\n      .toArray();\r\n\r\n    return {\r\n      games: games.map((game) => ({\r\n        id: game.id,\r\n        title: game.title,\r\n        createdAt: game.createdAt,\r\n      })),\r\n    };\r\n  });\r\n\r\n// Platform Stats: Get global platform statistics\r\nconst getPlatformStats = os\r\n  .input(z.object({}))\r\n  .output(\r\n    z.object({\r\n      totalUsers: z.number(),\r\n      totalGamesGenerated: z.number(),\r\n      totalPlays: z.number(),\r\n      totalPublishedGames: z.number(),\r\n    })\r\n  )\r\n  .route({\r\n    method: \"GET\",\r\n    path: \"/stats/platform\",\r\n  })\r\n  .handler(async () => {\r\n    const client = await clientPromise;\r\n    const db = client.db(env.MONGODB_DB_NAME);\r\n\r\n    // Get total users\r\n    const totalUsers = await db.collection(\"user\").countDocuments();\r\n\r\n    // Get total AI games generated\r\n    const totalGamesGenerated = await db.collection(\"aiGames\").countDocuments();\r\n\r\n    // Get total published games in arena\r\n    const totalPublishedGames = await db\r\n      .collection(\"aiGames\")\r\n      .countDocuments({ published: true });\r\n\r\n    // Get total plays across all games\r\n    const totalPlaysResult = await db\r\n      .collection(\"gameStats\")\r\n      .aggregate([\r\n        {\r\n          $group: {\r\n            _id: null,\r\n            totalPlays: { $sum: \"$totalPlays\" },\r\n          },\r\n        },\r\n      ])\r\n      .toArray();\r\n\r\n    const totalPlays =\r\n      totalPlaysResult.length > 0 ? totalPlaysResult[0].totalPlays : 0;\r\n\r\n    return {\r\n      totalUsers,\r\n      totalGamesGenerated,\r\n      totalPlays,\r\n      totalPublishedGames,\r\n    };\r\n  });\r\n\r\nexport const router = os.router({\r\n  hello,\r\n  admin: os.router({\r\n    getUsers,\r\n  }),\r\n  gameStats: os.router({\r\n    update: updateGameStats,\r\n    getUserStats: getUserGameStats,\r\n  }),\r\n  leaderboard: os.router({\r\n    get: getLeaderboard,\r\n  }),\r\n  ai: os.router({\r\n    create: createAIGame,\r\n    get: getAIGame,\r\n    improve: improveAIGame,\r\n    restoreVersion: restoreAIGameVersion,\r\n    publish: publishAIGame,\r\n    recentGames: getUserRecentGames,\r\n  }),\r\n  arena: os.router({\r\n    games: getArenaGames,\r\n    game: getArenaGame,\r\n  }),\r\n  stats: os.router({\r\n    platform: getPlatformStats,\r\n  }),\r\n});\r\nexport type Router = typeof router;\r\n",
      "type": "registry:lib",
      "target": "lib\\router.ts"
    },
    {
      "path": "lib\\types\\game-stats.ts",
      "content": "import { z } from \"zod\";\r\n\r\nexport type GameType = \"head-soccer\" | \"rock-paper-scissor\" | \"showdown\";\r\n\r\nexport const gameStatsSchema = z.object({\r\n  userId: z.string(),\r\n  gameType: z.enum([\"head-soccer\", \"rock-paper-scissor\", \"showdown\"]),\r\n  playerWins: z.number().int().nonnegative(),\r\n  aiWins: z.number().int().nonnegative(),\r\n  ties: z.number().int().nonnegative().optional(),\r\n  totalPlays: z.number().int().nonnegative(),\r\n  lastPlayedAt: z.date(),\r\n  createdAt: z.date(),\r\n  updatedAt: z.date(),\r\n});\r\n\r\nexport type GameStats = z.infer<typeof gameStatsSchema>;\r\n\r\nexport const leaderboardEntrySchema = z.object({\r\n  userId: z.string(),\r\n  userName: z.string().nullable(),\r\n  playerWins: z.number(),\r\n  aiWins: z.number(),\r\n  ties: z.number(),\r\n  totalPlays: z.number(),\r\n  winRate: z.number(),\r\n  rank: z.number(),\r\n});\r\n\r\nexport type LeaderboardEntry = z.infer<typeof leaderboardEntrySchema>;\r\n",
      "type": "registry:lib",
      "target": "lib\\types\\game-stats.ts"
    },
    {
      "path": "lib\\utils.ts",
      "content": "import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib\\utils.ts"
    },
    {
      "path": "proxy.ts",
      "content": "import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getSessionCookie } from \"better-auth/cookies\";\r\n\r\nexport async function proxy(request: NextRequest) {\r\n  const sessionCookie = getSessionCookie(request);\r\n  const PUBLIC_ROUTES = [\"/\", \"/sign-in\", \"/sign-up\"];\r\n\r\n  // Protect dashboard routes\r\n  if (!PUBLIC_ROUTES.includes(request.nextUrl.pathname)) {\r\n    if (!sessionCookie) {\r\n      return NextResponse.redirect(new URL(\"/sign-in\", request.url));\r\n    }\r\n  }\r\n\r\n  // Redirect authenticated users away from auth pages\r\n  if (\r\n    sessionCookie &&\r\n    (request.nextUrl.pathname === \"/sign-in\" ||\r\n      request.nextUrl.pathname === \"/sign-up\")\r\n  ) {\r\n    return NextResponse.redirect(new URL(\"/\", request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\nexport const config = {\r\n  matcher: [\r\n    \"/ai/:path*\",\r\n    \"/arcade/:path*\",\r\n    \"/leaderboard\",\r\n    \"/profile\",\r\n    \"/admin/:path*\",\r\n    \"/sign-in\",\r\n    \"/sign-up\",\r\n  ], // Apply middleware to specific routes\r\n};\r\n\r\n// import { NextRequest, NextResponse } from \"next/server\";\r\n// import { headers } from \"next/headers\";\r\n// import { auth } from \"@/lib/auth\";\r\n// export async function proxy(request: NextRequest) {\r\n//   const PUBLIC_ROUTES = [\"/\", \"/sign-in\", \"/sign-up\"];\r\n//   // const PRIVATE_ROUTES = [\r\n//   //   \"/admin\",\r\n//   //   \"/profile\",\r\n//   //   \"/arcade\",\r\n//   //   \"/ai\",\r\n//   //   \"/leaderboard\",\r\n//   // ];\r\n//   const session = await auth.api.getSession({\r\n//     headers: await headers(),\r\n//   });\r\n//   if (!PUBLIC_ROUTES.includes(request.nextUrl.pathname)) {\r\n//     if (!session) {\r\n//       return NextResponse.redirect(new URL(\"/sign-in\", request.url));\r\n//     }\r\n//   }\r\n//   if (\r\n//     session &&\r\n//     (request.nextUrl.pathname === \"/sign-in\" ||\r\n//       request.nextUrl.pathname === \"/sign-up\")\r\n//   ) {\r\n//     return NextResponse.redirect(new URL(\"/\", request.url));\r\n//   }\r\n//   return NextResponse.next();\r\n// }\r\n// export const config = {\r\n//   matcher: [\r\n//     \"/ai/:path*\",\r\n//     \"/arcade/:path*\",\r\n//     \"/leaderboard\",\r\n//     \"/profile\",\r\n//     \"/admin/:path*\",\r\n//     \"/sign-in\",\r\n//     \"/sign-up\",\r\n//   ], // Apply middleware to specific routes\r\n// };\r\n",
      "type": "registry:component",
      "target": "proxy.ts"
    },
    {
      "path": "public\\Bomb.svg",
      "content": "<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 70 70\"><title>bomb</title><path d=\"M35,70a35.47,35.47,0,0,1-8.45-1A35,35,0,1,1,49.83,3.3c3.53-2.25,8.75-.54,12.39,4.16.15.19.3.39.44.59a11.89,11.89,0,0,1,3.61,2.31,10.6,10.6,0,0,1,3.27,7.91A9,9,0,0,1,68,23.44a32.32,32.32,0,0,1,1.14,4h0A35,35,0,0,1,35,70ZM35,6.47A28.57,28.57,0,1,0,62.85,28.84h0A27.53,27.53,0,0,0,61.34,24a3.17,3.17,0,0,1-.16-2,3.2,3.2,0,0,1-1.49-1.33c-.29-.5-.6-1-.92-1.48a3.23,3.23,0,0,1-.11-3.39.92.92,0,0,0,.06-.29,3.33,3.33,0,0,1,.77-1.79,3.16,3.16,0,0,1-1.73-1.4,11.43,11.43,0,0,0-.65-.95c-1.59-2-3.35-2.68-3.87-2.62A1.81,1.81,0,0,1,53,9l-1.37.79a3.22,3.22,0,0,1-3.14.06A28.47,28.47,0,0,0,35,6.47Z\" style=\"fill:#051d27\"/><path d=\"M66.76,35A31.62,31.62,0,0,0,66,28.14c-2.45-.61-13.43-3.53-16.07-3.53-17.55,0-28.75,14.48-28.75,32,0,2.35,5.65,7,6.14,9.19A31.8,31.8,0,0,0,66.76,35Z\" style=\"fill:#d8003e\"/><path d=\"M58.34,27.2a31.72,31.72,0,0,1,7.67.94A31.76,31.76,0,1,0,27.33,65.83a31.77,31.77,0,0,1,31-38.63Z\" style=\"fill:#fd013e\"/><path d=\"M51.33,6.19,45.71,9.44c-2.24,1.74-1.7,6.17,1.19,9.9S54,24.69,56.19,23l4.55-4.64Z\" style=\"fill:#d8003e\"/><ellipse cx=\"56.03\" cy=\"12.26\" rx=\"4.6\" ry=\"7.67\" transform=\"translate(4.24 36.9) rotate(-37.78)\" style=\"fill:#fd013e\"/><path d=\"M41.45,38.53a1.55,1.55,0,0,1-.37,0,1.84,1.84,0,0,1-1.44-2.17c2-9.64,10.07-12,16-13.71,4.86-1.41,7-2.24,7-4.34a3.76,3.76,0,0,0-1.11-2.89c-1.91-1.81-5.63-1.67-5.67-1.66a1.84,1.84,0,1,1-.2-3.68c.22,0,5.33-.25,8.41,2.67a7.43,7.43,0,0,1,2.26,5.56c0,5.08-4.9,6.5-9.65,7.88-5.85,1.69-11.9,3.45-13.41,10.9A1.85,1.85,0,0,1,41.45,38.53Z\" style=\"fill:#2a2f3c\"/><polygon points=\"32.81 53.29 33.53 54.59 30.13 56.91 30.49 53.72 32.81 53.29\" style=\"fill:#fff\"/><polygon points=\"20.47 56.89 20.73 57.24 19.67 57.76 19.72 56.95 20.47 56.89\" style=\"fill:#fff\"/><polygon points=\"32.15 47.91 32.26 48.82 33.05 48.66 32.87 47.59 32.15 47.91\" style=\"fill:#fff\"/><polygon points=\"35.28 46.02 34.89 47.73 36.14 47.94 36.82 46.87 36.39 45.91 35.28 46.02\" style=\"fill:#fff\"/><polygon points=\"38.02 48.47 37.97 49.28 39.03 48.76 38.77 48.41 38.02 48.47\" style=\"fill:#fff\"/><polygon points=\"41.13 49.33 42.21 48.85 42.71 50.93 41.48 51.1 41.13 49.33\" style=\"fill:#fff\"/><polygon points=\"32.64 39.9 33.07 40.85 32.39 41.92 31.14 41.71 31.54 40 32.64 39.9\" style=\"fill:#fff\"/><polygon points=\"44.43 45.41 44.62 46.48 43.83 46.65 43.71 45.74 44.43 45.41\" style=\"fill:#fff\"/><polygon points=\"47.56 43.79 46.62 45.17 49.51 46.55 49.95 45.02 47.56 43.79\" style=\"fill:#fff\"/><polygon points=\"52.47 47.67 52.42 48.48 53.48 47.96 53.22 47.61 52.47 47.67\" style=\"fill:#fff\"/><polygon points=\"51.74 51.27 51.31 52.23 52.6 53.19 54.63 51.91 51.74 51.27\" style=\"fill:#fff\"/><polygon points=\"51.63 58.46 50.91 58.78 51.02 59.69 51.82 59.53 51.63 58.46\" style=\"fill:#fff\"/><polygon points=\"46.62 39.13 46.86 36.72 48.76 36.45 49.38 37.45 46.62 39.13\" style=\"fill:#fff\"/><polygon points=\"61.89 33.9 61.84 34.71 62.9 34.19 62.64 33.84 61.89 33.9\" style=\"fill:#fff\"/><polygon points=\"47.15 33.15 47.73 33.71 47.01 34.52 46.57 33.86 47.15 33.15\" style=\"fill:#fff\"/><polygon points=\"36.75 33.83 35.69 34.34 35.73 33.53 36.48 33.47 36.75 33.83\" style=\"fill:#fff\"/><polygon points=\"35.78 37.44 35.05 37.77 35.17 38.67 35.96 38.51 35.78 37.44\" style=\"fill:#fff\"/><polygon points=\"33.78 34.62 33 35.77 31.73 35.41 31.25 33.9 32.46 32.87 33.78 34.62\" style=\"fill:#fff\"/><polygon points=\"28.58 24.4 28.76 25.46 27.97 25.63 27.85 24.72 28.58 24.4\" style=\"fill:#fff\"/><polygon points=\"47 26.82 43.8 40.43 34.23 26.82 41.68 41.48 31.04 38.34 37.42 42.53 19.33 47.76 39.55 44.62 36.36 55.09 42.74 47.76 47 51.95 47 46.72 61.89 49.86 48.06 43.57 55.51 38.34 47 41.48 47 26.82\" style=\"fill:#fdcb02\"/><polygon points=\"56.57 43.61 63.67 41.84 63.67 43.61 56.57 43.61\" style=\"fill:#fdcb02\"/><polygon points=\"32.63 33.01 26.43 22.4 25.54 25.05 32.63 33.01\" style=\"fill:#fdcb02\"/><polygon points=\"34.41 52.44 28.2 63.04 27.31 60.39 34.41 52.44\" style=\"fill:#fdcb02\"/><polygon points=\"46.93 44.58 52.19 51.23 44.6 47 42.26 52.44 41.09 48.21 33.1 50.41 38.17 44.58 32.92 42.16 38.17 40.35 36.42 37.94 41.09 38.54 39.92 29.47 43.43 38.54 44.6 37.94 44.6 39.75 49.85 37.33 46.93 42.16 53.36 42.77 46.93 44.58\" style=\"fill:#fff\"/></svg>",
      "type": "registry:file",
      "target": "public\\Bomb.svg"
    },
    {
      "path": "public\\file.svg",
      "content": "<svg fill=\"none\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z\" clip-rule=\"evenodd\" fill=\"#666\" fill-rule=\"evenodd\"/></svg>",
      "type": "registry:file",
      "target": "public\\file.svg"
    },
    {
      "path": "public\\Gems.svg",
      "content": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 76.61 70\"><defs><style>.cls-1{fill:#051d27;}.cls-2{fill:#06e403;}.cls-3{fill:#05a902;}.cls-4{fill:#01e501;}.cls-5{fill:#00d503;}.cls-6{fill:#09fd02;}.cls-7{fill:#019902;}.cls-8{fill:#01e300;}.cls-9{fill:#57fd7f;}.cls-10{fill:#03be02;}</style></defs><title>3Artboard 710</title><g id=\"Layer_1\" data-name=\"Layer 1\"><path class=\"cls-1\" d=\"M38,70h0a2.75,2.75,0,0,1-2-.92L.7,29.62a2.76,2.76,0,0,1-.31-3.25L11,8.55a2.76,2.76,0,0,1,1.27-1.12L23.12,2.71a2.77,2.77,0,0,1,.62-.19L37.74,0a3.09,3.09,0,0,1,1,0L52.62,2.52a3.38,3.38,0,0,1,.62.18L64.42,7.58l.13,0h0a2.69,2.69,0,0,1,.65.45h0a3,3,0,0,1,.4.47h0l.09.14L76.23,26.6a2.73,2.73,0,0,1-.34,3.25L40.06,69.1A2.76,2.76,0,0,1,38,70Z\"/><path class=\"cls-2\" d=\"M22.13,18.75c-2.64,7-1.74,13.65,2.09,20,6.74-3.1,11.83-8.4,14.44-17C33,18.93,27.49,17.74,22.13,18.75Z\"/><path class=\"cls-3\" d=\"M73.86,28,63.33,10.1c-6.26,1.19-8.79,4.41-9,8.91C58.67,25.3,65.39,28,73.86,28Z\"/><path class=\"cls-4\" d=\"M38.49,21.94c.15,7.77,4.2,13.31,12.19,16.57l.07,0c4.5-5.59,5.9-12,3.62-19.47C48.26,16.08,42.9,16.72,38.49,21.94Z\"/><path class=\"cls-5\" d=\"M24.22,38.76q13.19,6.43,26.46-.25L38.49,21.94Z\"/><path class=\"cls-6\" d=\"M24.22,38.76c1,9.17,6.29,18.72,13.81,28.49,7.4-9,12.5-18.4,12.72-28.77Z\"/><path class=\"cls-7\" d=\"M50.75,38.48,38,67.25,73.86,28C64.47,28.32,56.19,30.75,50.75,38.48Z\"/><path class=\"cls-8\" d=\"M2.75,27.79,38,67.25,24.22,38.76C20.11,31,11.89,28.8,2.75,27.79Z\"/><path class=\"cls-9\" d=\"M13.39,10,2.75,27.79c9.33,1.22,16.19-1.21,19.54-8.88C24.57,13.79,21.22,11,13.39,10Z\"/><polygon class=\"cls-6\" points=\"2.75 27.79 24.22 38.76 22.29 18.91 2.75 27.79\"/><polygon class=\"cls-6\" points=\"52.14 5.23 38.22 2.75 24.22 5.23 13.39 9.96 22.29 18.91 38.49 21.94 54.37 19.01 63.33 10.1 52.14 5.23\"/><polygon class=\"cls-10\" points=\"50.74 38.48 73.86 27.99 54.37 19.01 50.74 38.48\"/><polygon class=\"cls-9\" points=\"13.89 10.83 24.37 5.43 38.22 2.75 24.22 5.23 13.39 9.96 13.89 10.83\"/><polygon class=\"cls-9\" points=\"22.29 18.91 24.22 38.76 21.1 19.05 22.29 18.91\"/><polygon class=\"cls-9\" points=\"22.29 18.91 38.49 21.94 38.03 22.48 22.29 18.91\"/><polygon class=\"cls-9\" points=\"63.33 10.1 53 19.28 54.37 19.01 63.33 10.1\"/></g></svg>",
      "type": "registry:file",
      "target": "public\\Gems.svg"
    },
    {
      "path": "public\\globe.svg",
      "content": "<svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><g clip-path=\"url(#a)\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1\" fill=\"#666\"/></g><defs><clipPath id=\"a\"><path fill=\"#fff\" d=\"M0 0h16v16H0z\"/></clipPath></defs></svg>",
      "type": "registry:file",
      "target": "public\\globe.svg"
    },
    {
      "path": "public\\next.svg",
      "content": "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 394 80\"><path fill=\"#000\" d=\"M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z\"/><path fill=\"#000\" d=\"M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z\"/></svg>",
      "type": "registry:file",
      "target": "public\\next.svg"
    },
    {
      "path": "public\\vercel.svg",
      "content": "<svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1155 1000\"><path d=\"m577.3 0 577.4 1000H0z\" fill=\"#fff\"/></svg>",
      "type": "registry:file",
      "target": "public\\vercel.svg"
    },
    {
      "path": "public\\window.svg",
      "content": "<svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5\" fill=\"#666\"/></svg>",
      "type": "registry:file",
      "target": "public\\window.svg"
    },
    {
      "path": "types\\data-table.ts",
      "content": "import type { ColumnSort, Row, RowData } from \"@tanstack/react-table\";\r\nimport type { DataTableConfig } from \"@/config/data-table\";\r\nimport type { FilterItemSchema } from \"@/lib/parsers\";\r\n\r\ndeclare module \"@tanstack/react-table\" {\r\n  // biome-ignore lint/correctness/noUnusedVariables: TData is used in the TableMeta interface\r\n  interface TableMeta<TData extends RowData> {\r\n    queryKeys?: QueryKeys;\r\n  }\r\n\r\n  // biome-ignore lint/correctness/noUnusedVariables: TData and TValue are used in the ColumnMeta interface\r\n  interface ColumnMeta<TData extends RowData, TValue> {\r\n    label?: string;\r\n    placeholder?: string;\r\n    variant?: FilterVariant;\r\n    options?: Option[];\r\n    range?: [number, number];\r\n    unit?: string;\r\n    icon?: React.FC<React.SVGProps<SVGSVGElement>>;\r\n  }\r\n}\r\n\r\nexport interface QueryKeys {\r\n  page: string;\r\n  perPage: string;\r\n  sort: string;\r\n  filters: string;\r\n  joinOperator: string;\r\n}\r\n\r\nexport interface Option {\r\n  label: string;\r\n  value: string;\r\n  count?: number;\r\n  icon?: React.FC<React.SVGProps<SVGSVGElement>>;\r\n}\r\n\r\nexport type FilterOperator = DataTableConfig[\"operators\"][number];\r\nexport type FilterVariant = DataTableConfig[\"filterVariants\"][number];\r\nexport type JoinOperator = DataTableConfig[\"joinOperators\"][number];\r\n\r\nexport interface ExtendedColumnSort<TData> extends Omit<ColumnSort, \"id\"> {\r\n  id: Extract<keyof TData, string>;\r\n}\r\n\r\nexport interface ExtendedColumnFilter<TData> extends FilterItemSchema {\r\n  id: Extract<keyof TData, string>;\r\n}\r\n\r\nexport interface DataTableRowAction<TData> {\r\n  row: Row<TData>;\r\n  variant: \"update\" | \"delete\";\r\n}\r\n",
      "type": "registry:lib",
      "target": "types\\data-table.ts"
    }
  ],
  "author": "Prathamesh Chougale",
  "title": "Complete Project"
}